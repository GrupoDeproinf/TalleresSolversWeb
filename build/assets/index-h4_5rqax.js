import{r as c,an as ee,j as e,a8 as v,a9 as l,aa as H,ao as ze,ag as f,ap as Ke,ae as Ye,aj as A,ak as M,al as ae,am as te,af as re,aq as q,ar as Ge,ah as oe}from"./index-539wkWb6.js";import{P as Qe}from"./index-8q23-vPJ.js";import{T as se}from"./index-vfq4_N5K.js";import{u as Je,f as ie,g as We,a as Xe,b as Ze}from"./index-0CnzlX3U.js";import{h as ne,r as Ve,e as ea,f as aa}from"./index.esm-SfcosvjZ.js";import{z as ce}from"./index-Joeg65xT.js";import{B as p}from"./Button-lbbOHDaq.js";import{D as ta}from"./Dialog-wy-_IubJ.js";import{t as g,N as u}from"./toast-Kuv-Kg6O.js";import"./Alert-0aqENgUy.js";import"./index-QY1rElpB.js";import"./Badge-wxO0V_gq.js";import"./Calendar-VUvOsslj.js";import"./Card-3d2Ny-JF.js";import"./index-ZwtlkJNu.js";import"./index-GZJ85AcF.js";import{D as le}from"./Drawer-6jFvKXvj.js";import"./index-f0t581vk.js";import"./FormItem-4hf-OpEC.js";import"./Input-rZurD_SY.js";import"./index-SB1RqqYu.js";import"./index-szTpe2ou.js";import"./index-36f6Awn2.js";import"./Progress-IVuvSuG6.js";import"./index-3rkSkrjB.js";import"./RangeCalendar-fqgSycDJ.js";import"./ScrollBar-21IJHa49.js";import"./index-dixI5efI.js";import"./Select-_WLG2nZW.js";import"./Skeleton-PvZdQxHm.js";import"./index-N9bKkTGe.js";import"./Switcher-yVf1hXpQ.js";import"./index-0llaQOPF.js";import"./Tag-UKZrYvqc.js";import"./index-PUobFn2i.js";import"./index-r1DEGTA8.js";import"./Tooltip-fVR4Pvc0.js";import"./Upload-exfHthby.js";import{O as ra,D as oa}from"./index.esm-OL94PTg3.js";import{c as me,a as $,b as sa}from"./index.esm-t3Wg6Ops.js";import{F as de,a as ge,b as j,E as y}from"./formik.esm-tLuEPHjK.js";import"./context-GzcGESCG.js";import"./index-G15e5EAi.js";import"./index-1cVp-vaj.js";import"./CloseButton-IJjOei07.js";import"./motion-Orz9ojqj.js";import"./useTimeout-B-0By3up.js";import"./StatusIcon-82SFzyR4.js";import"./chainedFunction-ltcSYACe.js";import"./useMergeRef-Rt_Crb27.js";import"./useControllableState-UuCJUovw.js";import"./cloneDeep-7KURzpUX.js";import"./_getAllKeys-KNEt9iWY.js";import"./_MapCache-NQ-SQVqY.js";import"./Views-NOUPq-xv.js";import"./_baseIsEqual-tnuqJavW.js";import"./get-XfkbH3d_.js";import"./toString-di1JZzuI.js";import"./floating-ui.react-n50WnHyP.js";import"./floating-ui.dom-0rLBacrf.js";import"./TimeInput-Lh0yFCvx.js";import"./useUniqueId-uWKiPAyB.js";import"./useDidUpdate-ylEkYyKW.js";import"./useRootClose-1rVgdO8Y.js";import"./isNil-Vfqvah68.js";import"./index-Z9EcYsrp.js";import"./toConsumableArray-YYxflNc8.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./setPrototypeOf-ahVgEFUp.js";import"./mapCloneElement-A9mzE-Fa.js";import"./index.esm-0CsLKNQK.js";import"./index.esm-6I_Eb_0m.js";const ia=()=>{const[ue,pe]=c.useState([]),[he,xe]=c.useState([]),[be,I]=c.useState([]),[fe,k]=c.useState(!1),[z,je]=c.useState("nombre"),[L,ye]=c.useState(""),[o,C]=c.useState(null),[we,F]=c.useState(!1),D=async()=>{const a=v(l,"Categorias"),t=await H(a),r=[],s=t.docs.map(async n=>{const h=n.data(),w=v(l,"Categorias",n.id,"Subcategorias"),d=(await H(w)).docs.map(S=>({...S.data(),uid:S.id}));return{...h,id:n.id,subcategorias:d}}),i=await Promise.all(s);r.push(...i),pe(r)};c.useEffect(()=>{D()},[]);const Ne=async()=>{await D(),g.push(e.jsx(u,{title:"Datos actualizados",children:"La tabla ha sido actualizada con éxito."}))},[Ce,_]=c.useState(!1),[na,Se]=c.useState({nombre:"",descripcion:"",fechaCreacion:ee.fromDate(new Date),imageUrl:"",nombreUser:"",estatus:!0,id:""}),ve=a=>{C(a),k(!0)},De=a=>{C(a),P(a.subcategorias||[]),F(!0)};ce.object({nombre:ce.string().min(3,"El nombre debe tener al menos 3 caracteres")});const[ca,P]=c.useState([{nombre:"",descripcion:"",estatus:!0,uid:""}]),K=me().shape({nombre:$().required("El nombre es obligatorio.").min(3,"El nombre debe tener al menos 3 caracteres."),descripcion:$().required("La descripción es obligatoria.").min(10,"La descripción debe tener al menos 10 caracteres."),subcategorias:sa().of(me().shape({nombre:$().required("El nombre de la subcategoría es obligatorio.").min(3,"El nombre debe tener al menos 3 caracteres."),descripcion:$().required("La descripción es obligatoria.").min(10,"La descripción debe tener al menos 10 caracteres.")})).min(1,"Debe agregar al menos una subcategoría.")}),Ee=async a=>{var s,i;const r=ze().currentUser;if(!a||!r){g.push(e.jsx(u,{title:"Error",children:r?"Los datos de la categoría son inválidos. Por favor, verifica.":"Usuario no autenticado."}));return}try{const n=f(l,"Usuarios",r.uid),h=await Ke(n),w=h.exists()&&((s=h.data())!=null&&s.nombre)?h.data().nombre:"Administrador",{subcategorias:m,image_file:d,...S}=a,E={...S,nombreUser:w,fechaCreacion:ee.fromDate(new Date),imageUrl:"",estatus:!0},R=await Ye(v(l,"Categorias"),E);let U="";if(d){const N=(i=d.name.split(".").pop())==null?void 0:i.toLowerCase();if(!N||!["png","jpg","jpeg","webp"].includes(N)){g.push(e.jsx(u,{title:"Error",children:"Tipo de archivo no soportado. Solo se permiten imágenes."}));return}const x=`${R.id}_1.${N}`,b=M(A,`categoriesImages/${x}`);await ae(b,d),U=await te(b),await re(R,{imageUrl:U})}if(m&&m.length>0){const N=v(l,"Categorias",R.id,"Subcategorias"),x=q(l);m.forEach(b=>{if(b.nombre&&b.descripcion){const B=f(N);x.set(B,b)}}),await x.commit()}g.push(e.jsx(u,{title:"Éxito",children:"Categoría y subcategorías creadas con éxito."})),_(!1),D()}catch(n){console.error("Error al crear categoría:",n),g.push(e.jsx(u,{title:"Error",children:"Ocurrió un error al crear la categoría. Inténtalo nuevamente."}))}},Re=a=>{const t=a.target.value;ye(t),I([{id:z,value:t}])},Ue=a=>{const t=a.target.value;je(t),L!==""&&I([{id:t,value:L}])},$e=async a=>{var t,r,s;if(a){if(!o){console.error("selectedCategory es null o undefined");return}try{const i=f(l,"Categorias",o.id);let n=o.imageUrl;if(a.image_file){const m=a.image_file;let d=0;if(o.imageUrl){const x=(((t=o.imageUrl.split("/").pop())==null?void 0:t.split("?")[0])||"").match(/_(\d+)\./);d=x?parseInt(x[1],10):0}const S=d+1,E=(r=m.name.split(".").pop())==null?void 0:r.toLowerCase();if(!E||!["png","jpg","jpeg","webp"].includes(E)){g.push(e.jsx(u,{title:"Error",children:"Tipo de archivo no soportado. Solo se permiten imágenes."}));return}const R=`${o.id}_${S}.${E}`,U=M(A,`categoriesImages/${R}`);if(o.imageUrl){const x=(s=decodeURIComponent(o.imageUrl).split("/").pop())==null?void 0:s.split("?")[0];if(x){const b=M(A,`categoriesImages/${x}`);try{await Ge(b)}catch(B){console.error("Error al eliminar la imagen anterior:",B)}}}await ae(U,m),n=await te(U)}await re(i,{nombre:a.nombre,descripcion:a.descripcion,imageUrl:n});const h=v(l,`Categorias/${o.id}/Subcategorias`),w=q(l);a.subcategorias.forEach(m=>{if(m.uid){const d=f(h,m.uid);w.set(d,m,{merge:!0})}else{const d=f(h);w.set(d,m)}}),await w.commit(),g.push(e.jsx(u,{title:"Éxito",children:"Categoría y subcategorías actualizadas con éxito."})),F(!1),D()}catch(i){console.error("Error al guardar los cambios:",i),g.push(e.jsx(u,{title:"Error",children:"Ocurrió un error al guardar los cambios."}))}}},Ie=[{header:"Nombre",accessorKey:"nombre",cell:({getValue:a,row:t})=>{const r=t.original.imageUrl;return e.jsxs("div",{className:"flex items-center",children:[r?e.jsx("img",{src:r,alt:"Logo",className:"h-10 w-10 object-cover rounded-full mr-4"}):e.jsxs("div",{className:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center mr-2",children:[e.jsx(Ve,{className:"h-6 w-6 text-gray-400","aria-hidden":"true"})," "]}),a()," "]})},filterFn:"includesString",footer:a=>a.column.id},{header:"Descripción",accessorKey:"descripcion",cell:({getValue:a})=>a(),filterFn:"includesString",footer:a=>a.column.id},{header:"Subcategorías",accessorKey:"subcategorias",cell:({getValue:a})=>{const t=a();return Array.isArray(t)&&t.length>0?e.jsx("ul",{className:"list-disc pl-5",children:t.map(r=>e.jsx("li",{children:r.nombre},r.uid))}):e.jsx("span",{children:"No hay subcategorías"})},filterFn:"includesString",footer:a=>a.column.id},{header:"Creador",accessorKey:"nombreUser",cell:({getValue:a})=>a(),filterFn:"includesString",footer:a=>a.column.id},{header:" ",cell:({row:a})=>{const t=a.original;return e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>De(t),className:"text-blue-900",children:e.jsx(ea,{})}),e.jsx("button",{onClick:()=>ve(t),className:"text-red-700",children:e.jsx(aa,{})})]})}}],{Tr:Y,Th:ke,Td:Le,THead:Fe,TBody:_e,Sorter:la}=se,O=a=>{console.log("onDialogClose",a),k(!1),C(null)},G=a=>{console.log("Drawer cerrado",a),_(!1),Se({nombre:"",descripcion:"",logoUrl:"",id:""}),P([]),C(null)},Pe=async()=>{if(o){console.log("Eliminando a:",o);try{const a=f(l,"Categorias",o.id),t=v(l,"Categorias",o.id,"Subcategorias"),r=await H(t),s=q(l);r.docs.forEach(n=>{const h=f(t,n.id);s.delete(h)}),await s.commit(),await oe(a);const i=e.jsxs(u,{title:"Éxito",children:["Categoría ",o.nombre," y sus subcategorías eliminadas con éxito."]});g.push(i),D()}catch(a){console.error("Error eliminando la categoría:",a);const t=e.jsx(u,{title:"Error",children:"Hubo un error eliminando la categoría."});g.push(t)}finally{k(!1),C(null)}}},Oe=(a,t,r)=>{r("subcategorias",t.subcategorias.filter((s,i)=>i!==a))},Te=async(a,t,r)=>{r("subcategorias",t.subcategorias.filter((s,i)=>i!==a));try{const s=t.subcategorias[a].uid;if(!s)return;if(console.log("Eliminando subcategoría con ID:",s),!o){console.error("No se ha seleccionado una categoría");return}const i=f(l,"Categorias",o.id,"Subcategorias",s);await oe(i);const n=e.jsx(u,{title:"Éxito",children:"Subcategoría eliminada con éxito."});g.push(n)}catch(s){console.error("Error eliminando la subcategoría:",s);const i=e.jsx(u,{title:"Error",children:"Hubo un error eliminando la subcategoría."});g.push(i)}},Q=Je({data:ue,columns:Ie,state:{sorting:he,columnFilters:be},onSortingChange:xe,onColumnFiltersChange:I,getCoreRowModel:We(),getSortedRowModel:Xe(),getFilteredRowModel:Ze()}),[J,W]=c.useState(1),[T,Be]=c.useState(10);c.useState(!1);const X=Q.getRowModel().rows,He=X.length,Ae=a=>{W(a)},Me=a=>{Be(a),W(1)},Z=(J-1)*T,qe=Z+T,V=a=>{console.log("Drawer cerrado",a),F(!1),P([{nombre:"",descripcion:"",estatus:!0,uid:""}]),C(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("h1",{className:"mb-6 flex justify-start items-center space-x-4",children:[" ",e.jsx("span",{className:"text-[#000B7E]",children:"Lista de Categorias"}),e.jsx("button",{className:"p-2  bg-slate-100 hover:bg-slate-200 active:bg-slate-300 transition-all duration-200 shadow-md transform hover:scale-105 rounded-md",onClick:Ne,children:e.jsx(ra,{className:"w-5 h-5 text-gray-700 hover:text-blue-500 transition-colors duration-200"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"relative w-32",children:[" ",e.jsxs("select",{className:"h-10 w-full py-2 px-4 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:Ue,value:z,children:[e.jsx("option",{value:"",disabled:!0,children:"Seleccionar columna..."}),e.jsx("option",{value:"nombre",children:"Nombre"}),e.jsx("option",{value:"descripcion",children:"Descripcion"})]})]}),e.jsxs("div",{className:"relative w-80 ml-4",children:[e.jsx("input",{type:"text",placeholder:"Buscar...",className:"w-full py-2 px-4 pl-10 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 h-10",value:L,onChange:Re}),e.jsx(oa,{className:"absolute left-3 top-5 transform -translate-y-1/2 text-gray-500 w-5 h-5"})]}),e.jsx(p,{style:{backgroundColor:"#000B7E"},className:"w-40 ml-4 text-white hover:opacity-80",onClick:()=>_(!0),children:"Crear Categoría"})]})})]}),e.jsxs("div",{className:"p-3 rounded-lg shadow",children:[e.jsxs(se,{className:"w-full rounded-lg",children:[e.jsx(Fe,{children:Q.getHeaderGroups().map(a=>e.jsx(Y,{children:a.headers.map(t=>e.jsx(ke,{colSpan:t.colSpan,children:t.isPlaceholder?null:e.jsx("div",{className:t.column.getCanSort()?"cursor-pointer select-none":"",onClick:t.column.getToggleSortingHandler(),children:ie(t.column.columnDef.header,t.getContext())})},t.id))},a.id))}),e.jsx(_e,{children:X.slice(Z,qe).map(a=>e.jsx(Y,{children:a.getVisibleCells().map(t=>e.jsx(Le,{children:ie(t.column.columnDef.cell,t.getContext())},t.id))},a.id))})]}),e.jsx(Qe,{onChange:Ae,currentPage:J,totalRows:He,rowsPerPage:T,onRowsPerPageChange:Me})]}),e.jsxs(ta,{isOpen:fe,onClose:O,onRequestClose:O,children:[e.jsx("h5",{className:"mb-4",children:"Confirmar Eliminación"}),e.jsxs("p",{children:["¿Estás seguro de que deseas eliminar a"," ",o==null?void 0:o.nombre,"?"]}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(p,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:O,children:"Cancelar"}),e.jsx(p,{style:{backgroundColor:"#B91C1C"},className:"text-white hover:opacity-80",onClick:Pe,children:"Eliminar"})]})]}),e.jsxs(le,{isOpen:we,onClose:V,className:"rounded-md shadow",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Editar Categoría"}),e.jsx(de,{initialValues:{nombre:(o==null?void 0:o.nombre)||"",descripcion:(o==null?void 0:o.descripcion)||"",subcategorias:(o==null?void 0:o.subcategorias)||[],imageUrl:(o==null?void 0:o.imageUrl)||"",image_file:null},validationSchema:K,onSubmit:a=>{$e(a)},children:({isSubmitting:a,setFieldValue:t,values:r})=>e.jsxs(ge,{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 gap-2",children:e.jsxs("div",{className:"text-center",children:[!r.image_file&&!(o!=null&&o.imageUrl)?e.jsx(ne,{className:"mx-auto h-12 w-12 text-gray-300"}):e.jsxs("div",{children:[r.image_file?e.jsx("img",{src:URL.createObjectURL(r.image_file),alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}):e.jsx("img",{src:o==null?void 0:o.imageUrl,alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}),e.jsx("button",{type:"button",onClick:()=>{t("image_file",null)},className:"mt-2 text-red-500 hover:text-red-700",children:"Quitar Logo"})]}),e.jsx("div",{className:"mt-4 flex text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"logo-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:r.image_file||o!=null&&o.imageUrl?"Cambiar Logo":"Seleccionar Logo"}),e.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",accept:"image/*",className:"sr-only",onChange:s=>{var n;const i=(n=s.target.files)==null?void 0:n[0];i&&t("image_file",i)}})]})})]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Nombre:"}),e.jsx(j,{type:"text",name:"nombre",className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(y,{name:"nombre",component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(j,{as:"textarea",name:"descripcion",className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:1,style:{maxHeight:"150px",overflowY:"auto"},onInput:s=>{s.target.style.height="auto",s.target.style.height=`${s.target.scrollHeight}px`}}),e.jsx(y,{name:"descripcion",component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsx("h3",{className:"mt-6 text-lg font-semibold",children:"Subcategorías"}),r.subcategorias.map((s,i)=>e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Nombre:"}),e.jsx(j,{type:"text",name:`subcategorias[${i}].nombre`,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(y,{name:`subcategorias[${i}].nombre`,component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(j,{as:"textarea",name:`subcategorias[${i}].descripcion`,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:1,style:{maxHeight:"150px",overflowY:"auto"},onInput:n=>{n.target.style.height="auto",n.target.style.height=`${n.target.scrollHeight}px`}}),e.jsx(y,{name:`subcategorias[${i}].descripcion`,component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsx(p,{type:"button",onClick:()=>Te(i,r,t),className:`text-white hover:opacity-80 focus:ring-2 mt-2 ${r.subcategorias.length===1?"opacity-50 cursor-not-allowed":"focus:ring-red-500"}`,style:{backgroundColor:r.subcategorias.length===1?"#A0A0A0":"#B91C1C"},disabled:r.subcategorias.length===1,children:"Eliminar Subcategoría"})]},s.uid||i)),e.jsx(p,{onClick:()=>{const s={nombre:"",descripcion:""};t("subcategorias",[...r.subcategorias,s])},style:{backgroundColor:"#000B7E"},className:"text-white hover:opacity-80",children:"Agregar Subcategoría"}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(p,{variant:"default",onClick:V,className:"mr-2",children:"Cancelar"}),e.jsx(p,{style:{backgroundColor:"#000B7E"},className:"text-white hover:opacity-80",type:"submit",disabled:a,children:"Guardar Cambios"})]})]})})]}),e.jsxs(le,{isOpen:Ce,onClose:G,className:"rounded-md shadow",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Crear Categoría"}),e.jsx(de,{initialValues:{nombre:"",descripcion:"",image_file:null,subcategorias:[{nombre:"",descripcion:"",uid:"",estatus:!0}]},validationSchema:K,onSubmit:(a,{setSubmitting:t})=>{Ee(a),t(!1)},children:({values:a,setFieldValue:t})=>e.jsxs(ge,{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10",children:e.jsxs("div",{className:"text-center",children:[a.image_file?e.jsx("img",{src:URL.createObjectURL(a.image_file),alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}):e.jsx(ne,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),e.jsx("div",{className:"mt-4 flex text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"logo-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:a.image_file?"Cambiar Logo":"Seleccionar Logo"}),e.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",accept:"image/*",className:"sr-only",onChange:r=>{var i;const s=(i=r.target.files)==null?void 0:i[0];s&&t("image_file",s)}})]})})]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Nombre:"}),e.jsx(j,{type:"text",name:"nombre",className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(y,{name:"nombre",component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(j,{as:"textarea",name:"descripcion",className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:1,style:{maxHeight:"150px",overflowY:"auto"},onInput:r=>{r.target.style.height="auto",r.target.style.height=`${r.target.scrollHeight}px`}}),e.jsx(y,{name:"descripcion",component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsx("h3",{className:"text-lg font-semibold",children:"Subcategorías"}),a.subcategorias.map((r,s)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Nombre:"}),e.jsx(j,{name:`subcategorias[${s}].nombre`,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(y,{name:`subcategorias[${s}].nombre`,component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(j,{as:"textarea",name:`subcategorias[${s}].descripcion`,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none overflow-hidden",rows:1,style:{maxHeight:"150px",overflowY:"auto"},onInput:i=>{i.target.style.height="auto",i.target.style.height=`${i.target.scrollHeight}px`}}),e.jsx(y,{name:`subcategorias[${s}].descripcion`,component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsx(p,{type:"button",onClick:()=>Oe(s,a,t),className:`text-white hover:opacity-80 focus:ring-2 mt-2 w-full sm:w-64${a.subcategorias.length===1?"opacity-50 cursor-not-allowed":"focus:ring-red-500"}`,style:{backgroundColor:a.subcategorias.length===1?"#A0A0A0":"#B91C1C"},disabled:a.subcategorias.length===1,children:"Eliminar Subcategoría"})]},s)),e.jsx(p,{type:"button",onClick:()=>t("subcategorias",[...a.subcategorias,{nombre:"",descripcion:""}]),className:"text-white hover:opacity-80",style:{backgroundColor:"#000B7E"},children:"Agregar Subcategoría"}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(p,{type:"button",className:"ltr:mr-2 rtl:ml-2",variant:"default",onClick:G,children:"Cancelar"}),e.jsx(p,{type:"submit",className:"text-white hover:opacity-80",style:{backgroundColor:"#000B7E"},children:"Guardar"})]})]})})]})]})},Rt=ia;export{Rt as default};
