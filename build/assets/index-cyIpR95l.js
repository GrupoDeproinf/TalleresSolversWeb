import{r as c,an as V,j as e,a8 as S,a9 as l,aa as H,ao as Me,ag as f,ap as qe,ae as ze,aj as A,ak as M,al as ee,am as ae,af as re,aq as q,ar as Ke,ah as te}from"./index-9t5KOHno.js";import{P as Ye}from"./index-sH7edqwo.js";import{T as oe}from"./index-n0YNfJf4.js";import{u as Ge,f as se,g as Qe,a as Je,b as We}from"./index-iPwXYkyW.js";import{h as ie,r as Xe,e as Ze,f as Ve}from"./index.esm-mNZVPVzQ.js";import{z as ne}from"./index-Joeg65xT.js";import{B as p}from"./Button-dbQf2eah.js";import{D as ea}from"./Dialog-s9Aq7y5c.js";import{t as g,N as u}from"./toast-q6v6qSL-.js";import"./Alert-zbUKBV6P.js";import"./index-ypQN3ne1.js";import"./Badge-MDG_fOZR.js";import"./Calendar-wtwv07WW.js";import"./Card-12GHa1Eq.js";import"./index-twAypVRG.js";import"./index-D1suejeK.js";import{D as ce}from"./Drawer-W7kZ8tiX.js";import"./index-LR5Pyhol.js";import"./FormItem-5QjLt-cs.js";import"./Input-s-wTJNoZ.js";import"./index-ogiVTPyl.js";import"./index-MXF22N15.js";import"./index-KWu2c9V6.js";import"./Progress-leHRfS-W.js";import"./index-cpf41aa-.js";import"./RangeCalendar-L_0-qeqX.js";import"./ScrollBar-ZEEgI7nR.js";import"./index-ost3p7pg.js";import"./Select-oNnwWO-1.js";import"./Skeleton-rFmSQzBG.js";import"./index-t-QB0hYH.js";import"./Switcher-hrtrOPzT.js";import"./index-JiamYMi9.js";import"./Tag-tfukRHoD.js";import"./index-MdupOscA.js";import"./index-YPpdsPWH.js";import"./Tooltip-RAyjLDPF.js";import"./Upload-Dmnnbry1.js";import{O as aa,D as ra}from"./index.esm-NU0RhjYe.js";import{c as le,a as $,b as ta}from"./index.esm-cRxGooxs.js";import{F as me,a as de,b as j,E as y}from"./formik.esm-6YO33aMX.js";import"./context-bikMt5Q-.js";import"./index-PnCIIK-J.js";import"./index-Ph93yIGB.js";import"./CloseButton-9VcWjcwh.js";import"./motion-tHAU1tWQ.js";import"./useTimeout-tE4CSe1J.js";import"./StatusIcon-7EOCapD5.js";import"./chainedFunction-ltcSYACe.js";import"./useMergeRef-Rt_Crb27.js";import"./useControllableState-qB4-7BO2.js";import"./cloneDeep-L8fopBeW.js";import"./_getAllKeys-ILsFLhqP.js";import"./_MapCache-YlVWJnJD.js";import"./Views-UsKkkDUh.js";import"./_baseIsEqual-Lw5xX12u.js";import"./get-XUREBnVe.js";import"./toString-FGanyWM9.js";import"./floating-ui.react-px5GD9H_.js";import"./floating-ui.dom-0rLBacrf.js";import"./TimeInput-W53t2usr.js";import"./useUniqueId-teLhnesb.js";import"./useDidUpdate-VaLvourJ.js";import"./useRootClose-_PDct3ZF.js";import"./isNil-BzOoSTit.js";import"./index-1m9E763O.js";import"./toConsumableArray-YYxflNc8.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./setPrototypeOf-ahVgEFUp.js";import"./mapCloneElement-ALARuFLs.js";import"./index.esm-wUG74Yhm.js";import"./index.esm-oN-1yHXX.js";const oa=()=>{const[ge,ue]=c.useState([]),[pe,he]=c.useState([]),[xe,I]=c.useState([]),[be,k]=c.useState(!1),[z,fe]=c.useState("nombre"),[L,je]=c.useState(""),[o,C]=c.useState(null),[ye,F]=c.useState(!1),D=async()=>{const a=S(l,"Categorias"),r=await H(a),t=[],s=r.docs.map(async n=>{const h=n.data(),N=S(l,"Categorias",n.id,"Subcategorias"),d=(await H(N)).docs.map(v=>({...v.data(),uid:v.id}));return{...h,id:n.id,subcategorias:d}}),i=await Promise.all(s);t.push(...i),ue(t)};c.useEffect(()=>{D()},[]);const Ne=async()=>{await D(),g.push(e.jsx(u,{title:"Datos actualizados",children:"La tabla ha sido actualizada con éxito."}))},[we,_]=c.useState(!1),[sa,Ce]=c.useState({nombre:"",descripcion:"",fechaCreacion:V.fromDate(new Date),imageUrl:"",nombreUser:"",estatus:!0,id:""}),ve=a=>{C(a),k(!0)},Se=a=>{C(a),O(a.subcategorias||[]),F(!0)};ne.object({nombre:ne.string().min(3,"El nombre debe tener al menos 3 caracteres")});const[ia,O]=c.useState([{nombre:"",descripcion:"",estatus:!0,uid:""}]),K=le().shape({nombre:$().required("El nombre es obligatorio.").min(3,"El nombre debe tener al menos 3 caracteres."),descripcion:$().required("La descripción es obligatoria.").min(10,"La descripción debe tener al menos 10 caracteres."),subcategorias:ta().of(le().shape({nombre:$().required("El nombre de la subcategoría es obligatorio.").min(3,"El nombre debe tener al menos 3 caracteres."),descripcion:$().required("La descripción es obligatoria.").min(10,"La descripción debe tener al menos 10 caracteres.")})).min(1,"Debe agregar al menos una subcategoría.")}),De=async a=>{var s,i;const t=Me().currentUser;if(!a||!t){g.push(e.jsx(u,{title:"Error",children:t?"Los datos de la categoría son inválidos. Por favor, verifica.":"Usuario no autenticado."}));return}try{const n=f(l,"Usuarios",t.uid),h=await qe(n),N=h.exists()&&((s=h.data())!=null&&s.nombre)?h.data().nombre:"Administrador",{subcategorias:m,image_file:d,...v}=a,E={...v,nombreUser:N,fechaCreacion:V.fromDate(new Date),imageUrl:"",estatus:!0},R=await ze(S(l,"Categorias"),E);let U="";if(d){const w=(i=d.name.split(".").pop())==null?void 0:i.toLowerCase();if(!w||!["png","jpg","jpeg","webp"].includes(w)){g.push(e.jsx(u,{title:"Error",children:"Tipo de archivo no soportado. Solo se permiten imágenes."}));return}const x=`${R.id}_1.${w}`,b=M(A,`categoriesImages/${x}`);await ee(b,d),U=await ae(b),await re(R,{imageUrl:U})}if(m&&m.length>0){const w=S(l,"Categorias",R.id,"Subcategorias"),x=q(l);m.forEach(b=>{if(b.nombre&&b.descripcion){const B=f(w);x.set(B,b)}}),await x.commit()}g.push(e.jsx(u,{title:"Éxito",children:"Categoría y subcategorías creadas con éxito."})),_(!1),D()}catch(n){console.error("Error al crear categoría:",n),g.push(e.jsx(u,{title:"Error",children:"Ocurrió un error al crear la categoría. Inténtalo nuevamente."}))}},Ee=a=>{const r=a.target.value;je(r),I([{id:z,value:r}])},Re=a=>{const r=a.target.value;fe(r),L!==""&&I([{id:r,value:L}])},Ue=async a=>{var r,t,s;if(a){if(!o){console.error("selectedCategory es null o undefined");return}try{const i=f(l,"Categorias",o.id);let n=o.imageUrl;if(a.image_file){const m=a.image_file;let d=0;if(o.imageUrl){const x=(((r=o.imageUrl.split("/").pop())==null?void 0:r.split("?")[0])||"").match(/_(\d+)\./);d=x?parseInt(x[1],10):0}const v=d+1,E=(t=m.name.split(".").pop())==null?void 0:t.toLowerCase();if(!E||!["png","jpg","jpeg","webp"].includes(E)){g.push(e.jsx(u,{title:"Error",children:"Tipo de archivo no soportado. Solo se permiten imágenes."}));return}const R=`${o.id}_${v}.${E}`,U=M(A,`categoriesImages/${R}`);if(o.imageUrl){const x=(s=decodeURIComponent(o.imageUrl).split("/").pop())==null?void 0:s.split("?")[0];if(x){const b=M(A,`categoriesImages/${x}`);try{await Ke(b)}catch(B){console.error("Error al eliminar la imagen anterior:",B)}}}await ee(U,m),n=await ae(U)}await re(i,{nombre:a.nombre,descripcion:a.descripcion,imageUrl:n});const h=S(l,`Categorias/${o.id}/Subcategorias`),N=q(l);a.subcategorias.forEach(m=>{if(m.uid){const d=f(h,m.uid);N.set(d,m,{merge:!0})}else{const d=f(h);N.set(d,m)}}),await N.commit(),g.push(e.jsx(u,{title:"Éxito",children:"Categoría y subcategorías actualizadas con éxito."})),F(!1),D()}catch(i){console.error("Error al guardar los cambios:",i),g.push(e.jsx(u,{title:"Error",children:"Ocurrió un error al guardar los cambios."}))}}},$e=[{header:"Nombre",accessorKey:"nombre",cell:({getValue:a,row:r})=>{const t=r.original.imageUrl;return e.jsxs("div",{className:"flex items-center",children:[t?e.jsx("img",{src:t,alt:"Logo",className:"h-10 w-10 object-cover rounded-full mr-4"}):e.jsxs("div",{className:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center mr-2",children:[e.jsx(Xe,{className:"h-6 w-6 text-gray-400","aria-hidden":"true"})," "]}),a()," "]})},filterFn:"includesString",footer:a=>a.column.id},{header:"Descripción",accessorKey:"descripcion",cell:({getValue:a})=>a(),filterFn:"includesString",footer:a=>a.column.id},{header:"Subcategorías",accessorKey:"subcategorias",cell:({getValue:a})=>{const r=a();return Array.isArray(r)&&r.length>0?e.jsx("ul",{className:"list-disc pl-5",children:r.map(t=>e.jsx("li",{children:t.nombre},t.uid))}):e.jsx("span",{children:"No hay subcategorías"})},filterFn:"includesString",footer:a=>a.column.id},{header:"Creador",accessorKey:"nombreUser",cell:({getValue:a})=>a(),filterFn:"includesString",footer:a=>a.column.id},{header:" ",cell:({row:a})=>{const r=a.original;return e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Se(r),className:"text-blue-900",children:e.jsx(Ze,{})}),e.jsx("button",{onClick:()=>ve(r),className:"text-red-700",children:e.jsx(Ve,{})})]})}}],{Tr:Y,Th:Ie,Td:ke,THead:Le,TBody:Fe,Sorter:na}=oe,T=a=>{console.log("onDialogClose",a),k(!1),C(null)},G=a=>{console.log("Drawer cerrado",a),_(!1),Ce({nombre:"",descripcion:"",logoUrl:"",id:""}),O([]),C(null)},_e=async()=>{if(o){console.log("Eliminando a:",o);try{const a=f(l,"Categorias",o.id),r=S(l,"Categorias",o.id,"Subcategorias"),t=await H(r),s=q(l);t.docs.forEach(n=>{const h=f(r,n.id);s.delete(h)}),await s.commit(),await te(a);const i=e.jsxs(u,{title:"Éxito",children:["Categoría ",o.nombre," y sus subcategorías eliminadas con éxito."]});g.push(i),D()}catch(a){console.error("Error eliminando la categoría:",a);const r=e.jsx(u,{title:"Error",children:"Hubo un error eliminando la categoría."});g.push(r)}finally{k(!1),C(null)}}},Oe=(a,r,t)=>{t("subcategorias",r.subcategorias.filter((s,i)=>i!==a))},Te=async(a,r,t)=>{t("subcategorias",r.subcategorias.filter((s,i)=>i!==a));try{const s=r.subcategorias[a].uid;if(!s)return;if(console.log("Eliminando subcategoría con ID:",s),!o){console.error("No se ha seleccionado una categoría");return}const i=f(l,"Categorias",o.id,"Subcategorias",s);await te(i);const n=e.jsx(u,{title:"Éxito",children:"Subcategoría eliminada con éxito."});g.push(n)}catch(s){console.error("Error eliminando la subcategoría:",s);const i=e.jsx(u,{title:"Error",children:"Hubo un error eliminando la subcategoría."});g.push(i)}},Q=Ge({data:ge,columns:$e,state:{sorting:pe,columnFilters:xe},onSortingChange:he,onColumnFiltersChange:I,getCoreRowModel:Qe(),getSortedRowModel:Je(),getFilteredRowModel:We()}),[J,Pe]=c.useState(1),P=6;c.useState(!1);const W=Q.getRowModel().rows,Be=W.length,He=a=>{console.log("onPaginationChange",a),Pe(a)},X=(J-1)*P,Ae=X+P,Z=a=>{console.log("Drawer cerrado",a),F(!1),O([{nombre:"",descripcion:"",estatus:!0,uid:""}]),C(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("h1",{className:"mb-6 flex justify-start items-center space-x-4",children:[" ",e.jsx("span",{className:"text-[#000B7E]",children:"Lista de Categorias"}),e.jsx("button",{className:"p-2  bg-slate-100 hover:bg-slate-200 active:bg-slate-300 transition-all duration-200 shadow-md transform hover:scale-105 rounded-md",onClick:Ne,children:e.jsx(aa,{className:"w-5 h-5 text-gray-700 hover:text-blue-500 transition-colors duration-200"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"relative w-32",children:[" ",e.jsxs("select",{className:"h-10 w-full py-2 px-4 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:Re,value:z,children:[e.jsx("option",{value:"",disabled:!0,children:"Seleccionar columna..."}),e.jsx("option",{value:"nombre",children:"Nombre"}),e.jsx("option",{value:"descripcion",children:"Descripcion"})]})]}),e.jsxs("div",{className:"relative w-80 ml-4",children:[e.jsx("input",{type:"text",placeholder:"Buscar...",className:"w-full py-2 px-4 pl-10 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 h-10",value:L,onChange:Ee}),e.jsx(ra,{className:"absolute left-3 top-5 transform -translate-y-1/2 text-gray-500 w-5 h-5"})]}),e.jsx(p,{style:{backgroundColor:"#000B7E"},className:"w-40 ml-4 text-white hover:opacity-80",onClick:()=>_(!0),children:"Crear Categoría"})]})})]}),e.jsxs("div",{className:"p-3 rounded-lg shadow",children:[e.jsxs(oe,{className:"w-full rounded-lg",children:[e.jsx(Le,{children:Q.getHeaderGroups().map(a=>e.jsx(Y,{children:a.headers.map(r=>e.jsx(Ie,{colSpan:r.colSpan,children:r.isPlaceholder?null:e.jsx("div",{className:r.column.getCanSort()?"cursor-pointer select-none":"",onClick:r.column.getToggleSortingHandler(),children:se(r.column.columnDef.header,r.getContext())})},r.id))},a.id))}),e.jsx(Fe,{children:W.slice(X,Ae).map(a=>e.jsx(Y,{children:a.getVisibleCells().map(r=>e.jsx(ke,{children:se(r.column.columnDef.cell,r.getContext())},r.id))},a.id))})]}),e.jsx(Ye,{onChange:He,currentPage:J,totalRows:Be,rowsPerPage:P})]}),e.jsxs(ea,{isOpen:be,onClose:T,onRequestClose:T,children:[e.jsx("h5",{className:"mb-4",children:"Confirmar Eliminación"}),e.jsxs("p",{children:["¿Estás seguro de que deseas eliminar a"," ",o==null?void 0:o.nombre,"?"]}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(p,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:T,children:"Cancelar"}),e.jsx(p,{style:{backgroundColor:"#B91C1C"},className:"text-white hover:opacity-80",onClick:_e,children:"Eliminar"})]})]}),e.jsxs(ce,{isOpen:ye,onClose:Z,className:"rounded-md shadow",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Editar Categoría"}),e.jsx(me,{initialValues:{nombre:(o==null?void 0:o.nombre)||"",descripcion:(o==null?void 0:o.descripcion)||"",subcategorias:(o==null?void 0:o.subcategorias)||[],imageUrl:(o==null?void 0:o.imageUrl)||"",image_file:null},validationSchema:K,onSubmit:a=>{Ue(a)},children:({isSubmitting:a,setFieldValue:r,values:t})=>e.jsxs(de,{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 gap-2",children:e.jsxs("div",{className:"text-center",children:[!t.image_file&&!(o!=null&&o.imageUrl)?e.jsx(ie,{className:"mx-auto h-12 w-12 text-gray-300"}):e.jsxs("div",{children:[t.image_file?e.jsx("img",{src:URL.createObjectURL(t.image_file),alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}):e.jsx("img",{src:o==null?void 0:o.imageUrl,alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}),e.jsx("button",{type:"button",onClick:()=>{r("image_file",null)},className:"mt-2 text-red-500 hover:text-red-700",children:"Quitar Logo"})]}),e.jsx("div",{className:"mt-4 flex text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"logo-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:t.image_file||o!=null&&o.imageUrl?"Cambiar Logo":"Seleccionar Logo"}),e.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",accept:"image/*",className:"sr-only",onChange:s=>{var n;const i=(n=s.target.files)==null?void 0:n[0];i&&r("image_file",i)}})]})})]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Nombre:"}),e.jsx(j,{type:"text",name:"nombre",className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(y,{name:"nombre",component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(j,{as:"textarea",name:"descripcion",className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:1,style:{maxHeight:"150px",overflowY:"auto"},onInput:s=>{s.target.style.height="auto",s.target.style.height=`${s.target.scrollHeight}px`}}),e.jsx(y,{name:"descripcion",component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsx("h3",{className:"mt-6 text-lg font-semibold",children:"Subcategorías"}),t.subcategorias.map((s,i)=>e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Nombre:"}),e.jsx(j,{type:"text",name:`subcategorias[${i}].nombre`,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(y,{name:`subcategorias[${i}].nombre`,component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(j,{as:"textarea",name:`subcategorias[${i}].descripcion`,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:1,style:{maxHeight:"150px",overflowY:"auto"},onInput:n=>{n.target.style.height="auto",n.target.style.height=`${n.target.scrollHeight}px`}}),e.jsx(y,{name:`subcategorias[${i}].descripcion`,component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsx(p,{type:"button",onClick:()=>Te(i,t,r),className:`text-white hover:opacity-80 focus:ring-2 mt-2 ${t.subcategorias.length===1?"opacity-50 cursor-not-allowed":"focus:ring-red-500"}`,style:{backgroundColor:t.subcategorias.length===1?"#A0A0A0":"#B91C1C"},disabled:t.subcategorias.length===1,children:"Eliminar Subcategoría"})]},s.uid||i)),e.jsx(p,{onClick:()=>{const s={nombre:"",descripcion:""};r("subcategorias",[...t.subcategorias,s])},style:{backgroundColor:"#000B7E"},className:"text-white hover:opacity-80",children:"Agregar Subcategoría"}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(p,{variant:"default",onClick:Z,className:"mr-2",children:"Cancelar"}),e.jsx(p,{style:{backgroundColor:"#000B7E"},className:"text-white hover:opacity-80",type:"submit",disabled:a,children:"Guardar Cambios"})]})]})})]}),e.jsxs(ce,{isOpen:we,onClose:G,className:"rounded-md shadow",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Crear Categoría"}),e.jsx(me,{initialValues:{nombre:"",descripcion:"",image_file:null,subcategorias:[{nombre:"",descripcion:"",uid:"",estatus:!0}]},validationSchema:K,onSubmit:(a,{setSubmitting:r})=>{De(a),r(!1)},children:({values:a,setFieldValue:r})=>e.jsxs(de,{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10",children:e.jsxs("div",{className:"text-center",children:[a.image_file?e.jsx("img",{src:URL.createObjectURL(a.image_file),alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}):e.jsx(ie,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),e.jsx("div",{className:"mt-4 flex text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"logo-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:a.image_file?"Cambiar Logo":"Seleccionar Logo"}),e.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",accept:"image/*",className:"sr-only",onChange:t=>{var i;const s=(i=t.target.files)==null?void 0:i[0];s&&r("image_file",s)}})]})})]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Nombre:"}),e.jsx(j,{type:"text",name:"nombre",className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(y,{name:"nombre",component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(j,{as:"textarea",name:"descripcion",className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:1,style:{maxHeight:"150px",overflowY:"auto"},onInput:t=>{t.target.style.height="auto",t.target.style.height=`${t.target.scrollHeight}px`}}),e.jsx(y,{name:"descripcion",component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsx("h3",{className:"text-lg font-semibold",children:"Subcategorías"}),a.subcategorias.map((t,s)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Nombre:"}),e.jsx(j,{name:`subcategorias[${s}].nombre`,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(y,{name:`subcategorias[${s}].nombre`,component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(j,{as:"textarea",name:`subcategorias[${s}].descripcion`,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none overflow-hidden",rows:1,style:{maxHeight:"150px",overflowY:"auto"},onInput:i=>{i.target.style.height="auto",i.target.style.height=`${i.target.scrollHeight}px`}}),e.jsx(y,{name:`subcategorias[${s}].descripcion`,component:"div",className:"text-red-600 text-sm mt-1"})]}),e.jsx(p,{type:"button",onClick:()=>Oe(s,a,r),className:`text-white hover:opacity-80 focus:ring-2 mt-2 w-full sm:w-64${a.subcategorias.length===1?"opacity-50 cursor-not-allowed":"focus:ring-red-500"}`,style:{backgroundColor:a.subcategorias.length===1?"#A0A0A0":"#B91C1C"},disabled:a.subcategorias.length===1,children:"Eliminar Subcategoría"})]},s)),e.jsx(p,{type:"button",onClick:()=>r("subcategorias",[...a.subcategorias,{nombre:"",descripcion:""}]),className:"text-white hover:opacity-80",style:{backgroundColor:"#000B7E"},children:"Agregar Subcategoría"}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(p,{type:"button",className:"ltr:mr-2 rtl:ml-2",variant:"default",onClick:G,children:"Cancelar"}),e.jsx(p,{type:"submit",className:"text-white hover:opacity-80",style:{backgroundColor:"#000B7E"},children:"Guardar"})]})]})})]})]})},Dr=oa;export{Dr as default};
