import{r as i,j as e,a4 as Qe,a7 as F,a8 as W,a9 as R,aa as k,ab as M,ac as We,ad as Ye,ag as Y,ai as Ze,aj as Xe,ak as et,al as tt,am as at,af as Z}from"./index-50rgKX9S.js";import{P as st}from"./index-zp3PEYV3.js";import{T as le}from"./index-X3G8Yg8B.js";import{u as rt,f as ce,g as ot,a as nt,b as it}from"./index-CcDhNinj.js";import{h as lt,i as ct,f as de,j as dt,k as mt,l as pt,m as ut}from"./index.esm-BzTP7NzC.js";import{B as N}from"./Button-xRLYDkxn.js";import{D as me}from"./Dialog-Z-1LJbm8.js";import{t as m,N as p}from"./toast-X0ZD5_pK.js";import{D as gt}from"./Drawer-o2AIGSQ4.js";import"./Alert-DFL_TsrK.js";import{A as ft}from"./index-_GS3LEUB.js";import"./Badge-R0b3axTj.js";import"./Calendar-3cZ-sm7M.js";import"./Card-vqKpG-UA.js";import"./index-vTv-toOv.js";import"./index-v66BEvdr.js";import"./index-VPX79BQ8.js";import"./FormItem-tcv8UMxq.js";import"./Input--puSdvxq.js";import"./index-65H9VEwm.js";import"./index-fF9tkD1K.js";import"./index-9MtaU57X.js";import"./Progress-xcEIB3tJ.js";import"./index-P-hQk050.js";import"./RangeCalendar-X9TLkpWI.js";import"./ScrollBar-KngqjvYa.js";import"./index-eWNt1lJC.js";import"./Select-CxnAYESn.js";import"./Skeleton-A_nRjx-l.js";import"./index-sn-72NfC.js";import"./Switcher-vH3as29K.js";import"./index-vTIpNX8M.js";import"./Tag-BtOgoHK3.js";import"./index-dQpvJhnL.js";import"./index-r8pI1v1_.js";import"./Tooltip-GIYbDsiP.js";import"./Upload-J1c4aH1-.js";import{O as ht,D as xt}from"./index.esm-CTp4r0U4.js";import{G as bt}from"./index.esm-m66VX6pq.js";import{c as jt,a as C,f as yt}from"./index.esm-1NCRVz3q.js";import{F as wt,a as Nt,b as w,E as j}from"./formik.esm-Y7Bmnko2.js";import{G as Ct,M as vt}from"./esm-jTxAOtdj.js";import{u as X,w as Dt}from"./xlsx-b-y62sF7.js";import"./context-S2-woICp.js";import"./index-E7L2uv60.js";import"./index-q4uYtSHq.js";import"./CloseButton-NICPh_Cl.js";import"./motion-QExVqk61.js";import"./useTimeout-wgPWIlQI.js";import"./StatusIcon-HZtVKaUR.js";import"./chainedFunction-ltcSYACe.js";import"./useMergeRef-Rt_Crb27.js";import"./useControllableState-DOzhx4PK.js";import"./cloneDeep-5XeEZjui.js";import"./_getAllKeys-1s2zq0dU.js";import"./_MapCache-2XbJC0-4.js";import"./Views-A7x8nqpb.js";import"./_baseIsEqual-2B9JDPab.js";import"./get-werKe3PL.js";import"./toString-6lQZz3FR.js";import"./floating-ui.react-bRmrURkd.js";import"./floating-ui.dom-0rLBacrf.js";import"./TimeInput-yjgONFtu.js";import"./useUniqueId-ShSZumYL.js";import"./useDidUpdate-12688dYZ.js";import"./useRootClose-wO-shYqT.js";import"./isNil-tsmo4mGH.js";import"./index-oREErx12.js";import"./toConsumableArray-YYxflNc8.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./setPrototypeOf-ahVgEFUp.js";import"./mapCloneElement-A5hCM1vC.js";import"./index.esm-opZQsgq7.js";import"./index.esm-oiqqRY0R.js";const Et=S=>{const{data:b,save:O}=S,[q]=i.useState({lat:10.47915,lng:-66.90618}),[B]=i.useState(10),G=async T=>{if(!T.latLng)return;const v={lat:T.latLng.lat(),lng:T.latLng.lng()};console.log(v),O({latiLng:v,zoom:17})};return e.jsx("div",{style:{height:"450px",width:"100%"},children:e.jsx(Ct,{center:b?b.latiLng:q,zoom:b?b.zoom:B,mapContainerStyle:{height:"400px",width:"100%",marginTop:"10px"},onClick:G,children:b&&e.jsx(vt,{position:b.latiLng})})})},St=()=>{const[S,b]=i.useState(null),[O,q]=i.useState([]),[B,G]=i.useState([{id:"scheduled_visit",desc:!1}]),[T,v]=i.useState(!1),[_,pe]=i.useState("nombre"),[D,ee]=i.useState(""),[ue,L]=i.useState([]),[y,P]=i.useState(null);i.useState(!1);const[ge,U]=i.useState(!1),[E,fe]=i.useState(!1),[u,he]=i.useState(""),[g,xe]=i.useState(""),A=async()=>{const t=F(W(R,"Usuarios")),a=await k(t),r=[];a.forEach(s=>{const o=s.data();o.typeUser==="Taller"&&(E||o.status!=="Eliminado")&&r.push({...o,id:s.id})}),q(r)},be=Qe();i.useEffect(()=>{A()},[E]);const je=async()=>{await A(),m.push(e.jsx(p,{title:"Datos actualizados",children:"La tabla ha sido actualizada con éxito."}))},ye=()=>{const t=["nombre","rif","estado","email","phone","status","Direccion","createdAt"],a={nombre:"Nombre del Taller",rif:"RIF",estado:"Estado",email:"Correo Electrónico",phone:"Número Telefónico",status:"Estado de Aprobación",Direccion:"Dirección",createdAt:"Fecha de Creación"},s=I.getFilteredRowModel().rows.map(d=>d.original).map(d=>{const l={};return t.forEach(h=>{let f=d[h];const re=a[h]||h;if(h==="createdAt"&&f){let x;typeof f=="number"?x=f:typeof f=="object"&&f.seconds?x=f.seconds*1e3:typeof f=="string"?x=new Date(f).getTime():x=0,x>0&&(f=new Date(x).toLocaleDateString("es-ES"))}l[re]=f??""}),l.Certificador=d.certificador_nombre??"",l});if(s.length===0){m.push(e.jsx(p,{title:"Sin datos para exportar",children:"No hay talleres disponibles para exportar con los filtros aplicados."}));return}let o="talleres";if(D&&(o+=`_filtro_${_}_${D}`),u||g){const d=u?new Date(u).toLocaleDateString("es-ES").replace(/\//g,"-"):"",l=g?new Date(g).toLocaleDateString("es-ES").replace(/\//g,"-"):"";o+=`_fecha_${d}_${l}`}E&&(o+="_incluye_eliminados"),o+=".xlsx";const n=X.json_to_sheet(s),c=X.book_new();X.book_append_sheet(c,n,"Talleres"),Dt(c,o),m.push(e.jsxs(p,{title:"Exportación exitosa",children:["El archivo Excel se ha descargado correctamente con ",s.length," registros."]})),U(!1)},we=()=>{U(!0)},H=()=>{U(!1)},[Ne,$]=i.useState(!1),[Ce,ve]=i.useState({nombre:"",email:"",rif:"",phone:"",uid:"",typeUser:"Taller",image_perfil:"",image_file:"",status:"Aprobado",Direccion:"",ubicacion:"",id:"",password:"",estado:""}),De=t=>{P(t),v(!0)},Ee=jt().shape({nombre:C().min(3,"El nombre debe tener al menos 3 caracteres").required("El nombre es obligatorio"),email:C().email("Debe ser un email válido").required("El correo electrónico es obligatorio").test("termina-en-com",'El email debe terminar en ".com"',t=>(t==null?void 0:t.endsWith(".com"))??!1),rif:C().matches(/^[V,E,C,G,J,P]-\d{7,10}$/,"tener entre 7 y 10 dígitos").required("El rif es obligatoria"),phone:C().matches(/^[1-9]\d{10}$/,"El teléfono debe tener 11 dígitos y no puede comenzar con 0").required("El teléfono es obligatorio"),password:C().required("Por favor ingrese una contraseña").min(6,"La contraseña debe tener al menos 6 caracteres"),confirmPassword:C().oneOf([yt("password")],"Las contraseñas no coinciden").required("Por favor confirme su contraseña"),estado:C().required("El estado es obligatorio")});i.useState(!1);const Se=async(t,a)=>{var r;if(console.log("Datos del garage a crear",t),t.password!==t.confirmPassword){m.push(e.jsx(p,{title:"Error",children:"Las contraseñas no coinciden. Por favor, verifica los campos."}));return}console.log(a);try{const s=W(R,"Usuarios"),o=t.email.toLowerCase(),n=F(s,M("email","==",o));if(!(await k(n)).empty){m.push(e.jsx(p,{title:"Error",children:"¡El correo electrónico ya está registrado!"}));return}const d=F(s,M("rif","==",t.rif));if(!(await k(d)).empty){m.push(e.jsx(p,{title:"Error",children:"¡El RIF ya está registrado!"}));return}const h=F(s,M("phone","==",t.phone));if(!(await k(h)).empty){m.push(e.jsx(p,{title:"Error",children:"¡El número de teléfono ya está registrado!"}));return}const x=(await Ye(We,o,t.password)).user,oe=Y(s,x.uid),Ke=Date.now();await Ze(oe,{uid:x.uid,nombre:t.nombre,email:o,rif:t.rif,phone:t.phone,typeUser:"Taller",status:"Aprobado",Direccion:t.Direccion,ubicacion:a===null?"":a.latiLng,estado:t.estado,image_perfil:"",createdAt:Ke});let ne="";if(t.image_file){const Q=(r=t.image_file.name.split(".").pop())==null?void 0:r.toLowerCase();if(!Q||!["png","jpg","jpeg","webp"].includes(Q)){m.push(e.jsx(p,{title:"Error",children:"Tipo de archivo no soportado. Solo se permiten imágenes."}));return}const Je=`${x.uid}_1.${Q}`,ie=et(Xe,`profileImages/${Je}`),Ve=t.image_file;await tt(ie,Ve),ne=await at(ie),await Z(oe,{image_perfil:ne})}m.push(e.jsx(p,{title:"Éxito",children:"Taller creado y autenticado con éxito."})),$(!1),A()}catch(s){console.error("Error creando el taller:",s),m.push(e.jsx(p,{title:"Error",children:"Hubo un error al crear el Taller."}))}},Te=t=>{const a=t.target.value;ee(a);const r=[];if(a&&r.push({id:_,value:a}),u||g){const s={from:u||"",to:g||""};r.push({id:"createdAt",value:JSON.stringify(s)})}L(r)},Fe=t=>{const a=t.target.value;pe(a),ee(""),!u&&!g?L([]):_e(u,g)},Re=t=>{const a=t.target.value;if(he(a),a&&g&&new Date(a)>new Date(g)){m.push(e.jsx(p,{title:"Error de validación",children:'La fecha "Desde" no puede ser mayor que la fecha "Hasta".'}));return}z(a,g,D)},ke=t=>{const a=t.target.value;if(xe(a),a&&u&&new Date(a)<new Date(u)){m.push(e.jsx(p,{title:"Error de validación",children:'La fecha "Hasta" no puede ser menor que la fecha "Desde".'}));return}z(u,a,D)},z=(t,a,r)=>{const s=[];if(r&&s.push({id:_,value:r}),t||a){const o={from:t||"",to:a||""};s.push({id:"createdAt",value:JSON.stringify(o)})}L(s)},_e=(t,a)=>{z(t,a,D)},Le=t=>{console.log("Drawer cerrado",t),$(!1),b(null),ve({nombre:"",email:"",rif:"",phone:"",id:"",Direccion:"",uid:"",estado:"",password:"",image_perfil:""}),P(null)},Pe=t=>t?t.split(" ").filter(Boolean).map(r=>typeof r=="string"&&r.length>0?r[0].toUpperCase():"").join(""):"",K=t=>{if(!t)return 0;const a=t.split("-");if(a.length!==3)return 0;const r=parseInt(a[0],10),s=parseInt(a[1],10)-1,o=parseInt(a[2],10);return new Date(o,s,r).getTime()},Ae=t=>{if(!t)return!1;const a=K(t),r=new Date;return r.setHours(0,0,0,0),a<r.getTime()},$e=[{header:"Nombre",accessorKey:"nombre",cell:({getValue:t,row:a})=>{const r=a.original.image_perfil;return e.jsxs("div",{className:"flex items-center",children:[r?e.jsx("img",{src:r,alt:"Logo",className:"h-10 w-10 object-cover rounded-full mr-4"}):e.jsxs("div",{className:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center mr-2",children:[e.jsx(bt,{className:"h-6 w-6 text-gray-400","aria-hidden":"true"})," "]}),t()," "]})},filterFn:"includesString",footer:t=>t.column.id},{header:"RIF",accessorKey:"rif"},{header:"Estado",accessorKey:"estado"},{header:"Certificador",accessorKey:"certificador_nombre"},{header:"Email",accessorKey:"email",filterFn:(t,a,r)=>{const s=t.getValue(a);return(s==null?void 0:s.toLowerCase().includes(r.toLowerCase()))||!1}},{header:"Numero Telefonico",accessorKey:"phone",cell:({row:t})=>{const a=t.original.nombre;return e.jsxs("div",{className:"flex items-center",children:[e.jsx(ft,{className:"mr-2 w-8 h-8 flex items-center justify-center rounded-full",style:{backgroundColor:"#887677"},children:e.jsx("span",{className:"text-white font-bold",children:Pe(a)})}),t.original.phone," "]})}},{header:"Estado",accessorKey:"status",cell:({row:t})=>{const a=t.getValue("status");let r,s;switch(a){case"Aprobado":r=e.jsx(ut,{className:"text-green-500 mr-1"}),s="text-green-500";break;case"Rechazado":r=e.jsx(pt,{className:"text-red-500 mr-1"}),s="text-red-500";break;case"Pendiente":r=e.jsx(mt,{className:"text-yellow-500 mr-1"}),s="text-yellow-500";break;case"En espera por aprobación":r=e.jsx(dt,{className:"text-blue-500 mr-1"}),s="text-blue-500";break;case"Eliminado":r=e.jsx(de,{className:"text-gray-500 mr-1"}),s="text-gray-500";break;default:r=null}return e.jsxs("div",{className:`flex items-center ${s}`,children:[r,e.jsx("span",{children:a})]})}},{header:"Fecha de Creación",accessorKey:"createdAt",cell:({getValue:t})=>{const a=t();if(!a)return"N/A";let r;if(typeof a=="number")r=a;else if(typeof a=="object"&&a.seconds)r=a.seconds*1e3;else if(typeof a=="string")r=new Date(a).getTime();else return"N/A";return new Date(r).toLocaleDateString("es-ES")},filterFn:(t,a,r)=>{if(!r)return!0;try{const s=JSON.parse(r),o=t.getValue(a);if(console.log("Row timestamp:",o,"Type:",typeof o),console.log("Date range filter:",s),!o)return!1;let n;if(typeof o=="number")n=o;else if(typeof o=="object"&&o.seconds)n=o.seconds*1e3;else if(typeof o=="string")n=new Date(o).getTime();else return console.log("Unknown timestamp format:",o),!1;const c=s.from?new Date(s.from+"T00:00:00"):null,d=s.to?new Date(s.to+"T23:59:59.999"):null;if(c&&!d){const l=c.getTime();return console.log("Filtering from:",l,"Row:",n,"Result:",n>=l),n>=l}if(!c&&d){const l=d.getTime();return console.log("Filtering to:",l,"Row:",n,"Result:",n<=l),console.log("To date formatted:",d.toISOString(),"Row date formatted:",new Date(n).toISOString()),n<=l}if(c&&d){const l=c.getTime(),h=d.getTime();return console.log("Filtering range:",l,"to",h,"Row:",n,"Result:",n>=l&&n<=h),n>=l&&n<=h}return!0}catch(s){return console.error("Error parsing date range filter:",s),!0}}},{header:"Fecha de Visita",accessorKey:"scheduled_visit",cell:({getValue:t})=>t()||"N/A",sortingFn:(t,a,r)=>{const s=t.getValue(r),o=a.getValue(r);if(!s&&o)return 1;if(s&&!o)return-1;if(!s&&!o)return 0;const n=K(s),c=K(o);return n-c},filterFn:"includesString",footer:t=>t.column.id},{header:" ",cell:({row:t})=>{const a=t.original,r=a.status==="Eliminado";return e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>be(`/profilegarage/${a.uid}`),className:`${r?"text-gray-400 cursor-not-allowed":"text-blue-900"}`,disabled:r,title:r?"Taller eliminado":"Ver perfil",children:e.jsx(ct,{})}),!r&&e.jsx("button",{onClick:()=>De(a),className:"text-red-700",title:"Eliminar taller",children:e.jsx(de,{})})]})}}],{Tr:te,Th:Ie,Td:Me,THead:Oe,TBody:qe,Sorter:Tt}=le,J=t=>{console.log("onDialogClose",t),v(!1),P(null)},Be=async()=>{if(y){console.log("Eliminando a:",y);try{const t=Y(R,"Usuarios",y.uid);await Z(t,{status:"Eliminado"});const a=W(R,"Servicios"),r=F(a,M("uid_taller","==",y.uid)),s=await k(r),o=s.docs.map(async c=>{await Z(Y(R,"Servicios",c.id),{estatus:!1})});await Promise.all(o);const n=e.jsxs(p,{title:"Éxito",children:["Taller ",y.nombre," eliminado con éxito. Se actualizaron ",s.docs.length," servicios relacionados."]});m.push(n),A()}catch(t){console.error("Error eliminando el taller:",t);const a=e.jsx(p,{title:"Error",children:"Hubo un error eliminando el taller."});m.push(a)}finally{v(!1),P(null)}}},I=rt({data:O,columns:$e,state:{sorting:B,columnFilters:ue},onSortingChange:G,onColumnFiltersChange:L,getCoreRowModel:ot(),getSortedRowModel:nt(),getFilteredRowModel:it()}),[ae,Ge]=i.useState(1),V=6,Ue=I.getRowModel().rows.length,He=t=>{console.log("onPaginationChange",t),Ge(t)},se=(ae-1)*V,ze=se+V;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h1",{className:"flex justify-start items-center space-x-4",children:[e.jsx("span",{className:"text-[#000B7E] text-2xl font-bold",children:"Talleres"}),e.jsx("button",{className:"p-2 bg-slate-100 hover:bg-slate-200 active:bg-slate-300 transition-all duration-200 shadow-md transform hover:scale-105 rounded-md",onClick:je,children:e.jsx(ht,{className:"w-5 h-5 text-gray-700 hover:text-blue-500 transition-colors duration-200"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-start justify-end",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"date",placeholder:"Desde",className:"w-36 py-2 px-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 h-10 text-sm",value:u,onChange:Re}),e.jsx("label",{className:"text-xs text-gray-500 mt-1",children:"Desde"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"date",placeholder:"Hasta",className:"w-36 py-2 px-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 h-10 text-sm",value:g,onChange:ke}),e.jsx("label",{className:"text-xs text-gray-500 mt-1",children:"Hasta"})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center cursor-pointer whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:t=>{fe(t.target.checked)},className:"sr-only"}),e.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${E?"bg-blue-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${E?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Mostrar eliminados"})]})}),e.jsxs("select",{className:"h-10 w-32 py-2 px-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",onChange:Fe,value:_,children:[e.jsx("option",{value:"",disabled:!0,children:"Seleccionar columna..."}),e.jsx("option",{value:"nombre",children:"Nombre"}),e.jsx("option",{value:"rif",children:"Rif"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"status",children:"Estado"})]}),e.jsxs("div",{className:"relative w-64",children:[e.jsx("input",{type:"text",placeholder:"Buscar...",className:"w-full py-2 px-4 pl-10 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 h-10",value:D,onChange:Te}),e.jsx(xt,{className:"absolute left-3 top-5 transform -translate-y-1/2 text-gray-500 w-5 h-5"})]}),e.jsx(N,{className:"w-36 text-white hover:opacity-80 text-sm",style:{backgroundColor:"#000B7E"},onClick:()=>$(!0),children:"Crear Taller"}),e.jsx("button",{style:{backgroundColor:"#10B981"},className:"w-36 h-10 px-3 text-white rounded-md shadow-md hover:bg-green-600 active:bg-green-700 transition duration-200 hover:opacity-80 text-sm",onClick:we,children:"Exportar a Excel"})]})]}),e.jsxs("div",{className:"p-3 rounded-lg shadow",children:[e.jsxs(le,{className:"w-full rounded-lg",children:[e.jsx(Oe,{children:I.getHeaderGroups().map(t=>e.jsx(te,{children:t.headers.map(a=>e.jsx(Ie,{colSpan:a.colSpan,children:a.isPlaceholder?null:e.jsx("div",{className:a.column.getCanSort()?"cursor-pointer select-none":"",onClick:a.column.getToggleSortingHandler(),children:ce(a.column.columnDef.header,a.getContext())})},a.id))},t.id))}),e.jsx(qe,{children:I.getRowModel().rows.slice(se,ze).map(t=>{const a=t.original.status==="Eliminado",r=Ae(t.original.scheduled_visit);let s="";return a?s="opacity-50 bg-gray-50":r&&(s="bg-red-100 hover:bg-red-200"),e.jsx(te,{className:s,children:t.getVisibleCells().map(o=>{let n="";return a?n="line-through text-gray-500":r&&(n="text-red-900 font-medium"),e.jsx(Me,{className:n,children:ce(o.column.columnDef.cell,o.getContext())},o.id)})},t.id)})})]}),e.jsx(st,{onChange:He,currentPage:ae,totalRows:Ue,rowsPerPage:V})]}),e.jsxs(me,{isOpen:T,onClose:J,onRequestClose:J,children:[e.jsx("h5",{className:"mb-4",children:"Confirmar Eliminación"}),e.jsxs("p",{children:["¿Estás seguro de que deseas marcar como eliminado al taller"," ",y==null?void 0:y.nombre,"? Esta acción también desactivará todos los servicios asociados."]}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(N,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:J,children:"Cancelar"}),e.jsx(N,{style:{backgroundColor:"#B91C1C"},className:"text-white hover:opacity-80",onClick:Be,children:"Eliminar"})]})]}),e.jsxs(me,{isOpen:ge,onClose:H,onRequestClose:H,children:[e.jsx("h5",{className:"mb-4",children:"Confirmar Exportación"}),e.jsx("p",{children:"¿Estás seguro de que deseas exportar todos los talleres a Excel?"}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(N,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:H,children:"Cancelar"}),e.jsx(N,{style:{backgroundColor:"#10B981"},className:"text-white hover:opacity-80",onClick:ye,children:"Exportar"})]})]}),e.jsxs(gt,{isOpen:Ne,onClose:Le,className:"rounded-md shadow",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Crear Taller"}),e.jsx(wt,{initialValues:{nombre:"",email:"",rif:"J-",phone:"",Direccion:"",ubicacion:"",password:"",image_perfil:"",estado:"",image_file:null},validationSchema:Ee,onSubmit:(t,{setSubmitting:a})=>{Se(t,S),a(!1),console.log(S),console.log(Ce)},children:({values:t,setFieldValue:a,isSubmitting:r})=>e.jsx(Nt,{children:e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10",children:e.jsxs("div",{className:"text-center",children:[t.image_perfil?e.jsx("img",{src:t.image_perfil,alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}):e.jsx(lt,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),e.jsx("div",{className:"mt-4 flex text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"logo-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:t.image_perfil?"Cambiar Logo":"Seleccionar Logo"}),e.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",accept:"image/*",className:"sr-only",onChange:s=>{var n;const o=(n=s.target.files)==null?void 0:n[0];if(o){const c=new FileReader;c.onloadend=()=>{a("image_perfil",c.result),a("image_file",o)},c.readAsDataURL(o)}}})]})})]})}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Nombre Taller:"}),e.jsx(w,{type:"text",name:"nombre",className:"mt-1 p-3 border border-gray-300 rounded-lg"}),e.jsx(j,{name:"nombre",component:"div",className:"text-red-500"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Email:"}),e.jsx(w,{type:"email",name:"email",className:"mt-1 p-3 border border-gray-300 rounded-lg"}),e.jsx(j,{name:"email",component:"div",className:"text-red-500"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"RIF:"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsxs("select",{name:"rifPrefix",value:t.rif.split("-")[0]||"J",onChange:s=>{const o=`${s.target.value}-${t.rif.split("-")[1]||""}`;a("rif",o)},className:"mx-2 p-3 border border-gray-300 rounded-l-lg",children:[e.jsx("option",{value:"V",children:"V-"}),e.jsx("option",{value:"E",children:"E-"}),e.jsx("option",{value:"C",children:"C-"}),e.jsx("option",{value:"G",children:"G-"}),e.jsx("option",{value:"J",children:"J-"}),e.jsx("option",{value:"P",children:"P-"})]}),e.jsx(w,{type:"text",name:"rif",value:t.rif.split("-")[1]||"",onChange:s=>{const o=`${t.rif.split("-")[0]||"J"}-${s.target.value}`;a("rif",o)},className:"mx-2 p-3 border border-gray-300 rounded-l-lg"})]}),e.jsx(j,{name:"rif",component:"div",className:"text-red-500"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Estado:"}),e.jsxs(w,{as:"select",name:"estado",value:t.estado,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"",children:"Seleccione un Estado"}),["Amazonas","Anzoátegui","Apure","Aragua","Barinas","Bolívar","Carabobo","Cojedes","Delta Amacuro","Distrito Capital","Falcón","Guárico","Lara","La Guaira","Mérida","Miranda","Monagas","Nueva Esparta","Portuguesa","Sucre","Táchira","Trujillo","Yaracuy","Zulia"].map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx(j,{name:"estado",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Teléfono:"}),e.jsx(w,{type:"text",name:"phone",placeholder:"Ejem (4142611966)",className:"mt-1 p-3 border border-gray-300 rounded-lg",onKeyDown:s=>{if(s.currentTarget.value===""&&s.key==="0"){s.preventDefault();return}["Backspace","Delete","Tab","Escape","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(s.key)||/[0-9]/.test(s.key)||s.preventDefault()},onChange:s=>{const o=s.target.value.replace(/^0+/,"").replace(/[^0-9]/g,"");a("phone",o)}}),e.jsx(j,{name:"phone",component:"div",className:"text-red-500"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Dirección:"}),e.jsx(w,{type:"text",name:"Direccion",placeholder:"Indique su direccion",className:"mt-1 p-3 border border-gray-300 rounded-lg"}),e.jsx(j,{name:"Direccion",component:"div",className:"text-red-500"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Ubicación:"}),e.jsx("div",{className:"flex items-center mt-1 border border-gray-300 rounded-lg focus-within:ring-2 focus-within:ring-blue-500",children:e.jsx(Et,{data:S,save:b})}),e.jsx(j,{name:"ubicacion",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Contraseña:"}),e.jsx(w,{type:"password",name:"password",className:"mt-1 p-3 border border-gray-300 rounded-lg"}),e.jsx(j,{name:"password",component:"div",className:"text-red-500"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Confirmar Contraseña:"}),e.jsx(w,{type:"password",name:"confirmPassword",className:"mt-1 p-3 border border-gray-300 rounded-lg"}),e.jsx(j,{name:"confirmPassword",component:"div",className:"text-red-500"})]}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(N,{variant:"default",onClick:()=>{$(!1)},className:"mr-2",children:"Cancelar"}),e.jsx(N,{type:"submit",style:{backgroundColor:"#000B7E"},className:"text-white hover:opacity-80",children:"Crear Taller"})]})]})})})]})]})},Wa=St;export{Wa as default};
