import{a0 as y,a1 as k,b3 as D,a2 as R,a3 as F,a as f,r as A,j as e,T as w,at as K,c as O,a5 as G}from"./index-3IkpMvhw.js";import{A as B}from"./AdaptableCard-LoSVFvKm.js";import{i as U,C as $}from"./Views-vkZwXWEA.js";import{T as p}from"./index-wDRv1xTY.js";import{B as P}from"./Button-uUgD1Isd.js";import{U as h,C as j,a as T,A as L,b,c as C,d as N,T as q,E as z}from"./TimeLineAvatar-5Q3CN7UT.js";import{c as I}from"./AccountServices-7HDudwM1.js";import{C as u}from"./index-t5PbaEUQ.js";import{A as H}from"./Affix-gjUM4zB5.js";import{u as J}from"./useResponsive-7r5HVIPL.js";import"./Card-Kmp1JZ8K.js";import"./mapCloneElement-TTI7QTlq.js";import"./context-_KlN2uti.js";import"./Badge-88FMKBtr.js";import"./Tag-xRf-XLrg.js";import"./index-LzwFMNRR.js";import"./isLastChild-6BXlVJ47.js";import"./index-kB4fHrIa.js";import"./useMergeRef-Rt_Crb27.js";import"./Tooltip-pBZGkNEN.js";import"./index.esm-HcdvCICo.js";import"./floating-ui.react-rtxm9hsq.js";import"./floating-ui.dom-0rLBacrf.js";import"./index-Qx-8tb_L.js";import"./motion-Ho6XhLxy.js";import"./useTwColorByName-7sir4W8Q.js";import"./index.esm-O3ADo3W0.js";import"./ApiService-z6XMLM9W.js";import"./cloneDeep-gm6DibYx.js";import"./_getAllKeys-Cnt443vc.js";import"./_MapCache-RhVunJGq.js";import"./_baseIsEqual-M_WZFUnO.js";import"./get-tRPTyVf-.js";import"./toString-gUk4XmGV.js";const x="accountActivityLog",g=y(x+"/getLogs",async t=>(await I(t)).data),d=y(x+"/filterLogs",async t=>(await I(t)).data),Q={loading:!1,loadMoreLoading:!1,loadable:!1,activityIndex:1,logs:[],selectedType:[h,j,T,L,b,C,N]},E=k({name:`${x}/state`,initialState:Q,reducers:{setActivityIndex:(t,a)=>{t.activityIndex=a.payload},setSelected:(t,a)=>{t.selectedType=a.payload}},extraReducers:t=>{t.addCase(g.fulfilled,(a,i)=>{const l=D(a);a.logs=[...l.logs,...i.payload.data],a.loadMoreLoading=!1,a.loadable=i.payload.loadable}).addCase(g.pending,a=>{a.loadMoreLoading=!0}).addCase(d.fulfilled,(a,i)=>{a.logs=i.payload.data,a.loading=!1,a.loadable=i.payload.loadable}).addCase(d.pending,a=>{a.loading=!0})}}),{setActivityIndex:M,setSelected:V}=E.actions,W=E.reducer,X=R({data:W}),c=F,Y=()=>{const t=f(),a=c(o=>o.accountActivityLog.data.logs),i=c(o=>o.accountActivityLog.data.loading),l=c(o=>o.accountActivityLog.data.loadMoreLoading),n=c(o=>o.accountActivityLog.data.loadable),r=c(o=>o.accountActivityLog.data.selectedType),s=c(o=>o.accountActivityLog.data.activityIndex);A.useEffect(()=>{t(d({filter:r,activityIndex:s}))},[]);const S=()=>{const o=s+1;t(M(o)),t(g({filter:r,activityIndex:o}))};return e.jsx(w,{loading:i,children:e.jsxs("div",{className:"max-w-[900px]",children:[a.map(o=>e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-4 font-semibold uppercase",children:K.unix(o.date).format("dddd, DD MMMM")}),e.jsx(p,{children:U(o.events)?e.jsx(p.Item,{children:"No Activities"}):o.events.map((m,_)=>e.jsx(p.Item,{media:e.jsx(q,{data:m}),children:e.jsx("div",{className:"mt-1",children:e.jsx(z,{data:m})})},m.type+_))})]},o.id)),e.jsx("div",{className:"text-center",children:n?e.jsx(P,{loading:l,onClick:S,children:"Load More"}):"No more activity to load"})]})})},Z=[{label:"Comment on post",value:j},{label:"Mentioned you",value:T}],ee=[{label:"Ticket status",value:h},{label:"Assign ticket",value:L},{label:"New ticket",value:N},{label:"Add tags",value:b},{label:"Add files",value:C}],v=({children:t,className:a})=>e.jsx("h6",{className:O("text-gray-900 uppercase tracking-wide font-semibold text-sm lg:text-xs",a),children:t}),ae=()=>{const t=f(),a=c(s=>s.accountActivityLog.data.selectedType),i=c(s=>s.accountActivityLog.data.activityIndex),l=A.useCallback(s=>{t(d({filter:s,activityIndex:1})),i!==1&&t(M(1)),t(V(s))},[t,i]),{larger:n}=J(),r=()=>e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"mb-4",children:"Filter Activity"}),e.jsxs(u.Group,{vertical:!0,value:a,onChange:s=>{l(s)},children:[e.jsx(v,{className:"mb-3",children:"Ticket"}),ee.map(s=>e.jsx(u,{className:"mb-4",value:s.value,children:s.label},s.value)),e.jsx(v,{className:"mt-4 mb-3",children:"Comment"}),Z.map(s=>e.jsx(u,{className:"mb-4",value:s.value,children:s.label},s.value))]})]});return e.jsx("div",{children:n.md?e.jsx(H,{className:"hidden lg:block",offset:80,children:r()}):r()})};G("accountActivityLog",X);const te=()=>e.jsx($,{children:e.jsx(B,{children:e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8 ",children:[e.jsxs("div",{className:"col-span-4 order-last md:order-first",children:[e.jsx("h3",{className:"mb-6",children:"Activity Log"}),e.jsx(Y,{})]}),e.jsx(ae,{})]})})}),Ke=te;export{Ke as default};
