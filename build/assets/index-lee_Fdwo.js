import{a0 as b,a1 as B,a2 as q,a3 as H,a as j,r as u,j as r,c as k,at as U,a4 as V,a5 as Q}from"./index-MXeuXt6D.js";import{T as K}from"./index-_XG3ckIa.js";import{A as G}from"./AdaptableCard-pBoZ8GaV.js";import{c as Y}from"./CryptoService-fngKZ7hp.js";import{c as h}from"./cloneDeep-1B8iZWEq.js";import{A as _}from"./index-gcSXoXqt.js";import{D as M}from"./DataTable-RshAR278.js";import{B as D}from"./Button-vr5nYjWh.js";import{g as N}from"./GrowShrinkTag-wHBmr0UW.js";import{N as x}from"./react-number-format.es-CDZmgxco.js";import{D as J}from"./Dialog-S0YfG3Gb.js";import{T as W,P as X}from"./ProceedTrade-JpHDebVS.js";import{i as T}from"./Views-YIa05gYP.js";import{I as Z}from"./Input-uNTP3iIk.js";import{D as ee}from"./index.esm-QY0V8pz3.js";import{d as oe}from"./debounce-1NsCQ0sA.js";import"./useControllableState-7_HVbbfe.js";import"./Card-K535tOj0.js";import"./ApiService-qiAozUgh.js";import"./_getAllKeys-yH2MZQHD.js";import"./_MapCache-Oklr7ghg.js";import"./useMergeRef-Rt_Crb27.js";import"./Tooltip-tunHCYEK.js";import"./index.esm-tXvc1PCn.js";import"./floating-ui.react-diTN8vIO.js";import"./floating-ui.dom-0rLBacrf.js";import"./index-TkOf27ZX.js";import"./motion-WWGuudfi.js";import"./index-hfXV9fO5.js";import"./index.esm-Nne6VUru.js";import"./index-chQSm2gV.js";import"./Select-s7e6Ru-i.js";import"./toConsumableArray-YYxflNc8.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./setPrototypeOf-ahVgEFUp.js";import"./get-U6lz_elL.js";import"./toString-8HxFeJdf.js";import"./context-CyHO4l0y.js";import"./index-A-vhGk8S.js";import"./_baseIsEqual-x1lYwAPu.js";import"./TableRowSkeleton-h2SVE1pE.js";import"./Skeleton-S87nkzI7.js";import"./index-7diYv2qq.js";import"./Tag-xxTg2NNj.js";import"./index-CUw7Uavs.js";import"./index-hI2o6F97.js";import"./CloseButton-sG-0PXCm.js";import"./index-ZEG6gjIo.js";import"./FormItem-i-Nl3kiy.js";import"./Badge-yQ6udJ_T.js";import"./chart.constant-ADthFB4G.js";import"./chart.config-Xhdm5EGo.js";import"./FormNumericInput-fYJMJm1O.js";import"./react-tooltip.min-g7xMRVcf.js";import"./RichTextEditor-4xvMuPnL.js";import"./SegmentItemOption-YUR8MOfT.js";import"./useThemeClass-YUp6RHW1.js";import"./SvgIcon-uLaza9zE.js";import"./formik.esm-xfkBnxQo.js";import"./index.esm-lfbDiZYH.js";import"./isNil-srQng29e.js";const F="cryptoMarket",C=b(F+"/getMarketData",async t=>(await Y(t)).data),R={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},re={loading:!0,marketData:[],tableData:R,selectedTab:"all",tradeDialogOpen:!1,selectedRow:{}},z=B({name:`${F}/state`,initialState:re,reducers:{setSelectedTab:(t,a)=>{t.selectedTab=a.payload},setTableData:(t,a)=>{t.tableData=a.payload},setMarketData:(t,a)=>{t.marketData=a.payload},toggleTradeDialog:(t,a)=>{t.tradeDialogOpen=a.payload},setSelectedRow:(t,a)=>{t.selectedRow=a.payload}},extraReducers:t=>{t.addCase(C.fulfilled,(a,s)=>{a.loading=!1,a.tableData.total=s.payload.total,a.marketData=s.payload.data}).addCase(C.pending,a=>{a.loading=!0})}}),{setSelectedTab:se,setTableData:d,setMarketData:te,toggleTradeDialog:A,setSelectedRow:P}=z.actions,ae=z.reducer,ne=q({data:ae}),y=H,I=({row:t})=>{const a=j(),s=u.useCallback(()=>{a(A(!0)),a(P(t))},[a,t]);return r.jsx("div",{className:"ltr:text-right rtl:text-left",children:r.jsx(D,{size:"sm",onClick:s,children:"Trade"})})},ce=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{img:e,symbol:l,name:w}=o.row.original;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_,{src:e,size:"sm",className:"!bg-transparent"}),r.jsx("span",{className:"font-bold heading-text",children:l}),r.jsx("span",{children:w})]})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),suffix:" USD",thousandSeparator:!0})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsxs("span",{children:[e,"M"]})}},{header:"Market Cap",accessorKey:"marketCap",cell:o=>{const{marketCap:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28,className:"rounded-md"},loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},ie=({data:t,loading:a,tableData:s})=>{const n=U(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"24h Turnover",accessorKey:"turnOver",cell:o=>{const{turnOver:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},le=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},de=()=>{const t=j(),a=V(),s=y(m=>m.cryptoMarket.data.tradeDialogOpen),n=y(m=>m.cryptoMarket.data.selectedRow),[i,c]=u.useState({}),[g,p]=u.useState(!1),[o,e]=u.useState(""),l=()=>{t(A(!1)),setTimeout(()=>{t(P({})),c({}),p(!1),e("")},500)},w=(m,f,$)=>{f(!0),setTimeout(()=>{c({...m,type:$}),p(!1),e("")},500)},O=()=>{p(!0),setTimeout(()=>{e("SUCCESS")},1e3)},L=m=>{l(),m&&a("/app/crypto/wallets")};return r.jsxs(J,{isOpen:s,closable:!o,width:400,onRequestClose:l,onClose:l,children:[r.jsxs("h5",{className:"mb-4",children:[T(i)&&!o&&`Trade ${n.symbol}`,!T(i)&&!o&&"Order preview"]}),T(i)?r.jsx(W,{amount:n.price,symbol:n.symbol,onBuy:(m,f)=>w(m,f,"BUY"),onSell:(m,f)=>w(m,f,"SELL")}):r.jsx(X,{loading:g,status:o,onConfirm:O,onDone:L,...i})]})},E=u.forwardRef(({onInputChange:t},a)=>{const s=oe(n,500);function n(c){t==null||t(c)}const i=c=>{s(c.target.value)};return r.jsx(Z,{ref:a,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:r.jsx(ee,{className:"text-lg"}),onChange:i})});E.displayName="QueryInput";Q("cryptoMarket",ne);const{TabNav:S,TabList:pe,TabContent:v}=K,me=()=>{const t=j(),a=u.useRef(null),s=y(e=>e.cryptoMarket.data.marketData),n=y(e=>e.cryptoMarket.data.loading),i=y(e=>e.cryptoMarket.data.selectedTab),c=y(e=>e.cryptoMarket.data.tableData);u.useEffect(()=>{g()},[t,i,c]);const g=()=>{t(C({tab:i,...c}))},p=e=>{t(te([])),t(se(e)),t(d(R))},o=e=>{const l=h(c);l.query=e,l.pageIndex=1,typeof e=="string"&&e.length>1&&t(d(l)),typeof e=="string"&&e.length===0&&t(d(l))};return r.jsxs(r.Fragment,{children:[r.jsx(G,{children:r.jsxs(K,{value:i,variant:"pill",onChange:p,children:[r.jsxs("div",{className:"flex lg:items-center justify-between flex-col lg:flex-row gap-4",children:[r.jsxs(pe,{children:[r.jsx(S,{value:"all",children:"All"}),r.jsx(S,{value:"spot",children:"Spot"}),r.jsx(S,{value:"futures",children:"Futures"})]}),r.jsx(E,{ref:a,onInputChange:o})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx(v,{value:"all",children:r.jsx(ce,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"spot",children:r.jsx(ie,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"futures",children:r.jsx(le,{data:s,loading:n,tableData:c})})]})]})}),r.jsx(de,{})]})},To=me;export{To as default};
