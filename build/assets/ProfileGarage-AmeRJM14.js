import{r as i,j as e,a8 as J,a9 as S,aa as se,ag as H,ap as vo,b3 as Rt,ak as _e,al as Ze,am as Ye,an as Y,af as ge,ab as We,a7 as Xe,aj as Oe,a4 as Lt,u as Pt,ai as Ot,ar as Uo,as as Mt}from"./index-JmHojjZF.js";import{C as At,a as $t}from"./Views-B7Axq-_H.js";import{S as Bt}from"./Switcher-aXwB7b3G.js";import{C as Ko}from"./Card-IB018HxE.js";import{A as Go}from"./index-gyD_EmtF.js";import{B as ue}from"./Button-_U4vs34L.js";import{C as zt}from"./ConfirmDialog-nRo1dXBB.js";import{h as Me,e as qt,z as Ut,B as Kt,G as Gt,H as Ht,I as Vt,j as ye,m as Le,i as fo,k as ae,l as ve,J as Zt,K as Yt,L as Wt,M as Xt,N as Jt,O as Qt,P as ea}from"./index.esm-kXaIV95b.js";import{T as oa}from"./Tag-7guEhzm-.js";import{ap as ta,aq as ho,ar as Ho}from"./index.esm-fDGSM_mt.js";import{T as Ge}from"./index-ToqI7_Kp.js";import"./Alert-XfFBGolJ.js";import"./Badge-4YslK5Tt.js";import"./Calendar-AjmOvNZC.js";import{C as aa}from"./index-yy7yCGaM.js";import"./index-RDxpbK8L.js";import{D as Xo}from"./Dialog-S32NdwpZ.js";import{D as Jo}from"./Drawer-dOLq1JJ9.js";import"./index-HKwbmB2N.js";import"./FormItem-a0xEaN2e.js";import{I as Pe}from"./Input-TDXM-rUB.js";import"./index-m2l8kR8b.js";import"./index-DwsShQIu.js";import"./index-yQViOXwT.js";import{N as j,t as N}from"./toast-pCTPkSCg.js";import{P as Vo}from"./index-tjXijgv8.js";import"./Progress-s-s5F-eR.js";import"./index-I9Vjcu_u.js";import"./RangeCalendar-aVTgSQ3V.js";import"./ScrollBar-8qHNPsEY.js";import"./index-agZVQBTM.js";import{d as sa}from"./Select-aGi7L2Tq.js";import"./Skeleton-QxVo074O.js";import"./index-8_HjFMG6.js";import{T as Zo}from"./index-AbpVS6Qw.js";import"./index-FuEtqvtU.js";import"./index-9qyUtui1.js";import"./Tooltip-2fc0Xghq.js";import"./Upload-8XLowihk.js";import{u as bo,f as we,g as jo,a as No,b as yo}from"./index-UimLSdZK.js";import{R as ra}from"./index.esm-wnpKz3x0.js";import{M as na}from"./index.esm-_wS6Sm1T.js";import{S as ia}from"./index.esm-cwCJMsVs.js";import{F as Qo,a as et,b as B,E as q}from"./formik.esm-NjqiVEc-.js";import{c as Ce,g as He,h as Ve,a as $}from"./index.esm-aZbDS2Yl.js";import{G as ot,M as tt}from"./esm-EZO1lzoT.js";import"./useMergeRef-Rt_Crb27.js";import"./context-sAlwGZHP.js";import"./useTimeout-uUg7E-G5.js";import"./CloseButton-yLAyEr0A.js";import"./StatusIcon-bOUcf6mN.js";import"./motion-d-XTyztW.js";import"./useControllableState-15qT7Bgg.js";import"./cloneDeep-jIdQ5-c7.js";import"./_getAllKeys-lVDNYcaE.js";import"./_MapCache-Kdmigdwm.js";import"./_baseIsEqual-hFwuk5VE.js";import"./get-EZNDtH9X.js";import"./toString-7ITrX8kA.js";import"./floating-ui.react-dnDtoXGa.js";import"./floating-ui.dom-0rLBacrf.js";import"./TimeInput-OOgE1w1V.js";import"./useUniqueId-kmRqkwDI.js";import"./useDidUpdate-B848Hshe.js";import"./index-YbBZHtme.js";import"./index-phIxZ0Yy.js";import"./useRootClose-zXXMwXlZ.js";import"./isNil-WyCNFOT5.js";import"./index-BVb65nFb.js";import"./chainedFunction-ltcSYACe.js";import"./toConsumableArray-YYxflNc8.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./setPrototypeOf-ahVgEFUp.js";import"./mapCloneElement-E70g_mWR.js";import"./index.esm-_q6RAcWH.js";import"./index.esm-nUQv70_9.js";const Yo=[{codigo:"0102",nombre:"BANCO DE VENEZUELA"},{codigo:"0156",nombre:"100% BANCO"},{codigo:"0172",nombre:"BANCAMIGA BANCO MICROFINANCIERO C A"},{codigo:"0114",nombre:"BANCARIBE"},{codigo:"0171",nombre:"BANCO ACTIVO"},{codigo:"0166",nombre:"BANCO AGRICOLA DE VENEZUELA"},{codigo:"0175",nombre:"BANCO BICENTENARIO DEL PUEBLO"},{codigo:"0128",nombre:"BANCO CARONI"},{codigo:"0163",nombre:"BANCO DEL TESORO"},{codigo:"0115",nombre:"BANCO EXTERIOR"},{codigo:"0151",nombre:"BANCO FONDO COMUN"},{codigo:"0173",nombre:"BANCO INTERNACIONAL DE DESARROLLO"},{codigo:"0105",nombre:"BANCO MERCANTIL"},{codigo:"0191",nombre:"BANCO NACIONAL DE CREDITO"},{codigo:"0138",nombre:"BANCO PLAZA"},{codigo:"0137",nombre:"BANCO SOFITASA"},{codigo:"0104",nombre:"BANCO VENEZOLANO DE CREDITO"},{codigo:"0168",nombre:"BANCRECER"},{codigo:"0134",nombre:"BANESCO"},{codigo:"0177",nombre:"BANFANB"},{codigo:"0146",nombre:"BANGENTE"},{codigo:"0174",nombre:"BANPLUS"},{codigo:"0108",nombre:"BBVA PROVINCIAL"},{codigo:"0157",nombre:"DELSUR BANCO UNIVERSAL"},{codigo:"0169",nombre:"MI BANCO"},{codigo:"0178",nombre:"N58 BANCO DIGITAL BANCO MICROFINANCIERO S A"}],Wo=({subscriptionId:r,talleruid:_})=>{const[n,L]=i.useState("Efectivo"),[E,V]=i.useState([]),[pe,k]=i.useState(!1),[W,Q]=i.useState(!1),[Se,Z]=i.useState(!1),[P,U]=i.useState(!1);i.useEffect(()=>{(async()=>{const u=J(S,"MetodosPago"),O=(await se(u)).docs.map(v=>v.data());V(O.filter(v=>v.status))})()},[]),i.useEffect(()=>{(async()=>{if(_)try{const u=H(S,"Usuarios",_),p=await vo(u);if(p.exists()){const v=p.data().subscripcion_actual;v&&v.pago_reportado===!0&&Z(!0)}}catch(u){console.error("Error al verificar si ya se reportó el pago:",u)}})()},[_]);const x=c=>{L(c)},re=()=>{Se?U(!0):Q(!0)},ne=Ce().shape({monto:He().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),fechaPago:Ve().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),Ee=Ce().shape({monto:He().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),numReferencia:$().required("El número de referencia es obligatorio"),bancoDestino:$().required("Selecciona un banco de destino"),bancoOrigen:$().required("Selecciona un banco de origen"),fechaPago:Ve().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),l=Ce().shape({monto:He().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),numReferencia:$().required("El número de referencia es obligatorio"),telefono:$().required("El teléfono es obligatorio").matches(/^[1-9]\d*$/,"El teléfono no puede comenzar con 0 y debe contener solo números"),bancoDestino:$().required("Selecciona un banco de destino"),bancoOrigen:$().required("Selecciona un banco de origen"),fechaPago:Ve().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),f=Ce().shape({monto:He().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),correo:$().email("El correo no es válido").required("El correo Zelle es obligatorio"),fechaPago:Ve().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),y=Ce().shape({...n==="Efectivo"&&ne.fields,...n==="Transferencia"&&Ee.fields,...n==="Pago Móvil"&&l.fields,...n==="Zelle"&&f.fields}),w={metodoPago:"",monto:"",numReferencia:"",telefono:"",correo:"",cedula:"",bancoOrigen:"",bancoDestino:"",fechaPago:"",newLogoFile:null},s=async(c,u)=>{try{const p=J(S,"Subscripciones"),O=await se(p),v=new Date(c.fechaPago),K=`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}-${String(v.getDate()).padStart(2,"0")}`;for(const ie of O.docs){const le=ie.data(),M=le.comprobante_pago;if(M&&M.fechaPago){const ce=M.fechaPago.toDate();if(`${ce.getFullYear()}-${String(ce.getMonth()+1).padStart(2,"0")}-${String(ce.getDate()).padStart(2,"0")}`===K&&M.monto===parseFloat(c.monto)&&le.taller_uid===_){if((u==="Pago Móvil"||u==="Transferencia")&&M.numReferencia===c.numReferencia)return{isDuplicate:!0,message:`Ya existe un pago con el número de referencia ${c.numReferencia} en la fecha ${K} para este taller`};if(u==="Zelle"&&M.correo===c.correo)return{isDuplicate:!0,message:`Ya existe un pago con el correo ${c.correo} en la fecha ${K} para este taller`};if(u==="Efectivo")return{isDuplicate:!0,message:`Ya existe un pago en efectivo por el monto $${c.monto} en la fecha ${K} para este taller`}}}}return{isDuplicate:!1,message:""}}catch(p){return console.error("Error al validar duplicidad:",p),{isDuplicate:!1,message:""}}},b=async c=>{if(!r){console.error("Error: subscriptionId no está definido");return}k(!0);try{const u=await s(c,n);if(u.isDuplicate){N.push(e.jsx(j,{title:"Error",type:"danger",children:u.message})),k(!1);return}let p="";if(c.newLogoFile&&n&&_){const ie=Rt(),le=new Date().toISOString(),M=`${n}_${_}_${le}.jpg`,ce=c.newLogoFile,X=_e(ie,`paymentcommitment/${M}`),Je=await Ze(X,ce);p=await Ye(Je.ref)}const O=c.fechaPago?Y.fromDate(new Date(c.fechaPago)):null,v={metodo:n,monto:c.monto,fechaPago:O,comprobante:p};n==="Transferencia"&&(v.numReferencia=c.numReferencia??"",v.cedula=c.cedula??"",v.bancoOrigen=c.bancoOrigen??"",v.bancoDestino=c.bancoDestino??""),n==="Pago Móvil"&&(v.cedula=c.cedula,v.telefono=c.telefono,v.bancoOrigen=c.bancoOrigen,v.bancoDestino=c.bancoDestino),n==="Zelle"&&(v.correo=c.correo??"",v.numReferencia=c.numReferencia),console.log(v);const K=H(S,"Subscripciones",r);if(await ge(K,{comprobante_pago:v}),_){const ie=H(S,"Usuarios",_);await ge(ie,{"subscripcion_actual.pago_reportado":!0}),Z(!0)}console.log("Pago registrado exitosamente"),N.push(e.jsx(j,{title:"Éxito",type:"success",children:"Se ha registrado el pago correctamente."}))}catch(u){console.error("Error al registrar el pago:",u),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un problema al registrar el pago."}))}finally{k(!1),Q(!1)}},m=E.find(c=>c.tipo_pago===n);return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:re,className:"bg-blue-900 rounded-md p-2 text-white hover:bg-blue-700",children:"Reportar Pago"}),e.jsx(Xo,{isOpen:P,onClose:()=>U(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Pago Ya Reportado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Ya se ha reportado un pago para esta suscripción. No se puede reportar otro pago."}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>U(!1),className:"bg-blue-900 rounded-md p-2 text-white hover:bg-blue-700",children:"Entendido"})})]})}),e.jsx(Jo,{isOpen:W,onClose:()=>Q(!1),title:"Registrar Pago",children:e.jsx(Qo,{initialValues:w,onSubmit:b,validationSchema:y,validateOnBlur:!0,validateOnChange:!1,children:({setFieldValue:c,values:u})=>e.jsxs(et,{className:"flex flex-col gap-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Selecciona el Método de Pago"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:E==null?void 0:E.map(p=>e.jsx("button",{type:"button",onClick:()=>x(p.tipo_pago),className:`text-sm py-2 px-4 rounded-md ${n===p.tipo_pago?"bg-[#1d1e56] text-white":"bg-gray-200"}`,children:p.tipo_pago},p.tipo_pago))}),n!=="Efectivo"&&m&&e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-4",children:[e.jsx("h5",{className:"font-semibold text-lg",children:"Detalles de la Empresa"}),m.email&&e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",m.email]}),m.num_ref&&e.jsxs("p",{children:[e.jsx("strong",{children:"Número de Referencia:"})," ",m.num_ref]}),m.banco&&e.jsxs("p",{children:[e.jsx("strong",{children:"Banco:"})," ",m.banco]}),m.cedula_rif&&e.jsxs("p",{children:[e.jsx("strong",{children:"Cédula/RIF:"})," ",m.cedula_rif]}),m.cuenta&&e.jsxs("p",{children:[e.jsx("strong",{children:"Cuenta:"})," ",m.cuenta]}),m.status_pago!==void 0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",m.status_pago?"Activo":"Inactivo"]}),m.tipo_cuenta&&e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",m.tipo_cuenta]}),m.telefono&&e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",m.telefono]}),m.titular&&e.jsxs("p",{children:[e.jsx("strong",{children:"Titular:"})," ",m.titular]})]}),e.jsx(B,{id:"monto",name:"monto",as:Pe,placeholder:"Ingresa el monto en $"}),e.jsx(q,{name:"monto",component:"div",className:"text-red-500"}),e.jsx(B,{id:"fechaPago",name:"fechaPago",as:Pe,type:"date",placeholder:"Fecha de pago"}),e.jsx(q,{name:"fechaPago",component:"div",className:"text-red-500"}),n==="Pago Móvil"&&e.jsxs(e.Fragment,{children:[e.jsx(B,{id:"telefono",name:"telefono",as:Pe,placeholder:"Teléfono",onKeyDown:p=>{p.currentTarget.value===""&&p.key==="0"&&p.preventDefault()},onChange:p=>{const O=p.target.value.replace(/^0+/,"");c("telefono",O)}}),e.jsx(q,{name:"telefono",component:"div",className:"text-red-500"})]}),n==="Zelle"&&e.jsx(B,{id:"correo",name:"correo",as:Pe,placeholder:"Correo Zelle"}),["Transferencia","Pago Móvil"].includes(n)&&e.jsxs(e.Fragment,{children:[e.jsx(B,{id:"numReferencia",name:"numReferencia",as:Pe,placeholder:"Número de referencia"}),e.jsx(q,{name:"numReferencia",component:"div",className:"text-red-500"})]}),["Transferencia","Pago Móvil"].includes(n)&&e.jsxs(e.Fragment,{children:[e.jsxs(B,{id:"bancoDestino",as:"select",name:"bancoDestino",className:"p-2 rounded-md border border-slate-300",children:[e.jsx("option",{value:"",children:"Selecciona Banco de Destino"}),Yo.map(p=>e.jsx("option",{value:p.nombre,children:p.nombre},p.codigo))]}),e.jsx(q,{name:"bancoDestino",component:"div",className:"text-red-500"}),e.jsxs(B,{id:"bancoOrigen",as:"select",name:"bancoOrigen",className:"p-2 rounded-md border border-slate-300",children:[e.jsx("option",{value:"",children:"Selecciona Banco de Origen"}),Yo.map(p=>e.jsx("option",{value:p.nombre,children:p.nombre},p.codigo))]}),e.jsx(q,{name:"bancoOrigen",component:"div",className:"text-red-500"})]}),["Transferencia","Pago Móvil","Zelle"].includes(n)&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 gap-2",children:e.jsxs("div",{className:"text-center",children:[u.newLogoFile?e.jsx("img",{src:URL.createObjectURL(u.newLogoFile),alt:"Logo",className:"w-32 h-32 object-cover rounded-md"}):e.jsx(Me,{className:"text-gray-500 text-center text-3xl"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"fileInput",className:"text-sm font-medium text-blue-600 cursor-pointer",children:"Subir Comprobante de Pago"}),e.jsx("input",{id:"fileInput",name:"newLogoFile",type:"file",className:"hidden",accept:"image/*",onChange:p=>{p.target.files&&p.target.files[0]&&c("newLogoFile",p.target.files[0])}})]})]})})}),e.jsx("button",{type:"submit",className:"w-full py-2 mt-4 bg-blue-900 rounded-md hover:bg-blue-700 text-white",children:"Registrar Pago"})]})})})]})},la=({markers:r,center:_})=>{const[n,L]=i.useState([]);return i.useEffect(()=>{L(r)},[r]),e.jsx("div",{style:{height:"50%",width:"100%"},children:e.jsx(ot,{center:_,zoom:10,mapContainerStyle:{height:"400px",width:"100%",marginTop:"10px"},children:n.map((E,V)=>e.jsx(tt,{position:{lat:E.lat,lng:E.lng}},V))})})},ca=({initialLocation:r,onLocationChange:_})=>{const[n,L]=i.useState(null),[E]=i.useState(17);i.useEffect(()=>{r&&r.lat&&r.lng&&L(r)},[r]);const V=k=>{if(!k.latLng)return;const W={lat:k.latLng.lat(),lng:k.latLng.lng()};L(W),_(W)},pe=k=>{if(k.latLng){const W={lat:k.latLng.lat(),lng:k.latLng.lng()};L(W),_(W)}};return e.jsx("div",{style:{height:"450px",width:"100%"},children:e.jsx(ot,{center:n||{lat:0,lng:0},zoom:E,mapContainerStyle:{height:"400px",width:"100%",marginTop:"10px"},onClick:V,children:n&&e.jsx(tt,{position:n,draggable:!0,onDragEnd:pe})})})},da=Ce().shape({nombre_servicio:$().required("El nombre del servicio es requerido"),descripcion:$().required("La descripción es requerida"),uid_categoria:$().required("La categoría es requerida"),precio:$().required("El precio es requerido"),garantia:$().required("La garantía es requerida"),typeService:$().required("El tipo de servicio es requerido")}),ma=({isOpen:r,onClose:_,service:n,onServiceUpdated:L})=>{const[E,V]=i.useState([]),[pe,k]=i.useState([]),[W,Q]=i.useState([]),[Se,Z]=i.useState(!1),[P,U]=i.useState(null),[x,re]=i.useState(!1);i.useEffect(()=>{(async()=>{var y;if(!(!r||!n)){Z(!0);try{const w=Xe(J(S,"Categorias"),We("estatus","==",!0)),b=(await se(w)).docs.map(u=>({id:u.id,...u.data()}));V(b);const m=await vo(H(S,"talleres","talleres"));m.exists()&&Q(m.data().talleres||[]);const c={nombre_servicio:(n==null?void 0:n.nombre_servicio)||"",descripcion:(n==null?void 0:n.descripcion)||"",uid_categoria:(n==null?void 0:n.uid_categoria)||"",nombre_categoria:(n==null?void 0:n.nombre_categoria)||"",service_image:(n==null?void 0:n.service_image)||(n==null?void 0:n.imagenes)||[],service_image_files:[],uid_taller:(n==null?void 0:n.uid_taller)||"",taller:(n==null?void 0:n.taller)||"",precio:((y=n==null?void 0:n.precio)==null?void 0:y.toString())||"",garantia:(n==null?void 0:n.garantia)||"",typeService:(n==null?void 0:n.typeService)||"local",subcategoria:(n==null?void 0:n.subcategoria)||[]};U(c),n!=null&&n.uid_categoria&&await ne(n.uid_categoria)}catch(w){console.error("Error loading data:",w),N.push(e.jsx(j,{title:"Error",children:"Error al cargar los datos"}))}finally{Z(!1)}}})()},[r,n]),i.useEffect(()=>{P!=null&&P.uid_categoria&&E.length>0&&ne(P.uid_categoria)},[P==null?void 0:P.uid_categoria,E.length]);const ne=async f=>{if(!f){k([]);return}try{const y=Xe(J(S,"Categorias",f,"Subcategorias"),We("estatus","==",!0)),s=(await se(y)).docs.map(b=>({id:b.id,...b.data()}));k(s)}catch(y){console.error("Error loading subcategories:",y),k([])}},Ee=async(f,y)=>{const w=[];for(let s=0;s<f.length;s++){const b=f[s],m=Date.now(),c=`${y}_${m}_${s}.jpg`,u=_e(Oe,`service_images/${c}`);try{await Ze(u,b);const p=await Ye(u);w.push(p)}catch(p){throw console.error("Error uploading image:",p),new Error(`Error al subir la imagen ${s+1}`)}}return w},l=async f=>{try{if(!(n!=null&&n.uid_servicio)){N.push(e.jsx(j,{title:"Error",children:"No se pudo identificar el servicio a editar"}));return}re(!0);let y=[...f.service_image||[]];if(f.service_image_files&&f.service_image_files.length>0)try{const s=await Ee(f.service_image_files,n.uid_servicio);y=[...y.filter(m=>!m.startsWith("blob:")),...s]}catch(s){console.error("Error uploading images:",s),N.push(e.jsx(j,{title:"Error",children:"Error al subir las imágenes"})),re(!1);return}else y=y.filter(s=>!s.startsWith("blob:"));const w=H(S,"Servicios",n.uid_servicio);await ge(w,{nombre_servicio:f.nombre_servicio,descripcion:f.descripcion,uid_categoria:f.uid_categoria,nombre_categoria:f.nombre_categoria,precio:f.precio,garantia:f.garantia,typeService:f.typeService,subcategoria:f.subcategoria,service_image:y,uid_taller:n.uid_taller,taller:n.taller,updatedAt:new Date}),N.push(e.jsx(j,{title:"Éxito",children:"Servicio actualizado correctamente"})),L==null||L(),_()}catch(y){console.error("Error updating service:",y),N.push(e.jsx(j,{title:"Error",children:"No se pudo actualizar el servicio"}))}finally{re(!1)}};return!n||!P?null:e.jsxs(Jo,{isOpen:r,onClose:_,className:"rounded-md shadow w-full max-w-2xl",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Editar Servicio"}),Se&&e.jsx("div",{className:"flex justify-center items-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),e.jsx(Qo,{initialValues:P,validationSchema:da,onSubmit:l,enableReinitialize:!0,children:({values:f,handleChange:y,setFieldValue:w,errors:s,touched:b})=>e.jsxs(et,{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"mt-2 flex flex-col items-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10",children:e.jsxs("div",{className:"text-center",children:[Array.isArray(f.service_image)&&f.service_image.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:f.service_image.map((m,c)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:`Imagen del servicio ${c+1}`,className:"h-32 w-full object-cover rounded-md"}),e.jsx("button",{type:"button",onClick:()=>{const u=f.service_image.filter((p,O)=>O!==c);w("service_image",u)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},c))}):e.jsx(Me,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),e.jsx("div",{className:"mt-4 flex flex-col text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"images-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:"Agregar otra imagen"}),e.jsx("input",{id:"images-upload",name:"images-upload",type:"file",accept:"image/*",multiple:!0,className:"sr-only",onChange:m=>{const c=Array.from(m.target.files||[]),u=c.map(p=>URL.createObjectURL(p));w("service_image",[...f.service_image||[],...u]),w("service_image_files",[...f.service_image_files||[],...c])}})]})})]})}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Nombre Servicio:"}),e.jsx(B,{type:"text",name:"nombre_servicio",value:f.nombre_servicio,onChange:y,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"}),e.jsx(q,{name:"nombre_servicio",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Tipo de Servicio:"}),e.jsxs("div",{className:"flex items-center space-x-10",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(B,{type:"radio",name:"typeService",value:"local",className:"form-radio"}),e.jsx("span",{children:"En el Local"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(B,{type:"radio",name:"typeService",value:"domicilio",className:"form-radio"}),e.jsx("span",{children:"A Domicilio"})]})]}),e.jsx(q,{name:"typeService",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Categoría:"}),e.jsxs(B,{as:"select",name:"uid_categoria",value:f.uid_categoria,onChange:m=>{const c=m.target.value,u=E.find(p=>p.id===c);w("uid_categoria",c),w("nombre_categoria",(u==null?void 0:u.nombre)||""),w("subcategoria",[]),ne(c)},className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"",children:"Seleccione una categoría"}),E.map(m=>e.jsx("option",{value:m.id,children:m.nombre},m.id))]}),e.jsx(q,{name:"uid_categoria",component:"div",className:"text-red-600 text-sm"})]}),e.jsx("label",{className:"font-semibold text-gray-700",children:"Subcategorías:"}),e.jsx(sa,{isMulti:!0,placeholder:"Selecciona subcategorías",noOptionsMessage:()=>"No hay Subcategorías disponibles",options:f.uid_categoria?pe.map(m=>({value:m.id,label:m.nombre})):[],value:Array.isArray(f.subcategoria)?f.subcategoria.map(m=>({value:m.uid_subcategoria||m.id,label:m.nombre_subcategoria||m.nombre})):[],onChange:m=>w("subcategoria",m.map(c=>({uid_subcategoria:c.value,nombre_subcategoria:c.label}))),className:"mt-1"}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(B,{as:"textarea",name:"descripcion",value:f.descripcion,onChange:y,rows:1,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 resize-none overflow-hidden",style:{maxHeight:"150px",overflowY:"auto"},onInput:m=>{m.target.style.height="auto",m.target.style.height=`${m.target.scrollHeight}px`}}),e.jsx(q,{name:"descripcion",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Precio:"}),e.jsx(B,{type:"text",name:"precio",value:f.precio,onChange:y,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"}),e.jsx(q,{name:"precio",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Garantía:"}),e.jsx(B,{type:"text",name:"garantia",value:f.garantia,onChange:y,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"}),e.jsx(q,{name:"garantia",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(ue,{variant:"default",onClick:_,className:"mr-2",disabled:x,children:"Cancelar"}),e.jsx(ue,{type:"submit",style:{backgroundColor:"#000B7E"},className:"text-white hover:opacity-80",disabled:x,children:x?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):"Guardar"})]})]})})]})},Ms=()=>{var Oo,Mo,Ao,$o;const[r,_]=i.useState(null),[n,L]=i.useState(!1);i.useState(null);const[E,V]=i.useState([]),[pe,k]=i.useState([]),[W,Q]=i.useState(!0);i.useState(!1);const[Se,Z]=i.useState(!1),[P,U]=i.useState(!1),[x,re]=i.useState(null),[ne,Ee]=i.useState(null),[l,f]=i.useState({fecha_fin:Y,fecha_inicio:Y,nombre:"",cantidad_servicios:0,monto:0,status:"",vigencia:"",uid:"",fechaCreacion:Y.fromDate(new Date)}),[y,w]=i.useState([]),[s,b]=i.useState({image_perfil:"",nombre:"",email:"",phone:"",rif:"",status:"",Direccion:"",ubicacion:{lat:0,lng:0},LinkFacebook:"",LinkTiktok:"",LinkInstagram:"",estado:"",whatsapp:"",newLogoFile:null,rifIdFiscal:"",permisoOperacion:"",logotipoNegocio:"",fotoFrenteTaller:"",fotoInternaTaller:"",rifIdFiscal_file:null,permisoOperacion_file:null,logotipoNegocio_file:null,fotoFrenteTaller_file:null,fotoInternaTaller_file:null});i.useState(null);const[m,c]=i.useState({pagoMovil:!1,transferencia:!1,puntoVenta:!1,zinli:!1,efectivo:!1,zelle:!1,tarjetaCreditoN:!1,tarjetaCreditoI:!1}),u=location.pathname.substring(location.pathname.lastIndexOf("/")+1),p=Lt(),O=Pt(o=>o.auth.user.authority),v=O==null?void 0:O.includes("Admin"),K=async()=>{Q(!0);try{const o=H(S,"Usuarios",u),t=(await vo(o)).data()||null;re(t);const g=(t==null?void 0:t.metodos_pago)||{};c(C=>({...C,...g}));const h=(t==null?void 0:t.subscripcion_actual)||null;L(!!h);const I=Xe(J(S,"Subscripciones"),We("taller_uid","==",u)),G=(await se(I)).docs.map(C=>{const d=C.data();return{uid:C.id,nombre:d.nombre||"",monto:d.monto||"0",vigencia:d.vigencia||"",status:d.status||"",cantidad_servicios:d.cantidad_servicios||0,fecha_fin:d.fecha_fin||"no hay fecha",fecha_inicio:d.fecha_inicio||"no hay fecha",taller_uid:d.taller_uid||"",fechaCreacion:Y.fromDate(new Date)}}),Te=Xe(J(S,"Servicios"),We("uid_taller","==",u)),go=(await se(Te)).docs.map(C=>{const d=C.data();return{uid_servicio:C.id,nombre_servicio:(d==null?void 0:d.nombre_servicio)||"",descripcion:(d==null?void 0:d.descripcion)||"",precio:(d==null?void 0:d.precio)||"0",estatus:d==null?void 0:d.estatus,taller:(d==null?void 0:d.taller)||"",puntuacion:(d==null?void 0:d.puntuacion)||"0",uid_taller:(d==null?void 0:d.uid_taller)||"",uid_categoria:(d==null?void 0:d.uid_categoria)||"",nombre_categoria:(d==null?void 0:d.nombre_categoria)||"",subcategoria:(d==null?void 0:d.subcategoria)||[],garantia:(d==null?void 0:d.garantia)||"",typeService:(d==null?void 0:d.typeService)||"local",service_image:(d==null?void 0:d.service_image)||(d==null?void 0:d.imagenes)||[]}}),po=(await se(J(S,"Planes"))).docs.map(C=>({uid:C.id,nombre:C.data().nombre||"",descripcion:C.data().descripcion||"",monto:C.data().monto||0,status:C.data().status||"",vigencia:C.data().vigencia||"",cantidad_servicios:C.data().cantidad_servicios||0}));_(t),V(go),k(po),f(h),w(G);const Ke=h==null?void 0:h.fecha_fin;if(Ke){const C=ie(Ke);console.log("aqui la vigencia w",C),Ee(C)}b({nombre:(t==null?void 0:t.nombre)??"",image_perfil:(t==null?void 0:t.image_perfil)??"",email:(t==null?void 0:t.email)??"",phone:(t==null?void 0:t.phone)??"",rif:(t==null?void 0:t.rif)??"",status:(t==null?void 0:t.status)??"",Direccion:(t==null?void 0:t.Direccion)??"",LinkFacebook:(t==null?void 0:t.LinkFacebook)??"",LinkInstagram:(t==null?void 0:t.LinkInstagram)??"",LinkTiktok:(t==null?void 0:t.LinkTiktok)??"",whatsapp:(t==null?void 0:t.whatsapp)??"",estado:(t==null?void 0:t.estado)??"",ubicacion:t!=null&&t.ubicacion?{lat:t.ubicacion.lat,lng:t.ubicacion.lng}:{lat:0,lng:0},newLogoFile:(t==null?void 0:t.newLogoFile)??null,rifIdFiscal:(t==null?void 0:t.rifIdFiscal)??"",permisoOperacion:(t==null?void 0:t.permisoOperacion)??"",logotipoNegocio:(t==null?void 0:t.logotipoNegocio)??"",fotoFrenteTaller:(t==null?void 0:t.fotoFrenteTaller)??"",fotoInternaTaller:(t==null?void 0:t.fotoInternaTaller)??"",rifIdFiscal_file:null,permisoOperacion_file:null,logotipoNegocio_file:null,fotoFrenteTaller_file:null,fotoInternaTaller_file:null})}catch(o){console.error("Error al obtener los datos del cliente:",o),N.push(e.jsx(j,{title:"Error",children:"Ocurrio un error al cargar los datos del cliente."}))}finally{Q(!1)}};i.useEffect(()=>{K()},[]);const ie=o=>{const a=Math.floor(Date.now()/1e3),g=o.seconds-a;return Math.ceil(g/(60*60*24))},le=o=>{const a=new Date(o.seconds*1e3),t=String(a.getDate()).padStart(2,"0"),g=String(a.getMonth()+1).padStart(2,"0"),h=a.getFullYear();return`${t}/${g}/${h}`},M=o=>{if(!o)return"Documento existente";try{const a=decodeURIComponent(o),t=a.match(/\/documents\/[^\/]+\/([^?]+)/)||a.match(/documents%2F[^%]+%2F([^?%]+)/);if(t&&t[1]){const T=t[1];if(T.includes("."))return T}const g=a.split("/"),I=g[g.length-1].split("?")[0];return I&&I.includes(".")?I:"Documento existente"}catch(a){return console.error("Error extrayendo nombre del archivo:",a),"Documento existente"}},ce=async o=>{try{const a=H(S,"Usuarios",u),t=H(J(S,"Subscripciones")),g=o.monto===0||o.monto<.01&&o.monto>-.01,h=g?"Aprobado":"Por Aprobar",I=new Date,T=parseInt(o.vigencia,10)||30,G=new Date(I);G.setDate(I.getDate()+T);const Te={uid:t.id,nombre:o.nombre,monto:o.monto,vigencia:o.vigencia,cantidad_servicios:o.cantidad_servicios,status:h,taller_uid:u,fechaCreacion:Y.fromDate(new Date),...g&&{fecha_inicio:Y.fromDate(I),fecha_fin:Y.fromDate(G)}};await Ot(t,Te),await ge(a,{subscripcion_actual:{uid:t.id,nombre:o.nombre,monto:o.monto,vigencia:o.vigencia,cantidad_servicios:o.cantidad_servicios,status:h,fecha_inicio:Y.fromDate(I),fecha_fin:Y.fromDate(G)}}),L(!0),await K(),wo(),console.log("Subscripción actualizada y guardada en Subscripciones."),N.push(e.jsx(j,{title:"Éxito",type:"success",children:g?"Se ha subscrito correctamente al plan gratuito. Tu plan está activo.":"Se ha subscrito correctamente a este plan. Espera la aprobación del pago."}))}catch(a){console.error("Error al guardar la subscripción:",a),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un error al subscribirse a este plan. Inténtalo nuevamente."}))}},X=({title:o,value:a})=>e.jsxs("div",{children:[e.jsx("span",{children:o}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:a})]}),Je=(o,a)=>{$e(t=>{const g=t.filter(h=>h.id!==o);return a!==""&&g.push({id:o,value:a}),g})},de=o=>{const{name:a,value:t}=o.target;b(g=>({...g,[a]:t}))},[xe,at]=i.useState({facebook:"",instagram:"",tiktok:"",whatsapp:""}),st=(o,a)=>({facebook:/^(https?:\/\/)?(www\.)?facebook\.com\/.+$/,instagram:/^(https?:\/\/)?(www\.)?instagram\.com\/.+$/,tiktok:/^(https?:\/\/)?(www\.)?tiktok\.com\/.+$/})[a].test(o)?"":`La URL ingresada no es válida para ${a}.`,Qe=(o,a)=>{const{value:t}=o.target;b(h=>({...h,[`Link${a.charAt(0).toUpperCase()+a.slice(1)}`]:t}));const g=st(t,a);at(h=>({...h,[a]:g}))},rt=async()=>{var o;if(!s.nombre||s.nombre.trim()===""){N.push(e.jsx(j,{title:"Error",children:"El nombre no puede estar vacío."}));return}if(!s.phone||!/^[1-9]\d*$/.test(s.phone)){N.push(e.jsx(j,{title:"Error",children:"El teléfono debe contener solo números y no puede comenzar con 0."}));return}if(s.whatsapp&&!/^[1-9]\d*$/.test(s.whatsapp)){N.push(e.jsx(j,{title:"Error",children:"El WhatsApp debe contener solo números y no puede comenzar con 0."}));return}if(!s.rif||!/^[JVEGCP]-\d+$/.test(s.rif)){N.push(e.jsx(j,{title:"Error",children:"El RIF debe estar en un formato válido (Ejemplo: J-12345678)."}));return}if(!s.Direccion||s.Direccion.trim()===""){N.push(e.jsx(j,{title:"Error",children:"La Direccion no puede estar vacía."}));return}if(!s.status){N.push(e.jsx(j,{title:"Error",children:"Debes seleccionar un estatus."}));return}if(!s.estado){N.push(e.jsx(j,{title:"Error",children:"Debes seleccionar un estado."}));return}if(!s.rifIdFiscal_file&&!s.rifIdFiscal){N.push(e.jsx(j,{title:"Error",children:"El RIF ID Fiscal es obligatorio. Debes subir un archivo o mantener el existente."}));return}if(!s.fotoFrenteTaller_file&&!s.fotoFrenteTaller){N.push(e.jsx(j,{title:"Error",children:"La foto del frente del taller es obligatoria. Debes subir un archivo o mantener el existente."}));return}if(!s.fotoInternaTaller_file&&!s.fotoInternaTaller){N.push(e.jsx(j,{title:"Error",children:"La foto interna del taller es obligatoria. Debes subir un archivo o mantener el existente."}));return}try{const a=J(S,"Usuarios"),t=await se(a);if(t.docs.some(D=>D.data().rif===s.rif&&D.id!==u)){N.push(e.jsx(j,{title:"Error",children:"El RIF ya está registrado. Por favor, verifica e intenta con otro."}));return}if(t.docs.some(D=>D.data().phone===s.phone&&D.id!==u)){N.push(e.jsx(j,{title:"Error",children:"El teléfono ya está registrado. Por favor, verifica e intenta con otro."}));return}let I=s.image_perfil;if(s.newLogoFile){const R=(o=decodeURIComponent(s.image_perfil).split("/").pop())==null?void 0:o.split("?")[0],A=`${u}_`,De=R==null?void 0:R.match(/_(\d+)\.jpg$/),Ne=De?parseInt(De[1],10):0,te=`${A}${Ne+1}.jpg`,xo=_e(Oe,`profileImages/${R}`);try{await Uo(xo)}catch(qo){console.error("Error al eliminar la imagen anterior:",qo)}const Re=_e(Oe,`profileImages/${te}`);await Ze(Re,s.newLogoFile),I=await Ye(Re)}const T=async(D,R)=>{try{const A=D.split("/"),Ne=A[A.length-1].split("?")[0],te=_e(Oe,`documents/${u}/${Ne}`);await Uo(te),console.log(`Documento ${R} eliminado del storage`)}catch(A){console.error(`Error eliminando documento ${R} del storage:`,A)}},G=async(D,R,A,De=!1)=>{var Ne;if(De&&A)return await T(A,R),null;if(!D)return A||null;try{A&&await T(A,R);const te=(Ne=D.name.split(".").pop())==null?void 0:Ne.toLowerCase();if(!te)return console.warn(`No se pudo obtener la extensión del archivo: ${R}`),A||null;const xo=`${R}.${te}`,Re=_e(Oe,`documents/${u}/${xo}`);return await Ze(Re,D),await Ye(Re)}catch(te){return console.error(`Error subiendo ${R}:`,te),A||null}},Te=!s.rifIdFiscal_file&&!s.rifIdFiscal&&!!(x!=null&&x.rifIdFiscal),Bo=!s.permisoOperacion_file&&!s.permisoOperacion&&!!(x!=null&&x.permisoOperacion),go=!s.logotipoNegocio_file&&!s.logotipoNegocio&&!!(x!=null&&x.logotipoNegocio),zo=!s.fotoFrenteTaller_file&&!s.fotoFrenteTaller&&!!(x!=null&&x.fotoFrenteTaller),po=!s.fotoInternaTaller_file&&!s.fotoInternaTaller&&!!(x!=null&&x.fotoInternaTaller),Ke=[G(s.rifIdFiscal_file||null,"rifIdFiscal",s.rifIdFiscal||(x==null?void 0:x.rifIdFiscal)||void 0,Te),G(s.permisoOperacion_file||null,"permisoOperacion",s.permisoOperacion||(x==null?void 0:x.permisoOperacion)||void 0,Bo),G(s.logotipoNegocio_file||null,"logotipoNegocio",s.logotipoNegocio||(x==null?void 0:x.logotipoNegocio)||void 0,go),G(s.fotoFrenteTaller_file||null,"fotoFrenteTaller",s.fotoFrenteTaller||(x==null?void 0:x.fotoFrenteTaller)||void 0,zo),G(s.fotoInternaTaller_file||null,"fotoInternaTaller",s.fotoInternaTaller||(x==null?void 0:x.fotoInternaTaller)||void 0,po)],C=await Promise.all(Ke),d={};["rifIdFiscal","permisoOperacion","logotipoNegocio","fotoFrenteTaller","fotoInternaTaller"].forEach((D,R)=>{C[R]!==void 0&&(d[D]=C[R])});const Dt=H(S,"Usuarios",u),me={...s,image_perfil:I,...d};if(delete me.newLogoFile,delete me.rifIdFiscal_file,delete me.permisoOperacion_file,delete me.logotipoNegocio_file,delete me.fotoFrenteTaller_file,delete me.fotoInternaTaller_file,await ge(Dt,me),_({...s,image_perfil:I}),U(!1),K(),console.log("Datos actualizados correctamente",s),console.log("Datos originales",x),(s==null?void 0:s.status)!==(x==null?void 0:x.status)){console.log("Cambio de estado kelfsklflksflks");try{await Mt.post("https://apisolvers.solversapp.com/api/usuarios/sendNotification",{token:x==null?void 0:x.token,title:"Cambio de estatus",body:"Hola, su usuario ha cambiado de estado "+(s==null?void 0:s.status)+". Cierre sesión y vuelva a ingresar por favor.",secretCode:"Cambio de estado"})}catch(D){console.error("Error al enviar notificación:",D)}}N.push(e.jsx(j,{title:"Éxito",type:"success",children:"Datos de Usuario actualizados correctamente."}))}catch(a){console.error("Error al actualizar los datos:",a),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un error al actualizar los datos del usuario. Inténtalo nuevamente."}))}},nt=async()=>{try{const o=H(S,"Usuarios",u);await ge(o,{metodos_pago:m}),N.push(e.jsx(j,{title:"Éxito",type:"success",children:"Métodos de pago actualizados correctamente."}))}catch(o){console.error("Error al guardar los métodos de pago:",o),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un error al actualizar los métodos de pago. Inténtalo nuevamente."}))}},it=[{name:"Pago móvil",icon:e.jsx(na,{}),dbKey:"pagoMovil"},{name:"Transferencias bancarias",icon:e.jsx(ra,{}),dbKey:"transferencia"},{name:"Punto de venta",icon:e.jsx(ho,{}),dbKey:"puntoVenta"},{name:"Zinli",icon:e.jsx(Ho,{}),dbKey:"zinli"},{name:"Efectivo",icon:e.jsx(Ho,{}),dbKey:"efectivo"},{name:"Zelle",icon:e.jsx(ia,{}),dbKey:"zelle"},{name:"Tarjetas de crédito nacional",icon:e.jsx(ho,{}),dbKey:"tarjetaCreditoN"},{name:"Tarjetas de crédito internacional",icon:e.jsx(ho,{}),dbKey:"tarjetaCreditoI"}],wo=()=>Z(!1),lt=()=>U(!0),[Ae,$e]=i.useState([]),[eo,oo]=i.useState([]),{TabNav:to,TabList:ct,TabContent:ao}=Zo,Co=o=>{Io(o),Fo(!0)},dt=i.useMemo(()=>[{header:"Nombre del Servicio",accessorKey:"nombre_servicio"},{header:"Precio",accessorKey:"precio",cell:({row:o})=>`$${parseFloat(o.original.precio).toFixed(2)}`},{header:"Estatus",accessorKey:"estatus",cell:({row:o})=>{const[a,t]=i.useState(o.original.estatus??!1),g=async h=>{if(h===!0&&(l==null?void 0:l.status)!=="Aprobado"){N.push(e.jsx(j,{title:"Plan no activo",type:"warning",children:"No puedes encender servicios. Tu plan debe estar activo y aprobado."}));return}t(h);const I=E.map(T=>T.uid_servicio===o.original.uid_servicio?{...T,estatus:h}:T);V(I);try{const T=H(S,"Servicios",o.original.uid_servicio);await ge(T,{estatus:h}),console.log("Estado del servicio actualizado")}catch(T){console.error("Error al actualizar el estado del servicio:",T)}};return e.jsx("div",{children:e.jsx(Bt,{checked:a,onChange:()=>g(!a)})})}},{header:"Acciones",id:"actions",cell:({row:o})=>e.jsx("div",{className:"",children:e.jsx(ue,{size:"sm",variant:"solid",onClick:()=>Co(o.original),className:"text-blue-900 hover:bg-blue-700",children:e.jsx(qt,{})})})}],[l,E,Co]),mt=[{header:"Nombre del Plan",accessorKey:"nombre"},{header:"Monto",accessorKey:"monto",cell:({getValue:o})=>{const a=o();return a===0||a<.01&&a>-.01?"Gratis":a}},{header:"Descripcion",accessorKey:"descripcion"},{header:"Cantidad de servicios",accessorKey:"cantidad_servicios"}],ut=[{header:"Nombre del Plan",accessorKey:"nombre"},{header:"Monto",accessorKey:"monto",cell:({getValue:o})=>{const a=o();return a===0||a<.01&&a>-.01?"Gratuito":`$${a}`}},{header:"vigencia",accessorKey:"vigencia"},{header:"Fecha de vencimiento",accessorKey:"fecha_fin",cell:({row:o})=>`${le(o.original.fecha_fin)}`}],{Tr:fe,Th:Be,Td:ze,THead:so,TBody:ro,Sorter:ua}=Ge,no=bo({data:E,columns:dt,state:{sorting:eo,columnFilters:Ae},onSortingChange:oo,onColumnFiltersChange:$e,getCoreRowModel:jo(),getSortedRowModel:No(),getFilteredRowModel:yo()}),_o=bo({data:pe,columns:mt,state:{sorting:eo,columnFilters:Ae},onSortingChange:oo,onColumnFiltersChange:$e,getCoreRowModel:jo(),getSortedRowModel:No(),getFilteredRowModel:yo()}),So=bo({data:y,columns:ut,state:{sorting:eo,columnFilters:Ae},onSortingChange:oo,onColumnFiltersChange:$e,getCoreRowModel:jo(),getSortedRowModel:No(),getFilteredRowModel:yo()}),[ee,gt]=i.useState(1),oe=6,Eo=no.getRowModel().rows.length,ko=o=>{console.log("onPaginationChange",o),gt(o)},[pt,xt]=i.useState(!1),[ft,Fo]=i.useState(!1),[ht,Io]=i.useState(null),[bt,To]=i.useState(!1),[z,Do]=i.useState(null),[F,he]=i.useState(1),[be,je]=i.useState({x:0,y:0}),[ke,qe]=i.useState(!1),[Ro,Ue]=i.useState(0),[io,lo]=i.useState(!1),[co,mo]=i.useState(!1),[Fe,jt]=i.useState({x:0,y:0}),uo=()=>{xt(o=>!o)},Ie=(o,a,t)=>{Do({url:o,name:a,type:t}),To(!0),he(1),je({x:0,y:0}),Ue(0),lo(!1),mo(!1)},Lo=()=>{To(!1),Do(null),he(1),je({x:0,y:0}),qe(!1),Ue(0),lo(!1),mo(!1)},Nt=()=>{he(o=>Math.min(o+.25,3))},yt=()=>{he(o=>Math.max(o-.25,.5))},vt=()=>{he(1),je({x:0,y:0})},wt=()=>{Ue(o=>(o+90)%360)},Ct=()=>{Ue(o=>(o-90+360)%360)},_t=()=>lo(o=>!o),St=()=>mo(o=>!o),Et=o=>{if(o.ctrlKey||o.metaKey){o.preventDefault();const a=o.deltaY>0?-.1:.1;he(t=>Math.max(.5,Math.min(3,t+a)))}},kt=o=>{F>1&&(z==null?void 0:z.type)==="image"&&(qe(!0),jt({x:o.clientX-be.x,y:o.clientY-be.y}),o.preventDefault())},Ft=o=>{if(ke&&F>1){const a=o.clientX-Fe.x,t=o.clientY-Fe.y;je({x:a,y:t})}},Po=()=>{qe(!1)};i.useEffect(()=>{F===1&&je({x:0,y:0})},[F]),i.useEffect(()=>{if(ke){const o=t=>{const g=t.clientX-Fe.x,h=t.clientY-Fe.y;je({x:g,y:h})},a=()=>{qe(!1)};return document.addEventListener("mousemove",o),document.addEventListener("mouseup",a),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)}}},[ke,Fe]);const It=()=>{Fo(!1),Io(null)},Tt=()=>{K()};return e.jsxs(At,{className:"min-h-screen overflow-y-auto pb-8",children:[v&&e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{onClick:()=>p(`${$t}/garages`),className:"flex items-center text-blue-900 mb-3 ml-2 px-4 py-2 bg-blue-100 rounded-lg hover:bg-blue-200 transition duration-200",children:[e.jsx(Ut,{className:"mr-2"}),e.jsx("span",{children:"Volver"})]})}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 pb-8",children:[e.jsxs(Ko,{children:[e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{className:"bg-[#1d1e56] rounded-md p-2 hover:bg-[#1E3a8a] text-white",onClick:lt,children:"Editar"})}),e.jsxs("div",{className:"flex flex-col xl:justify-between min-w-[260px] h-full 2xl:min-w-[360px] mx-auto",children:[e.jsxs("div",{className:"flex xl:flex-col items-center gap-4",children:[e.jsx(Go,{size:90,shape:"circle",src:(r==null?void 0:r.image_perfil)||"/img/logo/logo-light-streamline.png",className:"p-2 bg-white shadow-lg"}),e.jsx("h4",{className:"font-bold",children:(r==null?void 0:r.nombre)||"Nombre no disponible"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-y-7 gap-x-4 mt-8",children:[e.jsx(X,{title:"Correo electronico",value:(r==null?void 0:r.email)||"Correo no disponible"}),e.jsx(X,{title:"Numero de telefono",value:(r==null?void 0:r.phone)||"Telefono no disponible"}),e.jsx(X,{title:"Rif",value:(r==null?void 0:r.rif)||"Rif no disponible"}),e.jsx(X,{title:"Estado",value:(r==null?void 0:r.estado)||"Estado no disponible"}),e.jsx(X,{title:"Estatus",value:(r==null?void 0:r.status)||"Estatus no disponible"}),e.jsx(X,{title:"Direccion",value:(r==null?void 0:r.Direccion)||"Direccion no disponible"}),r!=null&&r.ubicacion?e.jsx(la,{center:{lat:r.ubicacion.lat,lng:r.ubicacion.lng},markers:[{lat:r.ubicacion.lat,lng:r.ubicacion.lng}]}):"Ubicación no disponible",e.jsxs("div",{className:"mb-7",children:[e.jsx("span",{children:"Redes Sociales"}),e.jsx("div",{className:"flex mt-4 gap-2",children:r!=null&&r.LinkFacebook||r!=null&&r.LinkInstagram||r!=null&&r.whatsapp||r!=null&&r.LinkTiktok?e.jsxs(e.Fragment,{children:[r.LinkFacebook&&e.jsx("a",{href:r.LinkFacebook,target:"_blank",rel:"noopener noreferrer",title:r.LinkFacebook,children:e.jsx(ue,{shape:"circle",size:"sm",icon:e.jsx(Kt,{className:"text-[#1773ea]"})})}),r.LinkInstagram&&e.jsx("a",{href:r.LinkInstagram,target:"_blank",rel:"noopener noreferrer",title:r.LinkInstagram,children:e.jsx(ue,{shape:"circle",size:"sm",icon:e.jsx(Gt,{className:"text-[#E1306C]"})})}),r.LinkTiktok&&e.jsx("a",{href:r.LinkTiktok,target:"_blank",rel:"noopener noreferrer",title:r.LinkTiktok,children:e.jsx(ue,{shape:"circle",size:"sm",icon:e.jsx(Ht,{className:"text-black"})})}),r.whatsapp&&e.jsx("a",{href:`https://wa.me/${r.whatsapp}?text=${encodeURIComponent("Hola, quiero más información sobre el servicio")}`,target:"_blank",rel:"noopener noreferrer",title:r.whatsapp,children:e.jsx(ue,{shape:"circle",size:"sm",icon:e.jsx(Vt,{className:"text-[#25d366]"})})})]}):e.jsx("p",{className:"text-gray-500",children:"No hay redes sociales disponibles"})})]})]})]})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs(Zo,{defaultValue:"tab1",children:[e.jsxs(ct,{children:[e.jsx(to,{value:"tab1",children:"Planes"}),e.jsx(to,{value:"tab2",children:"Servicios"}),e.jsx(to,{value:"tab3",children:"Documentos"})]}),e.jsx("div",{className:"w-full",children:e.jsx(ao,{value:"tab1",children:e.jsxs("div",{className:"mb-8 mt-4",children:[e.jsx("h6",{className:"mb-4",children:"Subscripción"}),e.jsx(Ko,{bordered:!0,className:"mb-4",children:n?e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 p-4 border rounded-lg shadow-md bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Go,{className:"bg-transparent",shape:"circle",icon:e.jsx(ta,{className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:(l==null?void 0:l.nombre)||"Cargando..."}),e.jsx(oa,{className:`rounded-md border-0 mx-2 ${(l==null?void 0:l.status)==="Aprobado"?"bg-green-100 text-green-400":(l==null?void 0:l.status)==="Vencido"?"bg-red-100 text-red-400":"bg-yellow-100 text-yellow-400"}`,children:(l==null?void 0:l.status)||"Pendiente"})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Vigencia:"," ",(l==null?void 0:l.vigencia)??"---"," ","días"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Monto mensual:"," ",e.jsx("span",{className:"font-bold text-gray-800",children:(l==null?void 0:l.monto)!==void 0&&(l==null?void 0:l.monto)!==null?l.monto===0||l.monto<.01&&l.monto>-.01?"Gratis":`$${l.monto}`:"---"})]}),(l==null?void 0:l.status)==="Aprobado"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs ml-2 text-gray-600",children:[ne??"---"," ","días restantes"]}),e.jsxs("p",{className:"text-xs ml-2 text-gray-600",children:["Fecha de vencimiento:"," ",e.jsx("span",{className:"text-xs text-gray-600",children:l.fecha_fin?le(l.fecha_fin):"Fecha no disponible"})]})]})]})]})]}),(l==null?void 0:l.status)==="Vencido"&&e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{onClick:()=>Z(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200",children:"Elegir Plan"}),(l==null?void 0:l.uid)&&e.jsx(Wo,{talleruid:u,subscriptionId:(l==null?void 0:l.uid)||""})]}),(l==null?void 0:l.status)==="Aprobado"&&e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx("button",{onClick:()=>Z(!0),className:"bg-blue-900 rounded-md p-2 text-white hover:bg-blue-700",children:"Renovar Pago"})}),(l==null?void 0:l.status)==="Por Aprobar"&&e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(Wo,{talleruid:u,subscriptionId:(l==null?void 0:l.uid)||""})})]}):e.jsxs("div",{className:"flex justify-end",children:[e.jsx("p",{className:"text-xs mr-64 mt-3",children:"Puede visualizar y suscribirse a un plan para su taller..."}),e.jsx("button",{onClick:()=>Z(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200",children:"Ver Planes"})]})}),e.jsx("div",{children:e.jsxs("div",{className:"p-4 rounded-lg shadow",children:[e.jsx("h6",{className:"mb-6 flex justify-start mt-4",children:"Historial de Subscripciones"}),e.jsxs(Ge,{className:"w-full rounded-lg",children:[e.jsx(so,{children:So.getHeaderGroups().map(o=>e.jsx(fe,{children:o.headers.map(a=>e.jsx(Be,{colSpan:a.colSpan,children:a.isPlaceholder?null:e.jsx("div",{className:a.column.getCanSort()?"cursor-pointer select-none":"",onClick:a.column.getToggleSortingHandler(),children:we(a.column.columnDef.header,a.getContext())})},a.id))},o.id))}),e.jsx(ro,{children:So.getRowModel().rows.slice((ee-1)*oe,ee*oe).map(o=>e.jsx(fe,{children:o.getVisibleCells().map(a=>e.jsx(ze,{children:we(a.column.columnDef.cell,a.getContext())},a.id))},o.id))})]}),e.jsx(Vo,{onChange:ko,currentPage:ee,totalRows:Eo,rowsPerPage:oe})]})}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 p-4",children:it.map(o=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(aa,{checked:m[o.dbKey]||!1,onChange:a=>{c(t=>({...t,[o.dbKey]:a}))}}),e.jsx("span",{children:o.icon}),e.jsx("span",{children:o.name})]},o.name))}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:nt,className:"px-4 py-2 bg-[#1d1e56] text-white rounded-md hover:bg-blue-900 focus:outline-none",children:"Guardar"})})]})})}),e.jsx(ao,{value:"tab2",children:e.jsx("div",{className:"w-full h-full",children:e.jsxs("div",{className:"p-4 rounded-lg",children:[e.jsx("h6",{className:"mb-6 flex justify-start mt-4",children:"Lista de Servicios"}),e.jsxs(Ge,{className:"w-full rounded-lg",children:[e.jsx(so,{children:no.getHeaderGroups().map(o=>e.jsx(fe,{children:o.headers.map(a=>e.jsx(Be,{colSpan:a.colSpan,children:a.isPlaceholder?null:e.jsx("div",{className:a.column.getCanSort()?"cursor-pointer select-none":"",onClick:a.column.getToggleSortingHandler(),children:we(a.column.columnDef.header,a.getContext())})},a.id))},o.id))}),e.jsx(ro,{children:no.getRowModel().rows.slice((ee-1)*oe,ee*oe).map(o=>e.jsx(fe,{children:o.getVisibleCells().map(a=>e.jsx(ze,{children:we(a.column.columnDef.cell,a.getContext())},a.id))},o.id))})]}),e.jsx(Vo,{onChange:ko,currentPage:ee,totalRows:Eo,rowsPerPage:oe})]})})}),e.jsx(ao,{value:"tab3",children:e.jsxs("div",{className:"w-full h-full p-4",children:[e.jsx("h6",{className:"mb-6 flex justify-start mt-4",children:"Documentos del Taller"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[(r==null?void 0:r.rifIdFiscal)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Ie(r.rifIdFiscal,"RIF ID Fiscal",r.rifIdFiscal.includes(".pdf")?"pdf":"image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:r.rifIdFiscal.includes(".pdf")?e.jsxs("div",{className:"text-center",children:[e.jsx(ye,{className:"w-16 h-16 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"RIF ID Fiscal"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF"})]}):e.jsx("img",{src:r.rifIdFiscal,alt:"RIF ID Fiscal",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.permisoOperacion)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Ie(r.permisoOperacion,"Permiso de Operación",r.permisoOperacion.includes(".pdf")?"pdf":"image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:r.permisoOperacion.includes(".pdf")?e.jsxs("div",{className:"text-center",children:[e.jsx(ye,{className:"w-16 h-16 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Permiso de Operación"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF"})]}):e.jsx("img",{src:r.permisoOperacion,alt:"Permiso de Operación",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.logotipoNegocio)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Ie(r.logotipoNegocio,"Logotipo Negocio","image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.jsx("img",{src:r.logotipoNegocio,alt:"Logotipo Negocio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.fotoFrenteTaller)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Ie(r.fotoFrenteTaller,"Foto Frente Taller","image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.jsx("img",{src:r.fotoFrenteTaller,alt:"Foto Frente Taller",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.fotoInternaTaller)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Ie(r.fotoInternaTaller,"Foto Interna Taller","image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.jsx("img",{src:r.fotoInternaTaller,alt:"Foto Interna Taller",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]})]}),!(r!=null&&r.rifIdFiscal)&&!(r!=null&&r.permisoOperacion)&&!(r!=null&&r.logotipoNegocio)&&!(r!=null&&r.fotoFrenteTaller)&&!(r!=null&&r.fotoInternaTaller)&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(fo,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-semibold",children:"No hay documentos disponibles"}),e.jsx("p",{className:"text-sm",children:"Los documentos aparecerán aquí una vez que se suban"})]})]})})]})})]}),e.jsx(Xo,{width:1e3,isOpen:Se,onClose:wo,children:e.jsxs("div",{className:"table-responsive",children:[e.jsx("h2",{className:"mb-4",children:"Planes de Subscripción"}),e.jsx("div",{className:"p-2 rounded-lg shadow",children:e.jsxs(Ge,{className:"w-full rounded-lg",children:[e.jsx(so,{children:_o.getHeaderGroups().map(o=>e.jsxs(fe,{children:[o.headers.map(a=>{var t,g;return e.jsx(Be,{colSpan:a.colSpan,children:a.isPlaceholder?null:e.jsxs("div",{className:a.column.getCanSort()?"cursor-pointer select-none":"",onClick:a.column.getToggleSortingHandler(),children:[we(a.column.columnDef.header,a.getContext()),a.column.getCanFilter()?e.jsx("input",{type:"text",value:((g=(t=Ae.find(h=>h.id===a.id))==null?void 0:t.value)==null?void 0:g.toString())||"",onChange:h=>Je(a.id,h.target.value),placeholder:"Buscar",className:"mt-2 p-1 border rounded",onClick:h=>h.stopPropagation()}):null]})},a.id)}),e.jsx(Be,{children:"Acción"})," "]},o.id))}),e.jsx(ro,{children:_o.getRowModel().rows.slice((ee-1)*oe,ee*oe).map(o=>e.jsxs(fe,{children:[o.getVisibleCells().map(a=>e.jsx(ze,{children:we(a.column.columnDef.cell,a.getContext())},a.id)),e.jsx(ze,{children:e.jsx("button",{className:"bg-[#1d1e56] text-white px-4 py-2 rounded",onClick:()=>ce(o.original),children:"Suscribirse"})})]},o.id))})]})})]})}),P&&e.jsx(zt,{isOpen:P,title:"Editar Taller",confirmButtonColor:"blue-600",onClose:()=>U(!1),onRequestClose:()=>U(!1),onCancel:()=>U(!1),onConfirm:rt,children:e.jsxs("div",{className:"max-h-[450px] overflow-y-auto",children:[e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 gap-2",children:e.jsxs("div",{className:"text-center",children:[!s.image_perfil&&!s.newLogoFile?e.jsx(Me,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}):e.jsxs("div",{children:[e.jsx("img",{src:s.newLogoFile?URL.createObjectURL(s.newLogoFile):s.image_perfil,alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}),e.jsx("button",{onClick:()=>b(o=>({...o,newLogoFile:null,image_perfil:""})),className:"mt-2 text-red-500 hover:text-red-700",children:"Quitar Logo"})]}),e.jsx("div",{className:"mt-4 flex text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"logo-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:s.newLogoFile?"Cambiar Logo":"Seleccionar Logo"}),e.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",accept:"image/*",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];b(g=>({...g,newLogoFile:a||null}))}})]})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Nombre"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Nombre",name:"nombre",value:s.nombre,onChange:de})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Correo Electrónico"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Correo Electrónico",disabled:!0,name:"email",value:s.email,onChange:de})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Teléfono"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Teléfono",name:"phone",value:s.phone,onChange:de,onKeyDown:o=>{o.currentTarget.value===""&&o.key==="0"&&o.preventDefault()},onInput:o=>{const a=o.target,t=a.value.replace(/^0+/,"");t!==a.value&&b(g=>({...g,phone:t}))}})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"WhatsApp"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"WhatsApp",name:"whatsapp",value:s.whatsapp,onChange:de,onKeyDown:o=>{o.currentTarget.value===""&&o.key==="0"&&o.preventDefault()},onInput:o=>{const a=o.target,t=a.value.replace(/^0+/,"");t!==a.value&&b(g=>({...g,whatsapp:t}))}})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"RIF:"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsxs("select",{value:((Oo=s.rif)==null?void 0:Oo.split("-")[0])||"J",onChange:o=>b(a=>{var t;return{...a,rif:`${o.target.value}-${((t=a==null?void 0:a.rif)==null?void 0:t.split("-")[1])||""}`}}),className:"mx-2 p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"J",children:"J-"}),e.jsx("option",{value:"V",children:"V-"}),e.jsx("option",{value:"E",children:"E-"}),e.jsx("option",{value:"C",children:"C-"}),e.jsx("option",{value:"G",children:"G-"}),e.jsx("option",{value:"P",children:"P-"})]}),e.jsx("input",{disabled:!0,type:"text",value:((Mo=s.rif)==null?void 0:Mo.split("-")[1])||"",onChange:o=>b(a=>{var t;return{...a,rif:`${((t=a==null?void 0:a.rif)==null?void 0:t.split("-")[0])||"J"}-${o.target.value}`}}),className:"p-3 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 mx-2 w-full"})]})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Estado:"}),e.jsxs("select",{name:"estado",value:s.estado,onChange:de,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"",children:"Seleccione un Estado"}),["Amazonas","Anzoátegui","Apure","Aragua","Barinas","Bolívar","Carabobo","Cojedes","Delta Amacuro","Distrito Capital","Falcón","Guárico","Lara","La Guaira","Mérida","Miranda","Monagas","Nueva Esparta","Portuguesa","Sucre","Táchira","Trujillo","Yaracuy","Zulia"].map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Direccion"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"",name:"Direccion",value:s.Direccion,onChange:de})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Mapa"}),e.jsx("button",{type:"button",className:"w-full mt-1 p-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300",onClick:uo,children:"Abrir Mapa"})]}),pt&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-3xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Editar ubicación"}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 focus:outline-none",onClick:uo,children:"✖"})]}),e.jsx(ca,{initialLocation:{lat:s.ubicacion.lat,lng:s.ubicacion.lng},onLocationChange:o=>b(a=>({...a,ubicacion:o}))}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300",onClick:uo,children:"Guardar"})})]})}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Estatus"}),e.jsxs("select",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",name:"status",value:s.status,onChange:de,children:[e.jsx("option",{value:"Aprobado",children:"Aprobado"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"Rechazado",children:"Rechazado"}),e.jsx("option",{value:"En espera por aprobación",children:"En espera por aprobación"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Facebook"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"URL de Facebook",name:"LinkFacebook",value:s.LinkFacebook,onChange:o=>Qe(o,"facebook")}),xe.facebook&&e.jsx("span",{className:"text-red-500 text-sm",children:xe.facebook})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Instagram"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"URL de Instagram",name:"LinkInstagram",value:s.LinkInstagram,onChange:o=>Qe(o,"instagram")}),xe.instagram&&e.jsx("span",{className:"text-red-500 text-sm",children:xe.instagram})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"TikTok"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"URL de TikTok",name:"LinkTiktok",value:s.LinkTiktok,onChange:o=>Qe(o,"tiktok")}),xe.tiktok&&e.jsx("span",{className:"text-red-500 text-sm",children:xe.tiktok})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4 col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Documentos"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 mb-2",children:["RIF ID Fiscal: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!s.rifIdFiscal_file&&!s.rifIdFiscal?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,.pdf",id:"rifIdFiscal-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,rifIdFiscal_file:a}))}}),e.jsx("label",{htmlFor:"rifIdFiscal-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(fo,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Imágenes o PDF"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.rifIdFiscal_file?s.rifIdFiscal_file.type.includes("pdf")?e.jsx(ye,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}):(Ao=s.rifIdFiscal)!=null&&Ao.includes(".pdf")?e.jsx(ye,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.rifIdFiscal_file?s.rifIdFiscal_file.name:M(s.rifIdFiscal)}),s.rifIdFiscal_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.rifIdFiscal_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,rifIdFiscal_file:null,rifIdFiscal:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Permisos de Operación:"}),!s.permisoOperacion_file&&!s.permisoOperacion?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,.pdf",id:"permisoOperacion-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,permisoOperacion_file:a}))}}),e.jsx("label",{htmlFor:"permisoOperacion-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(fo,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Imágenes o PDF"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.permisoOperacion_file?s.permisoOperacion_file.type.includes("pdf")?e.jsx(ye,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}):($o=s.permisoOperacion)!=null&&$o.includes(".pdf")?e.jsx(ye,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.permisoOperacion_file?s.permisoOperacion_file.name:M(s.permisoOperacion)}),s.permisoOperacion_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.permisoOperacion_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,permisoOperacion_file:null,permisoOperacion:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Logotipo Negocio:"}),!s.logotipoNegocio_file&&!s.logotipoNegocio?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"logotipoNegocio-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,logotipoNegocio_file:a}))}}),e.jsx("label",{htmlFor:"logotipoNegocio-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(ae,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo imágenes"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.logotipoNegocio_file?s.logotipoNegocio_file.name:M(s.logotipoNegocio)}),s.logotipoNegocio_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.logotipoNegocio_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,logotipoNegocio_file:null,logotipoNegocio:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 mb-2",children:["Foto Frente Taller: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!s.fotoFrenteTaller_file&&!s.fotoFrenteTaller?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"fotoFrenteTaller-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,fotoFrenteTaller_file:a}))}}),e.jsx("label",{htmlFor:"fotoFrenteTaller-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(Me,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo imágenes"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.fotoFrenteTaller_file?s.fotoFrenteTaller_file.name:M(s.fotoFrenteTaller)}),s.fotoFrenteTaller_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.fotoFrenteTaller_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,fotoFrenteTaller_file:null,fotoFrenteTaller:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 mb-2",children:["Foto Interna Taller: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!s.fotoInternaTaller_file&&!s.fotoInternaTaller?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"fotoInternaTaller-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,fotoInternaTaller_file:a}))}}),e.jsx("label",{htmlFor:"fotoInternaTaller-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(Me,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo imágenes"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.fotoInternaTaller_file?s.fotoInternaTaller_file.name:M(s.fotoInternaTaller)}),s.fotoInternaTaller_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.fotoInternaTaller_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,fotoInternaTaller_file:null,fotoInternaTaller:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]})]})]})}),e.jsx(ma,{isOpen:ft,onClose:It,service:ht,onServiceUpdated:Tt}),bt&&z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:Lo,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:z.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mr-4 border-r pr-4",children:[e.jsx("button",{onClick:yt,disabled:F<=.5,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Alejar (Ctrl + Rueda del mouse)",children:e.jsx(Zt,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 min-w-[60px] text-center",children:[Math.round(F*100),"%"]}),e.jsx("button",{onClick:Nt,disabled:F>=3,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Acercar (Ctrl + Rueda del mouse)",children:e.jsx(Yt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:vt,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",title:"Restablecer zoom",children:e.jsx(Wt,{className:"w-5 h-5"})})]}),z.type==="image"&&e.jsxs("div",{className:"flex items-center gap-2 mr-4 border-r pr-4",children:[e.jsx("button",{onClick:Ct,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",title:"Rotar 90° a la izquierda",children:e.jsx(Xt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:wt,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",title:"Rotar 90° a la derecha",children:e.jsx(Jt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:_t,className:`p-2 rounded-md transition-colors ${io?"bg-gray-200 text-gray-800":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,title:"Voltear horizontal",children:e.jsx(Qt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:St,className:`p-2 rounded-md transition-colors ${co?"bg-gray-200 text-gray-800":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,title:"Voltear vertical",children:e.jsx(ea,{className:"w-5 h-5"})})]}),e.jsx("button",{onClick:Lo,className:"text-gray-500 hover:text-gray-700 focus:outline-none transition-colors",children:e.jsx(ve,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-4 bg-gray-100 flex items-center justify-center relative",onWheel:Et,children:z.type==="pdf"?e.jsx("div",{style:{transform:`scale(${F})`,transformOrigin:"center center",transition:F===1?"transform 0.2s ease-in-out":"none",width:`${100/F}%`,height:`${100/F}%`},children:e.jsx("iframe",{src:z.url,className:"w-full h-full min-h-[600px] border-0",title:z.name})}):e.jsx("img",{src:z.url,alt:z.name,style:{transform:`rotate(${Ro}deg) scaleX(${io?-1:1}) scaleY(${co?-1:1}) scale(${F}) translate3d(${be.x/F}px, ${be.y/F}px, 0)`,transformOrigin:"center center",transition:ke?"none":F===1&&be.x===0&&be.y===0&&Ro===0&&!io&&!co?"transform 0.2s ease-in-out":"none",maxWidth:"100%",maxHeight:"70vh",cursor:F>1?ke?"grabbing":"grab":"default"},className:"object-contain rounded-lg shadow-lg select-none",onMouseDown:kt,onMouseMove:Ft,onMouseUp:Po,onMouseLeave:Po,draggable:!1,onError:o=>{const a=o.target;a.style.display="none";const t=document.createElement("div");t.className="text-center text-gray-500 p-8",t.innerHTML=`
                                            <FaFilePdf class="w-16 h-16 mx-auto mb-4 text-gray-400" />
                                            <p class="text-lg font-semibold">Error al cargar la imagen</p>
                                            <p class="text-sm">No se pudo mostrar el documento</p>
                                        `;const g=a.parentElement;g&&g.appendChild(t)}})}),e.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:e.jsx("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Abrir en una nueva pestaña"})})]})})]})};export{Ms as default};
