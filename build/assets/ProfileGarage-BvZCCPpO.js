import{r as l,j as e,a8 as Q,a9 as S,aa as se,ag as Z,ap as ho,b3 as wt,ak as Ce,al as He,am as Ve,an as Y,af as ge,ab as Ye,a7 as We,aj as Oe,a4 as _t,u as Ct,ai as St,ar as Mo,as as Et}from"./index-h29nTG28.js";import{C as It,a as kt}from"./Views-tqoNXJJS.js";import{S as Ft}from"./Switcher-MefR4OH5.js";import{C as Ao}from"./Card-72Kz4ZZm.js";import{A as $o}from"./index-w-pcXiNF.js";import{B as ue}from"./Button-HN7QplVb.js";import{C as Tt}from"./ConfirmDialog-S7Khgp-u.js";import{h as Me,e as Dt,z as Rt,B as Lt,G as Pt,H as Ot,I as Mt,j as ye,m as Le,i as mo,k as ae,l as ve,J as At,K as $t,L as Bt}from"./index.esm-x7L3bfOO.js";import{T as qt}from"./Tag-gNmYdzZc.js";import{ap as zt,aq as uo,ar as Bo}from"./index.esm-AU-9eZ_S.js";import{T as Ke}from"./index-Qb2Rt7uY.js";import"./Alert-fH7ER42R.js";import"./Badge-3Z8Y9QmS.js";import"./Calendar-YRCVUCKF.js";import{C as Ut}from"./index-jr8YoZvj.js";import"./index-jcYf1mG0.js";import{D as Go}from"./Dialog-ChIG0Szx.js";import{D as Zo}from"./Drawer-zjx017mE.js";import"./index-9wu-WKHb.js";import"./FormItem-DiDS-0eZ.js";import{I as Pe}from"./Input-ZiIaDbkl.js";import"./index-yRn9zSsG.js";import"./index-GDdiGK7z.js";import"./index-wzjgVdb-.js";import{N as j,t as N}from"./toast-_gxwbbzG.js";import{P as qo}from"./index-V_rJQTlA.js";import"./Progress-MXorG80S.js";import"./index-kLcL8M3_.js";import"./RangeCalendar-_UX6LfJ5.js";import"./ScrollBar-zNfcR_yZ.js";import"./index-U8einpBc.js";import{d as Kt}from"./Select-WuNZjN_Q.js";import"./Skeleton-f8UsqIN-.js";import"./index-50cYDkQ2.js";import{T as zo}from"./index-e-8IbkMt.js";import"./index-yVgimof5.js";import"./index-dPgCiTsF.js";import"./Tooltip-keULPPQ7.js";import"./Upload-noO2Fl_E.js";import{u as go,f as we,g as po,a as xo,b as fo}from"./index-Vaa4Zh1s.js";import{R as Gt}from"./index.esm-bx-Nn-3N.js";import{M as Zt}from"./index.esm-tB6NJlJB.js";import{S as Ht}from"./index.esm-QFFCCBwN.js";import{F as Ho,a as Vo,b as B,E as q}from"./formik.esm-7L-Zep69.js";import{c as _e,g as Ge,h as Ze,a as $}from"./index.esm-l50wn3RL.js";import{G as Yo,M as Wo}from"./esm-1hNsU9Qq.js";import"./useMergeRef-Rt_Crb27.js";import"./context-lu_ZoR82.js";import"./useTimeout-8Qcvutj8.js";import"./CloseButton-77oPkxVT.js";import"./StatusIcon-IzuWR2sG.js";import"./motion-2BfmWMAc.js";import"./useControllableState-XEORgsvq.js";import"./cloneDeep-h0oRXXdM.js";import"./_getAllKeys-npVMU96D.js";import"./_MapCache-BZbH7svQ.js";import"./_baseIsEqual-KjAIo8NO.js";import"./get-m2KnnHSw.js";import"./toString-cKn9M41-.js";import"./floating-ui.react-QHdoWf14.js";import"./floating-ui.dom-0rLBacrf.js";import"./TimeInput-tgFsiuAe.js";import"./useUniqueId-Mv11J9oJ.js";import"./useDidUpdate-RiYL8SkD.js";import"./index-23fyQUIS.js";import"./index-hHSJtmdP.js";import"./useRootClose-MRLi3WrZ.js";import"./isNil-w4OiMULf.js";import"./index-Xq95uh32.js";import"./chainedFunction-ltcSYACe.js";import"./toConsumableArray-YYxflNc8.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./setPrototypeOf-ahVgEFUp.js";import"./mapCloneElement--h1TVPNw.js";import"./index.esm-WckmvPV8.js";import"./index.esm-dJM_6jPq.js";const Uo=[{codigo:"0102",nombre:"BANCO DE VENEZUELA"},{codigo:"0156",nombre:"100% BANCO"},{codigo:"0172",nombre:"BANCAMIGA BANCO MICROFINANCIERO C A"},{codigo:"0114",nombre:"BANCARIBE"},{codigo:"0171",nombre:"BANCO ACTIVO"},{codigo:"0166",nombre:"BANCO AGRICOLA DE VENEZUELA"},{codigo:"0175",nombre:"BANCO BICENTENARIO DEL PUEBLO"},{codigo:"0128",nombre:"BANCO CARONI"},{codigo:"0163",nombre:"BANCO DEL TESORO"},{codigo:"0115",nombre:"BANCO EXTERIOR"},{codigo:"0151",nombre:"BANCO FONDO COMUN"},{codigo:"0173",nombre:"BANCO INTERNACIONAL DE DESARROLLO"},{codigo:"0105",nombre:"BANCO MERCANTIL"},{codigo:"0191",nombre:"BANCO NACIONAL DE CREDITO"},{codigo:"0138",nombre:"BANCO PLAZA"},{codigo:"0137",nombre:"BANCO SOFITASA"},{codigo:"0104",nombre:"BANCO VENEZOLANO DE CREDITO"},{codigo:"0168",nombre:"BANCRECER"},{codigo:"0134",nombre:"BANESCO"},{codigo:"0177",nombre:"BANFANB"},{codigo:"0146",nombre:"BANGENTE"},{codigo:"0174",nombre:"BANPLUS"},{codigo:"0108",nombre:"BBVA PROVINCIAL"},{codigo:"0157",nombre:"DELSUR BANCO UNIVERSAL"},{codigo:"0169",nombre:"MI BANCO"},{codigo:"0178",nombre:"N58 BANCO DIGITAL BANCO MICROFINANCIERO S A"}],Ko=({subscriptionId:r,talleruid:C})=>{const[n,L]=l.useState("Efectivo"),[E,H]=l.useState([]),[pe,I]=l.useState(!1),[W,X]=l.useState(!1),[Se,V]=l.useState(!1),[P,z]=l.useState(!1);l.useEffect(()=>{(async()=>{const u=Q(S,"MetodosPago"),O=(await se(u)).docs.map(v=>v.data());H(O.filter(v=>v.status))})()},[]),l.useEffect(()=>{(async()=>{if(C)try{const u=Z(S,"Usuarios",C),p=await ho(u);if(p.exists()){const v=p.data().subscripcion_actual;v&&v.pago_reportado===!0&&V(!0)}}catch(u){console.error("Error al verificar si ya se reportó el pago:",u)}})()},[C]);const x=c=>{L(c)},re=()=>{Se?z(!0):X(!0)},ne=_e().shape({monto:Ge().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),fechaPago:Ze().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),Ee=_e().shape({monto:Ge().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),numReferencia:$().required("El número de referencia es obligatorio"),bancoDestino:$().required("Selecciona un banco de destino"),bancoOrigen:$().required("Selecciona un banco de origen"),fechaPago:Ze().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),i=_e().shape({monto:Ge().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),numReferencia:$().required("El número de referencia es obligatorio"),telefono:$().required("El teléfono es obligatorio").matches(/^[1-9]\d*$/,"El teléfono no puede comenzar con 0 y debe contener solo números"),bancoDestino:$().required("Selecciona un banco de destino"),bancoOrigen:$().required("Selecciona un banco de origen"),fechaPago:Ze().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),f=_e().shape({monto:Ge().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),correo:$().email("El correo no es válido").required("El correo Zelle es obligatorio"),fechaPago:Ze().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),y=_e().shape({...n==="Efectivo"&&ne.fields,...n==="Transferencia"&&Ee.fields,...n==="Pago Móvil"&&i.fields,...n==="Zelle"&&f.fields}),w={metodoPago:"",monto:"",numReferencia:"",telefono:"",correo:"",cedula:"",bancoOrigen:"",bancoDestino:"",fechaPago:"",newLogoFile:null},s=async(c,u)=>{try{const p=Q(S,"Subscripciones"),O=await se(p),v=new Date(c.fechaPago),U=`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}-${String(v.getDate()).padStart(2,"0")}`;for(const ie of O.docs){const le=ie.data(),M=le.comprobante_pago;if(M&&M.fechaPago){const ce=M.fechaPago.toDate();if(`${ce.getFullYear()}-${String(ce.getMonth()+1).padStart(2,"0")}-${String(ce.getDate()).padStart(2,"0")}`===U&&M.monto===parseFloat(c.monto)&&le.taller_uid===C){if((u==="Pago Móvil"||u==="Transferencia")&&M.numReferencia===c.numReferencia)return{isDuplicate:!0,message:`Ya existe un pago con el número de referencia ${c.numReferencia} en la fecha ${U} para este taller`};if(u==="Zelle"&&M.correo===c.correo)return{isDuplicate:!0,message:`Ya existe un pago con el correo ${c.correo} en la fecha ${U} para este taller`};if(u==="Efectivo")return{isDuplicate:!0,message:`Ya existe un pago en efectivo por el monto $${c.monto} en la fecha ${U} para este taller`}}}}return{isDuplicate:!1,message:""}}catch(p){return console.error("Error al validar duplicidad:",p),{isDuplicate:!1,message:""}}},b=async c=>{if(!r){console.error("Error: subscriptionId no está definido");return}I(!0);try{const u=await s(c,n);if(u.isDuplicate){N.push(e.jsx(j,{title:"Error",type:"danger",children:u.message})),I(!1);return}let p="";if(c.newLogoFile&&n&&C){const ie=wt(),le=new Date().toISOString(),M=`${n}_${C}_${le}.jpg`,ce=c.newLogoFile,J=Ce(ie,`paymentcommitment/${M}`),Je=await He(J,ce);p=await Ve(Je.ref)}const O=c.fechaPago?Y.fromDate(new Date(c.fechaPago)):null,v={metodo:n,monto:c.monto,fechaPago:O,comprobante:p};n==="Transferencia"&&(v.numReferencia=c.numReferencia??"",v.cedula=c.cedula??"",v.bancoOrigen=c.bancoOrigen??"",v.bancoDestino=c.bancoDestino??""),n==="Pago Móvil"&&(v.cedula=c.cedula,v.telefono=c.telefono,v.bancoOrigen=c.bancoOrigen,v.bancoDestino=c.bancoDestino),n==="Zelle"&&(v.correo=c.correo??"",v.numReferencia=c.numReferencia),console.log(v);const U=Z(S,"Subscripciones",r);if(await ge(U,{comprobante_pago:v}),C){const ie=Z(S,"Usuarios",C);await ge(ie,{"subscripcion_actual.pago_reportado":!0}),V(!0)}console.log("Pago registrado exitosamente"),N.push(e.jsx(j,{title:"Éxito",type:"success",children:"Se ha registrado el pago correctamente."}))}catch(u){console.error("Error al registrar el pago:",u),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un problema al registrar el pago."}))}finally{I(!1),X(!1)}},m=E.find(c=>c.tipo_pago===n);return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:re,className:"bg-blue-900 rounded-md p-2 text-white hover:bg-blue-700",children:"Reportar Pago"}),e.jsx(Go,{isOpen:P,onClose:()=>z(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Pago Ya Reportado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Ya se ha reportado un pago para esta suscripción. No se puede reportar otro pago."}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>z(!1),className:"bg-blue-900 rounded-md p-2 text-white hover:bg-blue-700",children:"Entendido"})})]})}),e.jsx(Zo,{isOpen:W,onClose:()=>X(!1),title:"Registrar Pago",children:e.jsx(Ho,{initialValues:w,onSubmit:b,validationSchema:y,validateOnBlur:!0,validateOnChange:!1,children:({setFieldValue:c,values:u})=>e.jsxs(Vo,{className:"flex flex-col gap-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Selecciona el Método de Pago"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:E==null?void 0:E.map(p=>e.jsx("button",{type:"button",onClick:()=>x(p.tipo_pago),className:`text-sm py-2 px-4 rounded-md ${n===p.tipo_pago?"bg-[#1d1e56] text-white":"bg-gray-200"}`,children:p.tipo_pago},p.tipo_pago))}),n!=="Efectivo"&&m&&e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-4",children:[e.jsx("h5",{className:"font-semibold text-lg",children:"Detalles de la Empresa"}),m.email&&e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",m.email]}),m.num_ref&&e.jsxs("p",{children:[e.jsx("strong",{children:"Número de Referencia:"})," ",m.num_ref]}),m.banco&&e.jsxs("p",{children:[e.jsx("strong",{children:"Banco:"})," ",m.banco]}),m.cedula_rif&&e.jsxs("p",{children:[e.jsx("strong",{children:"Cédula/RIF:"})," ",m.cedula_rif]}),m.cuenta&&e.jsxs("p",{children:[e.jsx("strong",{children:"Cuenta:"})," ",m.cuenta]}),m.status_pago!==void 0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",m.status_pago?"Activo":"Inactivo"]}),m.tipo_cuenta&&e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",m.tipo_cuenta]}),m.telefono&&e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",m.telefono]}),m.titular&&e.jsxs("p",{children:[e.jsx("strong",{children:"Titular:"})," ",m.titular]})]}),e.jsx(B,{id:"monto",name:"monto",as:Pe,placeholder:"Ingresa el monto en $"}),e.jsx(q,{name:"monto",component:"div",className:"text-red-500"}),e.jsx(B,{id:"fechaPago",name:"fechaPago",as:Pe,type:"date",placeholder:"Fecha de pago"}),e.jsx(q,{name:"fechaPago",component:"div",className:"text-red-500"}),n==="Pago Móvil"&&e.jsxs(e.Fragment,{children:[e.jsx(B,{id:"telefono",name:"telefono",as:Pe,placeholder:"Teléfono",onKeyDown:p=>{p.currentTarget.value===""&&p.key==="0"&&p.preventDefault()},onChange:p=>{const O=p.target.value.replace(/^0+/,"");c("telefono",O)}}),e.jsx(q,{name:"telefono",component:"div",className:"text-red-500"})]}),n==="Zelle"&&e.jsx(B,{id:"correo",name:"correo",as:Pe,placeholder:"Correo Zelle"}),["Transferencia","Pago Móvil"].includes(n)&&e.jsxs(e.Fragment,{children:[e.jsx(B,{id:"numReferencia",name:"numReferencia",as:Pe,placeholder:"Número de referencia"}),e.jsx(q,{name:"numReferencia",component:"div",className:"text-red-500"})]}),["Transferencia","Pago Móvil"].includes(n)&&e.jsxs(e.Fragment,{children:[e.jsxs(B,{id:"bancoDestino",as:"select",name:"bancoDestino",className:"p-2 rounded-md border border-slate-300",children:[e.jsx("option",{value:"",children:"Selecciona Banco de Destino"}),Uo.map(p=>e.jsx("option",{value:p.nombre,children:p.nombre},p.codigo))]}),e.jsx(q,{name:"bancoDestino",component:"div",className:"text-red-500"}),e.jsxs(B,{id:"bancoOrigen",as:"select",name:"bancoOrigen",className:"p-2 rounded-md border border-slate-300",children:[e.jsx("option",{value:"",children:"Selecciona Banco de Origen"}),Uo.map(p=>e.jsx("option",{value:p.nombre,children:p.nombre},p.codigo))]}),e.jsx(q,{name:"bancoOrigen",component:"div",className:"text-red-500"})]}),["Transferencia","Pago Móvil","Zelle"].includes(n)&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 gap-2",children:e.jsxs("div",{className:"text-center",children:[u.newLogoFile?e.jsx("img",{src:URL.createObjectURL(u.newLogoFile),alt:"Logo",className:"w-32 h-32 object-cover rounded-md"}):e.jsx(Me,{className:"text-gray-500 text-center text-3xl"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"fileInput",className:"text-sm font-medium text-blue-600 cursor-pointer",children:"Subir Comprobante de Pago"}),e.jsx("input",{id:"fileInput",name:"newLogoFile",type:"file",className:"hidden",accept:"image/*",onChange:p=>{p.target.files&&p.target.files[0]&&c("newLogoFile",p.target.files[0])}})]})]})})}),e.jsx("button",{type:"submit",className:"w-full py-2 mt-4 bg-blue-900 rounded-md hover:bg-blue-700 text-white",children:"Registrar Pago"})]})})})]})},Vt=({markers:r,center:C})=>{const[n,L]=l.useState([]);return l.useEffect(()=>{L(r)},[r]),e.jsx("div",{style:{height:"50%",width:"100%"},children:e.jsx(Yo,{center:C,zoom:10,mapContainerStyle:{height:"400px",width:"100%",marginTop:"10px"},children:n.map((E,H)=>e.jsx(Wo,{position:{lat:E.lat,lng:E.lng}},H))})})},Yt=({initialLocation:r,onLocationChange:C})=>{const[n,L]=l.useState(null),[E]=l.useState(17);l.useEffect(()=>{r&&r.lat&&r.lng&&L(r)},[r]);const H=I=>{if(!I.latLng)return;const W={lat:I.latLng.lat(),lng:I.latLng.lng()};L(W),C(W)},pe=I=>{if(I.latLng){const W={lat:I.latLng.lat(),lng:I.latLng.lng()};L(W),C(W)}};return e.jsx("div",{style:{height:"450px",width:"100%"},children:e.jsx(Yo,{center:n||{lat:0,lng:0},zoom:E,mapContainerStyle:{height:"400px",width:"100%",marginTop:"10px"},onClick:H,children:n&&e.jsx(Wo,{position:n,draggable:!0,onDragEnd:pe})})})},Wt=_e().shape({nombre_servicio:$().required("El nombre del servicio es requerido"),descripcion:$().required("La descripción es requerida"),uid_categoria:$().required("La categoría es requerida"),precio:$().required("El precio es requerido"),garantia:$().required("La garantía es requerida"),typeService:$().required("El tipo de servicio es requerido")}),Jt=({isOpen:r,onClose:C,service:n,onServiceUpdated:L})=>{const[E,H]=l.useState([]),[pe,I]=l.useState([]),[W,X]=l.useState([]),[Se,V]=l.useState(!1),[P,z]=l.useState(null),[x,re]=l.useState(!1);l.useEffect(()=>{(async()=>{var y;if(!(!r||!n)){V(!0);try{const w=We(Q(S,"Categorias"),Ye("estatus","==",!0)),b=(await se(w)).docs.map(u=>({id:u.id,...u.data()}));H(b);const m=await ho(Z(S,"talleres","talleres"));m.exists()&&X(m.data().talleres||[]);const c={nombre_servicio:(n==null?void 0:n.nombre_servicio)||"",descripcion:(n==null?void 0:n.descripcion)||"",uid_categoria:(n==null?void 0:n.uid_categoria)||"",nombre_categoria:(n==null?void 0:n.nombre_categoria)||"",service_image:(n==null?void 0:n.service_image)||(n==null?void 0:n.imagenes)||[],service_image_files:[],uid_taller:(n==null?void 0:n.uid_taller)||"",taller:(n==null?void 0:n.taller)||"",precio:((y=n==null?void 0:n.precio)==null?void 0:y.toString())||"",garantia:(n==null?void 0:n.garantia)||"",typeService:(n==null?void 0:n.typeService)||"local",subcategoria:(n==null?void 0:n.subcategoria)||[]};z(c),n!=null&&n.uid_categoria&&await ne(n.uid_categoria)}catch(w){console.error("Error loading data:",w),N.push(e.jsx(j,{title:"Error",children:"Error al cargar los datos"}))}finally{V(!1)}}})()},[r,n]),l.useEffect(()=>{P!=null&&P.uid_categoria&&E.length>0&&ne(P.uid_categoria)},[P==null?void 0:P.uid_categoria,E.length]);const ne=async f=>{if(!f){I([]);return}try{const y=We(Q(S,"Categorias",f,"Subcategorias"),Ye("estatus","==",!0)),s=(await se(y)).docs.map(b=>({id:b.id,...b.data()}));I(s)}catch(y){console.error("Error loading subcategories:",y),I([])}},Ee=async(f,y)=>{const w=[];for(let s=0;s<f.length;s++){const b=f[s],m=Date.now(),c=`${y}_${m}_${s}.jpg`,u=Ce(Oe,`service_images/${c}`);try{await He(u,b);const p=await Ve(u);w.push(p)}catch(p){throw console.error("Error uploading image:",p),new Error(`Error al subir la imagen ${s+1}`)}}return w},i=async f=>{try{if(!(n!=null&&n.uid_servicio)){N.push(e.jsx(j,{title:"Error",children:"No se pudo identificar el servicio a editar"}));return}re(!0);let y=[...f.service_image||[]];if(f.service_image_files&&f.service_image_files.length>0)try{const s=await Ee(f.service_image_files,n.uid_servicio);y=[...y.filter(m=>!m.startsWith("blob:")),...s]}catch(s){console.error("Error uploading images:",s),N.push(e.jsx(j,{title:"Error",children:"Error al subir las imágenes"})),re(!1);return}else y=y.filter(s=>!s.startsWith("blob:"));const w=Z(S,"Servicios",n.uid_servicio);await ge(w,{nombre_servicio:f.nombre_servicio,descripcion:f.descripcion,uid_categoria:f.uid_categoria,nombre_categoria:f.nombre_categoria,precio:f.precio,garantia:f.garantia,typeService:f.typeService,subcategoria:f.subcategoria,service_image:y,uid_taller:n.uid_taller,taller:n.taller,updatedAt:new Date}),N.push(e.jsx(j,{title:"Éxito",children:"Servicio actualizado correctamente"})),L==null||L(),C()}catch(y){console.error("Error updating service:",y),N.push(e.jsx(j,{title:"Error",children:"No se pudo actualizar el servicio"}))}finally{re(!1)}};return!n||!P?null:e.jsxs(Zo,{isOpen:r,onClose:C,className:"rounded-md shadow w-full max-w-2xl",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Editar Servicio"}),Se&&e.jsx("div",{className:"flex justify-center items-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),e.jsx(Ho,{initialValues:P,validationSchema:Wt,onSubmit:i,enableReinitialize:!0,children:({values:f,handleChange:y,setFieldValue:w,errors:s,touched:b})=>e.jsxs(Vo,{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"mt-2 flex flex-col items-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10",children:e.jsxs("div",{className:"text-center",children:[Array.isArray(f.service_image)&&f.service_image.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:f.service_image.map((m,c)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:`Imagen del servicio ${c+1}`,className:"h-32 w-full object-cover rounded-md"}),e.jsx("button",{type:"button",onClick:()=>{const u=f.service_image.filter((p,O)=>O!==c);w("service_image",u)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},c))}):e.jsx(Me,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),e.jsx("div",{className:"mt-4 flex flex-col text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"images-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:"Agregar otra imagen"}),e.jsx("input",{id:"images-upload",name:"images-upload",type:"file",accept:"image/*",multiple:!0,className:"sr-only",onChange:m=>{const c=Array.from(m.target.files||[]),u=c.map(p=>URL.createObjectURL(p));w("service_image",[...f.service_image||[],...u]),w("service_image_files",[...f.service_image_files||[],...c])}})]})})]})}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Nombre Servicio:"}),e.jsx(B,{type:"text",name:"nombre_servicio",value:f.nombre_servicio,onChange:y,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"}),e.jsx(q,{name:"nombre_servicio",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Tipo de Servicio:"}),e.jsxs("div",{className:"flex items-center space-x-10",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(B,{type:"radio",name:"typeService",value:"local",className:"form-radio"}),e.jsx("span",{children:"En el Local"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(B,{type:"radio",name:"typeService",value:"domicilio",className:"form-radio"}),e.jsx("span",{children:"A Domicilio"})]})]}),e.jsx(q,{name:"typeService",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Categoría:"}),e.jsxs(B,{as:"select",name:"uid_categoria",value:f.uid_categoria,onChange:m=>{const c=m.target.value,u=E.find(p=>p.id===c);w("uid_categoria",c),w("nombre_categoria",(u==null?void 0:u.nombre)||""),w("subcategoria",[]),ne(c)},className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"",children:"Seleccione una categoría"}),E.map(m=>e.jsx("option",{value:m.id,children:m.nombre},m.id))]}),e.jsx(q,{name:"uid_categoria",component:"div",className:"text-red-600 text-sm"})]}),e.jsx("label",{className:"font-semibold text-gray-700",children:"Subcategorías:"}),e.jsx(Kt,{isMulti:!0,placeholder:"Selecciona subcategorías",noOptionsMessage:()=>"No hay Subcategorías disponibles",options:f.uid_categoria?pe.map(m=>({value:m.id,label:m.nombre})):[],value:Array.isArray(f.subcategoria)?f.subcategoria.map(m=>({value:m.uid_subcategoria||m.id,label:m.nombre_subcategoria||m.nombre})):[],onChange:m=>w("subcategoria",m.map(c=>({uid_subcategoria:c.value,nombre_subcategoria:c.label}))),className:"mt-1"}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx(B,{as:"textarea",name:"descripcion",value:f.descripcion,onChange:y,rows:1,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 resize-none overflow-hidden",style:{maxHeight:"150px",overflowY:"auto"},onInput:m=>{m.target.style.height="auto",m.target.style.height=`${m.target.scrollHeight}px`}}),e.jsx(q,{name:"descripcion",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Precio:"}),e.jsx(B,{type:"text",name:"precio",value:f.precio,onChange:y,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"}),e.jsx(q,{name:"precio",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Garantía:"}),e.jsx(B,{type:"text",name:"garantia",value:f.garantia,onChange:y,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"}),e.jsx(q,{name:"garantia",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(ue,{variant:"default",onClick:C,className:"mr-2",disabled:x,children:"Cancelar"}),e.jsx(ue,{type:"submit",style:{backgroundColor:"#000B7E"},className:"text-white hover:opacity-80",disabled:x,children:x?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):"Guardar"})]})]})})]})},ws=()=>{var Fo,To,Do,Ro;const[r,C]=l.useState(null),[n,L]=l.useState(!1);l.useState(null);const[E,H]=l.useState([]),[pe,I]=l.useState([]),[W,X]=l.useState(!0);l.useState(!1);const[Se,V]=l.useState(!1),[P,z]=l.useState(!1),[x,re]=l.useState(null),[ne,Ee]=l.useState(null),[i,f]=l.useState({fecha_fin:Y,fecha_inicio:Y,nombre:"",cantidad_servicios:0,monto:0,status:"",vigencia:"",uid:"",fechaCreacion:Y.fromDate(new Date)}),[y,w]=l.useState([]),[s,b]=l.useState({image_perfil:"",nombre:"",email:"",phone:"",rif:"",status:"",Direccion:"",ubicacion:{lat:0,lng:0},LinkFacebook:"",LinkTiktok:"",LinkInstagram:"",estado:"",whatsapp:"",newLogoFile:null,rifIdFiscal:"",permisoOperacion:"",logotipoNegocio:"",fotoFrenteTaller:"",fotoInternaTaller:"",rifIdFiscal_file:null,permisoOperacion_file:null,logotipoNegocio_file:null,fotoFrenteTaller_file:null,fotoInternaTaller_file:null});l.useState(null);const[m,c]=l.useState({pagoMovil:!1,transferencia:!1,puntoVenta:!1,zinli:!1,efectivo:!1,zelle:!1,tarjetaCreditoN:!1,tarjetaCreditoI:!1}),u=location.pathname.substring(location.pathname.lastIndexOf("/")+1),p=_t(),O=Ct(o=>o.auth.user.authority),v=O==null?void 0:O.includes("Admin"),U=async()=>{X(!0);try{const o=Z(S,"Usuarios",u),t=(await ho(o)).data()||null;re(t);const g=(t==null?void 0:t.metodos_pago)||{};c(_=>({..._,...g}));const h=(t==null?void 0:t.subscripcion_actual)||null;L(!!h);const F=We(Q(S,"Subscripciones"),Ye("taller_uid","==",u)),G=(await se(F)).docs.map(_=>{const d=_.data();return{uid:_.id,nombre:d.nombre||"",monto:d.monto||"0",vigencia:d.vigencia||"",status:d.status||"",cantidad_servicios:d.cantidad_servicios||0,fecha_fin:d.fecha_fin||"no hay fecha",fecha_inicio:d.fecha_inicio||"no hay fecha",taller_uid:d.taller_uid||"",fechaCreacion:Y.fromDate(new Date)}}),Te=We(Q(S,"Servicios"),Ye("uid_taller","==",u)),io=(await se(Te)).docs.map(_=>{const d=_.data();return{uid_servicio:_.id,nombre_servicio:(d==null?void 0:d.nombre_servicio)||"",descripcion:(d==null?void 0:d.descripcion)||"",precio:(d==null?void 0:d.precio)||"0",estatus:d==null?void 0:d.estatus,taller:(d==null?void 0:d.taller)||"",puntuacion:(d==null?void 0:d.puntuacion)||"0",uid_taller:(d==null?void 0:d.uid_taller)||"",uid_categoria:(d==null?void 0:d.uid_categoria)||"",nombre_categoria:(d==null?void 0:d.nombre_categoria)||"",subcategoria:(d==null?void 0:d.subcategoria)||[],garantia:(d==null?void 0:d.garantia)||"",typeService:(d==null?void 0:d.typeService)||"local",service_image:(d==null?void 0:d.service_image)||(d==null?void 0:d.imagenes)||[]}}),lo=(await se(Q(S,"Planes"))).docs.map(_=>({uid:_.id,nombre:_.data().nombre||"",descripcion:_.data().descripcion||"",monto:_.data().monto||0,status:_.data().status||"",vigencia:_.data().vigencia||"",cantidad_servicios:_.data().cantidad_servicios||0}));C(t),H(io),I(lo),f(h),w(G);const Ue=h==null?void 0:h.fecha_fin;if(Ue){const _=ie(Ue);console.log("aqui la vigencia w",_),Ee(_)}b({nombre:(t==null?void 0:t.nombre)??"",image_perfil:(t==null?void 0:t.image_perfil)??"",email:(t==null?void 0:t.email)??"",phone:(t==null?void 0:t.phone)??"",rif:(t==null?void 0:t.rif)??"",status:(t==null?void 0:t.status)??"",Direccion:(t==null?void 0:t.Direccion)??"",LinkFacebook:(t==null?void 0:t.LinkFacebook)??"",LinkInstagram:(t==null?void 0:t.LinkInstagram)??"",LinkTiktok:(t==null?void 0:t.LinkTiktok)??"",whatsapp:(t==null?void 0:t.whatsapp)??"",estado:(t==null?void 0:t.estado)??"",ubicacion:t!=null&&t.ubicacion?{lat:t.ubicacion.lat,lng:t.ubicacion.lng}:{lat:0,lng:0},newLogoFile:(t==null?void 0:t.newLogoFile)??null,rifIdFiscal:(t==null?void 0:t.rifIdFiscal)??"",permisoOperacion:(t==null?void 0:t.permisoOperacion)??"",logotipoNegocio:(t==null?void 0:t.logotipoNegocio)??"",fotoFrenteTaller:(t==null?void 0:t.fotoFrenteTaller)??"",fotoInternaTaller:(t==null?void 0:t.fotoInternaTaller)??"",rifIdFiscal_file:null,permisoOperacion_file:null,logotipoNegocio_file:null,fotoFrenteTaller_file:null,fotoInternaTaller_file:null})}catch(o){console.error("Error al obtener los datos del cliente:",o),N.push(e.jsx(j,{title:"Error",children:"Ocurrio un error al cargar los datos del cliente."}))}finally{X(!1)}};l.useEffect(()=>{U()},[]);const ie=o=>{const a=Math.floor(Date.now()/1e3),g=o.seconds-a;return Math.ceil(g/(60*60*24))},le=o=>{const a=new Date(o.seconds*1e3),t=String(a.getDate()).padStart(2,"0"),g=String(a.getMonth()+1).padStart(2,"0"),h=a.getFullYear();return`${t}/${g}/${h}`},M=o=>{if(!o)return"Documento existente";try{const a=decodeURIComponent(o),t=a.match(/\/documents\/[^\/]+\/([^?]+)/)||a.match(/documents%2F[^%]+%2F([^?%]+)/);if(t&&t[1]){const T=t[1];if(T.includes("."))return T}const g=a.split("/"),F=g[g.length-1].split("?")[0];return F&&F.includes(".")?F:"Documento existente"}catch(a){return console.error("Error extrayendo nombre del archivo:",a),"Documento existente"}},ce=async o=>{try{const a=Z(S,"Usuarios",u),t=Z(Q(S,"Subscripciones")),g=o.monto===0||o.monto<.01&&o.monto>-.01,h=g?"Aprobado":"Por Aprobar",F=new Date,T=parseInt(o.vigencia,10)||30,G=new Date(F);G.setDate(F.getDate()+T);const Te={uid:t.id,nombre:o.nombre,monto:o.monto,vigencia:o.vigencia,cantidad_servicios:o.cantidad_servicios,status:h,taller_uid:u,fechaCreacion:Y.fromDate(new Date),...g&&{fecha_inicio:Y.fromDate(F),fecha_fin:Y.fromDate(G)}};await St(t,Te),await ge(a,{subscripcion_actual:{uid:t.id,nombre:o.nombre,monto:o.monto,vigencia:o.vigencia,cantidad_servicios:o.cantidad_servicios,status:h,fecha_inicio:Y.fromDate(F),fecha_fin:Y.fromDate(G)}}),L(!0),await U(),bo(),console.log("Subscripción actualizada y guardada en Subscripciones."),N.push(e.jsx(j,{title:"Éxito",type:"success",children:g?"Se ha subscrito correctamente al plan gratuito. Tu plan está activo.":"Se ha subscrito correctamente a este plan. Espera la aprobación del pago."}))}catch(a){console.error("Error al guardar la subscripción:",a),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un error al subscribirse a este plan. Inténtalo nuevamente."}))}},J=({title:o,value:a})=>e.jsxs("div",{children:[e.jsx("span",{children:o}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:a})]}),Je=(o,a)=>{$e(t=>{const g=t.filter(h=>h.id!==o);return a!==""&&g.push({id:o,value:a}),g})},de=o=>{const{name:a,value:t}=o.target;b(g=>({...g,[a]:t}))},[xe,Jo]=l.useState({facebook:"",instagram:"",tiktok:"",whatsapp:""}),Qo=(o,a)=>({facebook:/^(https?:\/\/)?(www\.)?facebook\.com\/.+$/,instagram:/^(https?:\/\/)?(www\.)?instagram\.com\/.+$/,tiktok:/^(https?:\/\/)?(www\.)?tiktok\.com\/.+$/})[a].test(o)?"":`La URL ingresada no es válida para ${a}.`,Qe=(o,a)=>{const{value:t}=o.target;b(h=>({...h,[`Link${a.charAt(0).toUpperCase()+a.slice(1)}`]:t}));const g=Qo(t,a);Jo(h=>({...h,[a]:g}))},Xo=async()=>{var o;if(!s.nombre||s.nombre.trim()===""){N.push(e.jsx(j,{title:"Error",children:"El nombre no puede estar vacío."}));return}if(!s.phone||!/^[1-9]\d*$/.test(s.phone)){N.push(e.jsx(j,{title:"Error",children:"El teléfono debe contener solo números y no puede comenzar con 0."}));return}if(s.whatsapp&&!/^[1-9]\d*$/.test(s.whatsapp)){N.push(e.jsx(j,{title:"Error",children:"El WhatsApp debe contener solo números y no puede comenzar con 0."}));return}if(!s.rif||!/^[JVEGCP]-\d+$/.test(s.rif)){N.push(e.jsx(j,{title:"Error",children:"El RIF debe estar en un formato válido (Ejemplo: J-12345678)."}));return}if(!s.Direccion||s.Direccion.trim()===""){N.push(e.jsx(j,{title:"Error",children:"La Direccion no puede estar vacía."}));return}if(!s.status){N.push(e.jsx(j,{title:"Error",children:"Debes seleccionar un estatus."}));return}if(!s.estado){N.push(e.jsx(j,{title:"Error",children:"Debes seleccionar un estado."}));return}if(!s.rifIdFiscal_file&&!s.rifIdFiscal){N.push(e.jsx(j,{title:"Error",children:"El RIF ID Fiscal es obligatorio. Debes subir un archivo o mantener el existente."}));return}if(!s.fotoFrenteTaller_file&&!s.fotoFrenteTaller){N.push(e.jsx(j,{title:"Error",children:"La foto del frente del taller es obligatoria. Debes subir un archivo o mantener el existente."}));return}if(!s.fotoInternaTaller_file&&!s.fotoInternaTaller){N.push(e.jsx(j,{title:"Error",children:"La foto interna del taller es obligatoria. Debes subir un archivo o mantener el existente."}));return}try{const a=Q(S,"Usuarios"),t=await se(a);if(t.docs.some(D=>D.data().rif===s.rif&&D.id!==u)){N.push(e.jsx(j,{title:"Error",children:"El RIF ya está registrado. Por favor, verifica e intenta con otro."}));return}if(t.docs.some(D=>D.data().phone===s.phone&&D.id!==u)){N.push(e.jsx(j,{title:"Error",children:"El teléfono ya está registrado. Por favor, verifica e intenta con otro."}));return}let F=s.image_perfil;if(s.newLogoFile){const R=(o=decodeURIComponent(s.image_perfil).split("/").pop())==null?void 0:o.split("?")[0],A=`${u}_`,De=R==null?void 0:R.match(/_(\d+)\.jpg$/),Ne=De?parseInt(De[1],10):0,te=`${A}${Ne+1}.jpg`,co=Ce(Oe,`profileImages/${R}`);try{await Mo(co)}catch(Oo){console.error("Error al eliminar la imagen anterior:",Oo)}const Re=Ce(Oe,`profileImages/${te}`);await He(Re,s.newLogoFile),F=await Ve(Re)}const T=async(D,R)=>{try{const A=D.split("/"),Ne=A[A.length-1].split("?")[0],te=Ce(Oe,`documents/${u}/${Ne}`);await Mo(te),console.log(`Documento ${R} eliminado del storage`)}catch(A){console.error(`Error eliminando documento ${R} del storage:`,A)}},G=async(D,R,A,De=!1)=>{var Ne;if(De&&A)return await T(A,R),null;if(!D)return A||null;try{A&&await T(A,R);const te=(Ne=D.name.split(".").pop())==null?void 0:Ne.toLowerCase();if(!te)return console.warn(`No se pudo obtener la extensión del archivo: ${R}`),A||null;const co=`${R}.${te}`,Re=Ce(Oe,`documents/${u}/${co}`);return await He(Re,D),await Ve(Re)}catch(te){return console.error(`Error subiendo ${R}:`,te),A||null}},Te=!s.rifIdFiscal_file&&!s.rifIdFiscal&&!!(x!=null&&x.rifIdFiscal),Lo=!s.permisoOperacion_file&&!s.permisoOperacion&&!!(x!=null&&x.permisoOperacion),io=!s.logotipoNegocio_file&&!s.logotipoNegocio&&!!(x!=null&&x.logotipoNegocio),Po=!s.fotoFrenteTaller_file&&!s.fotoFrenteTaller&&!!(x!=null&&x.fotoFrenteTaller),lo=!s.fotoInternaTaller_file&&!s.fotoInternaTaller&&!!(x!=null&&x.fotoInternaTaller),Ue=[G(s.rifIdFiscal_file||null,"rifIdFiscal",s.rifIdFiscal||(x==null?void 0:x.rifIdFiscal)||void 0,Te),G(s.permisoOperacion_file||null,"permisoOperacion",s.permisoOperacion||(x==null?void 0:x.permisoOperacion)||void 0,Lo),G(s.logotipoNegocio_file||null,"logotipoNegocio",s.logotipoNegocio||(x==null?void 0:x.logotipoNegocio)||void 0,io),G(s.fotoFrenteTaller_file||null,"fotoFrenteTaller",s.fotoFrenteTaller||(x==null?void 0:x.fotoFrenteTaller)||void 0,Po),G(s.fotoInternaTaller_file||null,"fotoInternaTaller",s.fotoInternaTaller||(x==null?void 0:x.fotoInternaTaller)||void 0,lo)],_=await Promise.all(Ue),d={};["rifIdFiscal","permisoOperacion","logotipoNegocio","fotoFrenteTaller","fotoInternaTaller"].forEach((D,R)=>{_[R]!==void 0&&(d[D]=_[R])});const vt=Z(S,"Usuarios",u),me={...s,image_perfil:F,...d};if(delete me.newLogoFile,delete me.rifIdFiscal_file,delete me.permisoOperacion_file,delete me.logotipoNegocio_file,delete me.fotoFrenteTaller_file,delete me.fotoInternaTaller_file,await ge(vt,me),C({...s,image_perfil:F}),z(!1),U(),console.log("Datos actualizados correctamente",s),console.log("Datos originales",x),(s==null?void 0:s.status)!==(x==null?void 0:x.status)){console.log("Cambio de estado kelfsklflksflks");try{await Et.post("https://apisolvers.solversapp.com/api/usuarios/sendNotification",{token:x==null?void 0:x.token,title:"Cambio de estatus",body:"Hola, su usuario ha cambiado de estado "+(s==null?void 0:s.status)+". Cierre sesión y vuelva a ingresar por favor.",secretCode:"Cambio de estado"})}catch(D){console.error("Error al enviar notificación:",D)}}N.push(e.jsx(j,{title:"Éxito",type:"success",children:"Datos de Usuario actualizados correctamente."}))}catch(a){console.error("Error al actualizar los datos:",a),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un error al actualizar los datos del usuario. Inténtalo nuevamente."}))}},et=async()=>{try{const o=Z(S,"Usuarios",u);await ge(o,{metodos_pago:m}),N.push(e.jsx(j,{title:"Éxito",type:"success",children:"Métodos de pago actualizados correctamente."}))}catch(o){console.error("Error al guardar los métodos de pago:",o),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un error al actualizar los métodos de pago. Inténtalo nuevamente."}))}},ot=[{name:"Pago móvil",icon:e.jsx(Zt,{}),dbKey:"pagoMovil"},{name:"Transferencias bancarias",icon:e.jsx(Gt,{}),dbKey:"transferencia"},{name:"Punto de venta",icon:e.jsx(uo,{}),dbKey:"puntoVenta"},{name:"Zinli",icon:e.jsx(Bo,{}),dbKey:"zinli"},{name:"Efectivo",icon:e.jsx(Bo,{}),dbKey:"efectivo"},{name:"Zelle",icon:e.jsx(Ht,{}),dbKey:"zelle"},{name:"Tarjetas de crédito nacional",icon:e.jsx(uo,{}),dbKey:"tarjetaCreditoN"},{name:"Tarjetas de crédito internacional",icon:e.jsx(uo,{}),dbKey:"tarjetaCreditoI"}],bo=()=>V(!1),tt=()=>z(!0),[Ae,$e]=l.useState([]),[Xe,eo]=l.useState([]),{TabNav:oo,TabList:at,TabContent:to}=zo,jo=o=>{Co(o),_o(!0)},st=l.useMemo(()=>[{header:"Nombre del Servicio",accessorKey:"nombre_servicio"},{header:"Precio",accessorKey:"precio",cell:({row:o})=>`$${parseFloat(o.original.precio).toFixed(2)}`},{header:"Estatus",accessorKey:"estatus",cell:({row:o})=>{const[a,t]=l.useState(o.original.estatus??!1),g=async h=>{if(h===!0&&(i==null?void 0:i.status)!=="Aprobado"){N.push(e.jsx(j,{title:"Plan no activo",type:"warning",children:"No puedes encender servicios. Tu plan debe estar activo y aprobado."}));return}t(h);const F=E.map(T=>T.uid_servicio===o.original.uid_servicio?{...T,estatus:h}:T);H(F);try{const T=Z(S,"Servicios",o.original.uid_servicio);await ge(T,{estatus:h}),console.log("Estado del servicio actualizado")}catch(T){console.error("Error al actualizar el estado del servicio:",T)}};return e.jsx("div",{children:e.jsx(Ft,{checked:a,onChange:()=>g(!a)})})}},{header:"Acciones",id:"actions",cell:({row:o})=>e.jsx("div",{className:"",children:e.jsx(ue,{size:"sm",variant:"solid",onClick:()=>jo(o.original),className:"text-blue-900 hover:bg-blue-700",children:e.jsx(Dt,{})})})}],[i,E,jo]),rt=[{header:"Nombre del Plan",accessorKey:"nombre"},{header:"Monto",accessorKey:"monto",cell:({getValue:o})=>{const a=o();return a===0||a<.01&&a>-.01?"Gratis":a}},{header:"Descripcion",accessorKey:"descripcion"},{header:"Cantidad de servicios",accessorKey:"cantidad_servicios"}],nt=[{header:"Nombre del Plan",accessorKey:"nombre"},{header:"Monto",accessorKey:"monto",cell:({getValue:o})=>{const a=o();return a===0||a<.01&&a>-.01?"Gratuito":`$${a}`}},{header:"vigencia",accessorKey:"vigencia"},{header:"Fecha de vencimiento",accessorKey:"fecha_fin",cell:({row:o})=>`${le(o.original.fecha_fin)}`}],{Tr:fe,Th:Be,Td:qe,THead:ao,TBody:so,Sorter:Qt}=Ke,ro=go({data:E,columns:st,state:{sorting:Xe,columnFilters:Ae},onSortingChange:eo,onColumnFiltersChange:$e,getCoreRowModel:po(),getSortedRowModel:xo(),getFilteredRowModel:fo()}),No=go({data:pe,columns:rt,state:{sorting:Xe,columnFilters:Ae},onSortingChange:eo,onColumnFiltersChange:$e,getCoreRowModel:po(),getSortedRowModel:xo(),getFilteredRowModel:fo()}),yo=go({data:y,columns:nt,state:{sorting:Xe,columnFilters:Ae},onSortingChange:eo,onColumnFiltersChange:$e,getCoreRowModel:po(),getSortedRowModel:xo(),getFilteredRowModel:fo()}),[ee,it]=l.useState(1),oe=6,vo=ro.getRowModel().rows.length,wo=o=>{console.log("onPaginationChange",o),it(o)},[lt,ct]=l.useState(!1),[dt,_o]=l.useState(!1),[mt,Co]=l.useState(null),[ut,So]=l.useState(!1),[K,Eo]=l.useState(null),[k,he]=l.useState(1),[be,je]=l.useState({x:0,y:0}),[Ie,ze]=l.useState(!1),[ke,gt]=l.useState({x:0,y:0}),no=()=>{ct(o=>!o)},Fe=(o,a,t)=>{Eo({url:o,name:a,type:t}),So(!0),he(1),je({x:0,y:0})},Io=()=>{So(!1),Eo(null),he(1),je({x:0,y:0}),ze(!1)},pt=()=>{he(o=>Math.min(o+.25,3))},xt=()=>{he(o=>Math.max(o-.25,.5))},ft=()=>{he(1),je({x:0,y:0})},ht=o=>{if(o.ctrlKey||o.metaKey){o.preventDefault();const a=o.deltaY>0?-.1:.1;he(t=>Math.max(.5,Math.min(3,t+a)))}},bt=o=>{k>1&&(K==null?void 0:K.type)==="image"&&(ze(!0),gt({x:o.clientX-be.x,y:o.clientY-be.y}),o.preventDefault())},jt=o=>{if(Ie&&k>1){const a=o.clientX-ke.x,t=o.clientY-ke.y;je({x:a,y:t})}},ko=()=>{ze(!1)};l.useEffect(()=>{k===1&&je({x:0,y:0})},[k]),l.useEffect(()=>{if(Ie){const o=t=>{const g=t.clientX-ke.x,h=t.clientY-ke.y;je({x:g,y:h})},a=()=>{ze(!1)};return document.addEventListener("mousemove",o),document.addEventListener("mouseup",a),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)}}},[Ie,ke]);const Nt=()=>{_o(!1),Co(null)},yt=()=>{U()};return e.jsxs(It,{className:"min-h-screen overflow-y-auto pb-8",children:[v&&e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{onClick:()=>p(`${kt}/garages`),className:"flex items-center text-blue-900 mb-3 ml-2 px-4 py-2 bg-blue-100 rounded-lg hover:bg-blue-200 transition duration-200",children:[e.jsx(Rt,{className:"mr-2"}),e.jsx("span",{children:"Volver"})]})}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 pb-8",children:[e.jsxs(Ao,{children:[e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{className:"bg-[#1d1e56] rounded-md p-2 hover:bg-[#1E3a8a] text-white",onClick:tt,children:"Editar"})}),e.jsxs("div",{className:"flex flex-col xl:justify-between min-w-[260px] h-full 2xl:min-w-[360px] mx-auto",children:[e.jsxs("div",{className:"flex xl:flex-col items-center gap-4",children:[e.jsx($o,{size:90,shape:"circle",src:(r==null?void 0:r.image_perfil)||"/img/logo/logo-light-streamline.png",className:"p-2 bg-white shadow-lg"}),e.jsx("h4",{className:"font-bold",children:(r==null?void 0:r.nombre)||"Nombre no disponible"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-y-7 gap-x-4 mt-8",children:[e.jsx(J,{title:"Correo electronico",value:(r==null?void 0:r.email)||"Correo no disponible"}),e.jsx(J,{title:"Numero de telefono",value:(r==null?void 0:r.phone)||"Telefono no disponible"}),e.jsx(J,{title:"Rif",value:(r==null?void 0:r.rif)||"Rif no disponible"}),e.jsx(J,{title:"Estado",value:(r==null?void 0:r.estado)||"Estado no disponible"}),e.jsx(J,{title:"Estatus",value:(r==null?void 0:r.status)||"Estatus no disponible"}),e.jsx(J,{title:"Direccion",value:(r==null?void 0:r.Direccion)||"Direccion no disponible"}),r!=null&&r.ubicacion?e.jsx(Vt,{center:{lat:r.ubicacion.lat,lng:r.ubicacion.lng},markers:[{lat:r.ubicacion.lat,lng:r.ubicacion.lng}]}):"Ubicación no disponible",e.jsxs("div",{className:"mb-7",children:[e.jsx("span",{children:"Redes Sociales"}),e.jsx("div",{className:"flex mt-4 gap-2",children:r!=null&&r.LinkFacebook||r!=null&&r.LinkInstagram||r!=null&&r.whatsapp||r!=null&&r.LinkTiktok?e.jsxs(e.Fragment,{children:[r.LinkFacebook&&e.jsx("a",{href:r.LinkFacebook,target:"_blank",rel:"noopener noreferrer",title:r.LinkFacebook,children:e.jsx(ue,{shape:"circle",size:"sm",icon:e.jsx(Lt,{className:"text-[#1773ea]"})})}),r.LinkInstagram&&e.jsx("a",{href:r.LinkInstagram,target:"_blank",rel:"noopener noreferrer",title:r.LinkInstagram,children:e.jsx(ue,{shape:"circle",size:"sm",icon:e.jsx(Pt,{className:"text-[#E1306C]"})})}),r.LinkTiktok&&e.jsx("a",{href:r.LinkTiktok,target:"_blank",rel:"noopener noreferrer",title:r.LinkTiktok,children:e.jsx(ue,{shape:"circle",size:"sm",icon:e.jsx(Ot,{className:"text-black"})})}),r.whatsapp&&e.jsx("a",{href:`https://wa.me/${r.whatsapp}?text=${encodeURIComponent("Hola, quiero más información sobre el servicio")}`,target:"_blank",rel:"noopener noreferrer",title:r.whatsapp,children:e.jsx(ue,{shape:"circle",size:"sm",icon:e.jsx(Mt,{className:"text-[#25d366]"})})})]}):e.jsx("p",{className:"text-gray-500",children:"No hay redes sociales disponibles"})})]})]})]})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs(zo,{defaultValue:"tab1",children:[e.jsxs(at,{children:[e.jsx(oo,{value:"tab1",children:"Planes"}),e.jsx(oo,{value:"tab2",children:"Servicios"}),e.jsx(oo,{value:"tab3",children:"Documentos"})]}),e.jsx("div",{className:"w-full",children:e.jsx(to,{value:"tab1",children:e.jsxs("div",{className:"mb-8 mt-4",children:[e.jsx("h6",{className:"mb-4",children:"Subscripción"}),e.jsx(Ao,{bordered:!0,className:"mb-4",children:n?e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 p-4 border rounded-lg shadow-md bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($o,{className:"bg-transparent",shape:"circle",icon:e.jsx(zt,{className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:(i==null?void 0:i.nombre)||"Cargando..."}),e.jsx(qt,{className:`rounded-md border-0 mx-2 ${(i==null?void 0:i.status)==="Aprobado"?"bg-green-100 text-green-400":(i==null?void 0:i.status)==="Vencido"?"bg-red-100 text-red-400":"bg-yellow-100 text-yellow-400"}`,children:(i==null?void 0:i.status)||"Pendiente"})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Vigencia:"," ",(i==null?void 0:i.vigencia)??"---"," ","días"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Monto mensual:"," ",e.jsx("span",{className:"font-bold text-gray-800",children:(i==null?void 0:i.monto)!==void 0&&(i==null?void 0:i.monto)!==null?i.monto===0||i.monto<.01&&i.monto>-.01?"Gratis":`$${i.monto}`:"---"})]}),(i==null?void 0:i.status)==="Aprobado"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs ml-2 text-gray-600",children:[ne??"---"," ","días restantes"]}),e.jsxs("p",{className:"text-xs ml-2 text-gray-600",children:["Fecha de vencimiento:"," ",e.jsx("span",{className:"text-xs text-gray-600",children:i.fecha_fin?le(i.fecha_fin):"Fecha no disponible"})]})]})]})]})]}),(i==null?void 0:i.status)==="Vencido"&&e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{onClick:()=>V(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200",children:"Elegir Plan"}),(i==null?void 0:i.uid)&&e.jsx(Ko,{talleruid:u,subscriptionId:(i==null?void 0:i.uid)||""})]}),(i==null?void 0:i.status)==="Aprobado"&&e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx("button",{onClick:()=>V(!0),className:"bg-blue-900 rounded-md p-2 text-white hover:bg-blue-700",children:"Renovar Pago"})}),(i==null?void 0:i.status)==="Por Aprobar"&&e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(Ko,{talleruid:u,subscriptionId:(i==null?void 0:i.uid)||""})})]}):e.jsxs("div",{className:"flex justify-end",children:[e.jsx("p",{className:"text-xs mr-64 mt-3",children:"Puede visualizar y suscribirse a un plan para su taller..."}),e.jsx("button",{onClick:()=>V(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200",children:"Ver Planes"})]})}),e.jsx("div",{children:e.jsxs("div",{className:"p-4 rounded-lg shadow",children:[e.jsx("h6",{className:"mb-6 flex justify-start mt-4",children:"Historial de Subscripciones"}),e.jsxs(Ke,{className:"w-full rounded-lg",children:[e.jsx(ao,{children:yo.getHeaderGroups().map(o=>e.jsx(fe,{children:o.headers.map(a=>e.jsx(Be,{colSpan:a.colSpan,children:a.isPlaceholder?null:e.jsx("div",{className:a.column.getCanSort()?"cursor-pointer select-none":"",onClick:a.column.getToggleSortingHandler(),children:we(a.column.columnDef.header,a.getContext())})},a.id))},o.id))}),e.jsx(so,{children:yo.getRowModel().rows.slice((ee-1)*oe,ee*oe).map(o=>e.jsx(fe,{children:o.getVisibleCells().map(a=>e.jsx(qe,{children:we(a.column.columnDef.cell,a.getContext())},a.id))},o.id))})]}),e.jsx(qo,{onChange:wo,currentPage:ee,totalRows:vo,rowsPerPage:oe})]})}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 p-4",children:ot.map(o=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ut,{checked:m[o.dbKey]||!1,onChange:a=>{c(t=>({...t,[o.dbKey]:a}))}}),e.jsx("span",{children:o.icon}),e.jsx("span",{children:o.name})]},o.name))}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:et,className:"px-4 py-2 bg-[#1d1e56] text-white rounded-md hover:bg-blue-900 focus:outline-none",children:"Guardar"})})]})})}),e.jsx(to,{value:"tab2",children:e.jsx("div",{className:"w-full h-full",children:e.jsxs("div",{className:"p-4 rounded-lg",children:[e.jsx("h6",{className:"mb-6 flex justify-start mt-4",children:"Lista de Servicios"}),e.jsxs(Ke,{className:"w-full rounded-lg",children:[e.jsx(ao,{children:ro.getHeaderGroups().map(o=>e.jsx(fe,{children:o.headers.map(a=>e.jsx(Be,{colSpan:a.colSpan,children:a.isPlaceholder?null:e.jsx("div",{className:a.column.getCanSort()?"cursor-pointer select-none":"",onClick:a.column.getToggleSortingHandler(),children:we(a.column.columnDef.header,a.getContext())})},a.id))},o.id))}),e.jsx(so,{children:ro.getRowModel().rows.slice((ee-1)*oe,ee*oe).map(o=>e.jsx(fe,{children:o.getVisibleCells().map(a=>e.jsx(qe,{children:we(a.column.columnDef.cell,a.getContext())},a.id))},o.id))})]}),e.jsx(qo,{onChange:wo,currentPage:ee,totalRows:vo,rowsPerPage:oe})]})})}),e.jsx(to,{value:"tab3",children:e.jsxs("div",{className:"w-full h-full p-4",children:[e.jsx("h6",{className:"mb-6 flex justify-start mt-4",children:"Documentos del Taller"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[(r==null?void 0:r.rifIdFiscal)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Fe(r.rifIdFiscal,"RIF ID Fiscal",r.rifIdFiscal.includes(".pdf")?"pdf":"image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:r.rifIdFiscal.includes(".pdf")?e.jsxs("div",{className:"text-center",children:[e.jsx(ye,{className:"w-16 h-16 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"RIF ID Fiscal"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF"})]}):e.jsx("img",{src:r.rifIdFiscal,alt:"RIF ID Fiscal",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.permisoOperacion)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Fe(r.permisoOperacion,"Permiso de Operación",r.permisoOperacion.includes(".pdf")?"pdf":"image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:r.permisoOperacion.includes(".pdf")?e.jsxs("div",{className:"text-center",children:[e.jsx(ye,{className:"w-16 h-16 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Permiso de Operación"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF"})]}):e.jsx("img",{src:r.permisoOperacion,alt:"Permiso de Operación",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.logotipoNegocio)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Fe(r.logotipoNegocio,"Logotipo Negocio","image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.jsx("img",{src:r.logotipoNegocio,alt:"Logotipo Negocio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.fotoFrenteTaller)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Fe(r.fotoFrenteTaller,"Foto Frente Taller","image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.jsx("img",{src:r.fotoFrenteTaller,alt:"Foto Frente Taller",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.fotoInternaTaller)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>Fe(r.fotoInternaTaller,"Foto Interna Taller","image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.jsx("img",{src:r.fotoInternaTaller,alt:"Foto Interna Taller",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Le,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]})]}),!(r!=null&&r.rifIdFiscal)&&!(r!=null&&r.permisoOperacion)&&!(r!=null&&r.logotipoNegocio)&&!(r!=null&&r.fotoFrenteTaller)&&!(r!=null&&r.fotoInternaTaller)&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(mo,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-semibold",children:"No hay documentos disponibles"}),e.jsx("p",{className:"text-sm",children:"Los documentos aparecerán aquí una vez que se suban"})]})]})})]})})]}),e.jsx(Go,{width:1e3,isOpen:Se,onClose:bo,children:e.jsxs("div",{className:"table-responsive",children:[e.jsx("h2",{className:"mb-4",children:"Planes de Subscripción"}),e.jsx("div",{className:"p-2 rounded-lg shadow",children:e.jsxs(Ke,{className:"w-full rounded-lg",children:[e.jsx(ao,{children:No.getHeaderGroups().map(o=>e.jsxs(fe,{children:[o.headers.map(a=>{var t,g;return e.jsx(Be,{colSpan:a.colSpan,children:a.isPlaceholder?null:e.jsxs("div",{className:a.column.getCanSort()?"cursor-pointer select-none":"",onClick:a.column.getToggleSortingHandler(),children:[we(a.column.columnDef.header,a.getContext()),a.column.getCanFilter()?e.jsx("input",{type:"text",value:((g=(t=Ae.find(h=>h.id===a.id))==null?void 0:t.value)==null?void 0:g.toString())||"",onChange:h=>Je(a.id,h.target.value),placeholder:"Buscar",className:"mt-2 p-1 border rounded",onClick:h=>h.stopPropagation()}):null]})},a.id)}),e.jsx(Be,{children:"Acción"})," "]},o.id))}),e.jsx(so,{children:No.getRowModel().rows.slice((ee-1)*oe,ee*oe).map(o=>e.jsxs(fe,{children:[o.getVisibleCells().map(a=>e.jsx(qe,{children:we(a.column.columnDef.cell,a.getContext())},a.id)),e.jsx(qe,{children:e.jsx("button",{className:"bg-[#1d1e56] text-white px-4 py-2 rounded",onClick:()=>ce(o.original),children:"Suscribirse"})})]},o.id))})]})})]})}),P&&e.jsx(Tt,{isOpen:P,title:"Editar Taller",confirmButtonColor:"blue-600",onClose:()=>z(!1),onRequestClose:()=>z(!1),onCancel:()=>z(!1),onConfirm:Xo,children:e.jsxs("div",{className:"max-h-[450px] overflow-y-auto",children:[e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 gap-2",children:e.jsxs("div",{className:"text-center",children:[!s.image_perfil&&!s.newLogoFile?e.jsx(Me,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}):e.jsxs("div",{children:[e.jsx("img",{src:s.newLogoFile?URL.createObjectURL(s.newLogoFile):s.image_perfil,alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}),e.jsx("button",{onClick:()=>b(o=>({...o,newLogoFile:null,image_perfil:""})),className:"mt-2 text-red-500 hover:text-red-700",children:"Quitar Logo"})]}),e.jsx("div",{className:"mt-4 flex text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"logo-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:s.newLogoFile?"Cambiar Logo":"Seleccionar Logo"}),e.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",accept:"image/*",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];b(g=>({...g,newLogoFile:a||null}))}})]})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Nombre"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Nombre",name:"nombre",value:s.nombre,onChange:de})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Correo Electrónico"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Correo Electrónico",disabled:!0,name:"email",value:s.email,onChange:de})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Teléfono"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Teléfono",name:"phone",value:s.phone,onChange:de,onKeyDown:o=>{o.currentTarget.value===""&&o.key==="0"&&o.preventDefault()},onInput:o=>{const a=o.target,t=a.value.replace(/^0+/,"");t!==a.value&&b(g=>({...g,phone:t}))}})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"WhatsApp"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"WhatsApp",name:"whatsapp",value:s.whatsapp,onChange:de,onKeyDown:o=>{o.currentTarget.value===""&&o.key==="0"&&o.preventDefault()},onInput:o=>{const a=o.target,t=a.value.replace(/^0+/,"");t!==a.value&&b(g=>({...g,whatsapp:t}))}})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"RIF:"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsxs("select",{value:((Fo=s.rif)==null?void 0:Fo.split("-")[0])||"J",onChange:o=>b(a=>{var t;return{...a,rif:`${o.target.value}-${((t=a==null?void 0:a.rif)==null?void 0:t.split("-")[1])||""}`}}),className:"mx-2 p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"J",children:"J-"}),e.jsx("option",{value:"V",children:"V-"}),e.jsx("option",{value:"E",children:"E-"}),e.jsx("option",{value:"C",children:"C-"}),e.jsx("option",{value:"G",children:"G-"}),e.jsx("option",{value:"P",children:"P-"})]}),e.jsx("input",{disabled:!0,type:"text",value:((To=s.rif)==null?void 0:To.split("-")[1])||"",onChange:o=>b(a=>{var t;return{...a,rif:`${((t=a==null?void 0:a.rif)==null?void 0:t.split("-")[0])||"J"}-${o.target.value}`}}),className:"p-3 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 mx-2 w-full"})]})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Estado:"}),e.jsxs("select",{name:"estado",value:s.estado,onChange:de,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"",children:"Seleccione un Estado"}),["Amazonas","Anzoátegui","Apure","Aragua","Barinas","Bolívar","Carabobo","Cojedes","Delta Amacuro","Distrito Capital","Falcón","Guárico","Lara","La Guaira","Mérida","Miranda","Monagas","Nueva Esparta","Portuguesa","Sucre","Táchira","Trujillo","Yaracuy","Zulia"].map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Direccion"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"",name:"Direccion",value:s.Direccion,onChange:de})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Mapa"}),e.jsx("button",{type:"button",className:"w-full mt-1 p-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300",onClick:no,children:"Abrir Mapa"})]}),lt&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-3xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Editar ubicación"}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 focus:outline-none",onClick:no,children:"✖"})]}),e.jsx(Yt,{initialLocation:{lat:s.ubicacion.lat,lng:s.ubicacion.lng},onLocationChange:o=>b(a=>({...a,ubicacion:o}))}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300",onClick:no,children:"Guardar"})})]})}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Estatus"}),e.jsxs("select",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",name:"status",value:s.status,onChange:de,children:[e.jsx("option",{value:"Aprobado",children:"Aprobado"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"Rechazado",children:"Rechazado"}),e.jsx("option",{value:"En espera por aprobación",children:"En espera por aprobación"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Facebook"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"URL de Facebook",name:"LinkFacebook",value:s.LinkFacebook,onChange:o=>Qe(o,"facebook")}),xe.facebook&&e.jsx("span",{className:"text-red-500 text-sm",children:xe.facebook})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Instagram"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"URL de Instagram",name:"LinkInstagram",value:s.LinkInstagram,onChange:o=>Qe(o,"instagram")}),xe.instagram&&e.jsx("span",{className:"text-red-500 text-sm",children:xe.instagram})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"TikTok"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"URL de TikTok",name:"LinkTiktok",value:s.LinkTiktok,onChange:o=>Qe(o,"tiktok")}),xe.tiktok&&e.jsx("span",{className:"text-red-500 text-sm",children:xe.tiktok})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4 col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Documentos"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 mb-2",children:["RIF ID Fiscal: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!s.rifIdFiscal_file&&!s.rifIdFiscal?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,.pdf",id:"rifIdFiscal-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,rifIdFiscal_file:a}))}}),e.jsx("label",{htmlFor:"rifIdFiscal-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(mo,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Imágenes o PDF"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.rifIdFiscal_file?s.rifIdFiscal_file.type.includes("pdf")?e.jsx(ye,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}):(Do=s.rifIdFiscal)!=null&&Do.includes(".pdf")?e.jsx(ye,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.rifIdFiscal_file?s.rifIdFiscal_file.name:M(s.rifIdFiscal)}),s.rifIdFiscal_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.rifIdFiscal_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,rifIdFiscal_file:null,rifIdFiscal:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Permisos de Operación:"}),!s.permisoOperacion_file&&!s.permisoOperacion?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,.pdf",id:"permisoOperacion-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,permisoOperacion_file:a}))}}),e.jsx("label",{htmlFor:"permisoOperacion-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(mo,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Imágenes o PDF"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.permisoOperacion_file?s.permisoOperacion_file.type.includes("pdf")?e.jsx(ye,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}):(Ro=s.permisoOperacion)!=null&&Ro.includes(".pdf")?e.jsx(ye,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.permisoOperacion_file?s.permisoOperacion_file.name:M(s.permisoOperacion)}),s.permisoOperacion_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.permisoOperacion_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,permisoOperacion_file:null,permisoOperacion:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Logotipo Negocio:"}),!s.logotipoNegocio_file&&!s.logotipoNegocio?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"logotipoNegocio-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,logotipoNegocio_file:a}))}}),e.jsx("label",{htmlFor:"logotipoNegocio-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(ae,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo imágenes"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.logotipoNegocio_file?s.logotipoNegocio_file.name:M(s.logotipoNegocio)}),s.logotipoNegocio_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.logotipoNegocio_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,logotipoNegocio_file:null,logotipoNegocio:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 mb-2",children:["Foto Frente Taller: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!s.fotoFrenteTaller_file&&!s.fotoFrenteTaller?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"fotoFrenteTaller-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,fotoFrenteTaller_file:a}))}}),e.jsx("label",{htmlFor:"fotoFrenteTaller-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(Me,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo imágenes"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.fotoFrenteTaller_file?s.fotoFrenteTaller_file.name:M(s.fotoFrenteTaller)}),s.fotoFrenteTaller_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.fotoFrenteTaller_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,fotoFrenteTaller_file:null,fotoFrenteTaller:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 mb-2",children:["Foto Interna Taller: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!s.fotoInternaTaller_file&&!s.fotoInternaTaller?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"fotoInternaTaller-upload",className:"sr-only",onChange:o=>{var t;const a=(t=o.target.files)==null?void 0:t[0];a&&b(g=>({...g,fotoInternaTaller_file:a}))}}),e.jsx("label",{htmlFor:"fotoInternaTaller-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(Me,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo imágenes"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.fotoInternaTaller_file?s.fotoInternaTaller_file.name:M(s.fotoInternaTaller)}),s.fotoInternaTaller_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.fotoInternaTaller_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>b(o=>({...o,fotoInternaTaller_file:null,fotoInternaTaller:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]})]})]})}),e.jsx(Jt,{isOpen:dt,onClose:Nt,service:mt,onServiceUpdated:yt}),ut&&K&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:Io,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:K.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mr-4 border-r pr-4",children:[e.jsx("button",{onClick:xt,disabled:k<=.5,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Alejar (Ctrl + Rueda del mouse)",children:e.jsx(At,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 min-w-[60px] text-center",children:[Math.round(k*100),"%"]}),e.jsx("button",{onClick:pt,disabled:k>=3,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Acercar (Ctrl + Rueda del mouse)",children:e.jsx($t,{className:"w-5 h-5"})}),e.jsx("button",{onClick:ft,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",title:"Restablecer zoom",children:e.jsx(Bt,{className:"w-5 h-5"})})]}),e.jsx("button",{onClick:Io,className:"text-gray-500 hover:text-gray-700 focus:outline-none transition-colors",children:e.jsx(ve,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-4 bg-gray-100 flex items-center justify-center relative",onWheel:ht,children:K.type==="pdf"?e.jsx("div",{style:{transform:`scale(${k})`,transformOrigin:"center center",transition:k===1?"transform 0.2s ease-in-out":"none",width:`${100/k}%`,height:`${100/k}%`},children:e.jsx("iframe",{src:K.url,className:"w-full h-full min-h-[600px] border-0",title:K.name})}):e.jsx("img",{src:K.url,alt:K.name,style:{transform:`scale(${k}) translate3d(${be.x/k}px, ${be.y/k}px, 0)`,transformOrigin:"center center",transition:Ie?"none":k===1&&be.x===0&&be.y===0?"transform 0.2s ease-in-out":"none",maxWidth:"100%",maxHeight:"70vh",cursor:k>1?Ie?"grabbing":"grab":"default"},className:"object-contain rounded-lg shadow-lg select-none",onMouseDown:bt,onMouseMove:jt,onMouseUp:ko,onMouseLeave:ko,draggable:!1,onError:o=>{const a=o.target;a.style.display="none";const t=document.createElement("div");t.className="text-center text-gray-500 p-8",t.innerHTML=`
                                            <FaFilePdf class="w-16 h-16 mx-auto mb-4 text-gray-400" />
                                            <p class="text-lg font-semibold">Error al cargar la imagen</p>
                                            <p class="text-sm">No se pudo mostrar el documento</p>
                                        `;const g=a.parentElement;g&&g.appendChild(t)}})}),e.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:e.jsx("a",{href:K.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Abrir en nueva pestaña"})})]})})]})};export{ws as default};
