import{r as m,j as e,a8 as W,a9 as S,aa as te,ag as K,ap as co,b3 as la,ak as ye,al as Be,am as qe,an as V,af as ue,ab as ze,a7 as Ue,aj as Fe,a4 as ca,u as da,ai as ma,ar as ko,as as ua}from"./index-0JW14Cl4.js";import{C as ga,a as pa}from"./Views-ArJd3jpj.js";import{S as fa}from"./Switcher-wa_oD5IZ.js";import{C as Fo}from"./Card-TuPZ2v2_.js";import{A as To}from"./index-jFqavRgw.js";import{B as me}from"./Button-D58LGLsw.js";import{C as xa}from"./ConfirmDialog-HPV2onkn.js";import{h as Te,e as ha,z as ba,B as ja,G as Na,H as ya,I as va,j as he,m as Ie,i as to,k as ae,l as be}from"./index.esm-WNi23VL7.js";import{T as wa}from"./Tag-FFFqS8TW.js";import{ap as _a,aq as so,ar as Do}from"./index.esm-YV82YYEg.js";import{T as Ae}from"./index-a8YK1BSZ.js";import"./Alert-WGdpNIev.js";import"./Badge-ci3jENQ_.js";import"./Calendar-NZF8cyZ8.js";import{C as Ca}from"./index-VCcEXhlG.js";import"./index-0EpNqkF8.js";import{D as Ao}from"./Dialog-PNbmhsuG.js";import{D as Mo}from"./Drawer-cacAKkB7.js";import"./index-TeXUR02l.js";import"./FormItem-aMZDCmbO.js";import{I as ke}from"./Input-mvUTiocb.js";import"./index-f0lBNEsm.js";import"./index-0giiyGbd.js";import"./index-mai8cBh3.js";import{N as j,t as N}from"./toast-BZUDBRx8.js";import{P as Ro}from"./index-b0erAvUs.js";import"./Progress-rjrW8WVo.js";import"./index-phxxI0mK.js";import"./RangeCalendar-T33GG2dJ.js";import"./ScrollBar-iFlxYOtX.js";import"./index-bqDPFWnc.js";import{d as Sa}from"./Select-Lio6vz6X.js";import"./Skeleton-72D-q3Kg.js";import"./index-LutvQtfN.js";import{T as Lo}from"./index-3zjrJiu6.js";import"./index-FiIxSSJg.js";import"./index-RH6RtrUA.js";import"./Tooltip-7ixFulgX.js";import"./Upload-60e6Z-HR.js";import{u as ro,f as je,g as io,a as no,b as lo}from"./index-q-FCLJof.js";import{R as Ea}from"./index.esm--jr3ueid.js";import{M as Ia}from"./index.esm-F6AwlNoP.js";import{S as ka}from"./index.esm-gCiHgHeG.js";import{F as $o,a as Bo,b as $,E as B}from"./formik.esm-Y35JEICj.js";import{c as Ne,g as Me,h as $e,a as M}from"./index.esm-dq2Mrn92.js";import{G as qo,M as zo}from"./esm-c6XMgUKz.js";import"./useMergeRef-Rt_Crb27.js";import"./context-AxDKAhEU.js";import"./useTimeout-1ZYN8nxV.js";import"./CloseButton-MFjMnfDD.js";import"./StatusIcon-AFB-bwed.js";import"./motion-AtCGOUgk.js";import"./useControllableState-0kz-DI5s.js";import"./cloneDeep-s6G8qFQF.js";import"./_getAllKeys-xDBjIaWt.js";import"./_MapCache-5vzp6XNL.js";import"./_baseIsEqual-z3kvFbSD.js";import"./get-9ErrADOi.js";import"./toString-E2JY-uAt.js";import"./floating-ui.react-wwZWrrrF.js";import"./floating-ui.dom-0rLBacrf.js";import"./TimeInput-8bXBKx6z.js";import"./useUniqueId-dRdzrVMw.js";import"./useDidUpdate-72apsg4I.js";import"./index-pO4z0aep.js";import"./index-Jck-JtMN.js";import"./useRootClose-887SIejw.js";import"./isNil-KJxS5irh.js";import"./index-VwLHg0MV.js";import"./chainedFunction-ltcSYACe.js";import"./toConsumableArray-YYxflNc8.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./setPrototypeOf-ahVgEFUp.js";import"./mapCloneElement-A4UKmhr7.js";import"./index.esm-kYnGXkxy.js";import"./index.esm-AHs6zK81.js";const Po=[{codigo:"0102",nombre:"BANCO DE VENEZUELA"},{codigo:"0156",nombre:"100% BANCO"},{codigo:"0172",nombre:"BANCAMIGA BANCO MICROFINANCIERO C A"},{codigo:"0114",nombre:"BANCARIBE"},{codigo:"0171",nombre:"BANCO ACTIVO"},{codigo:"0166",nombre:"BANCO AGRICOLA DE VENEZUELA"},{codigo:"0175",nombre:"BANCO BICENTENARIO DEL PUEBLO"},{codigo:"0128",nombre:"BANCO CARONI"},{codigo:"0163",nombre:"BANCO DEL TESORO"},{codigo:"0115",nombre:"BANCO EXTERIOR"},{codigo:"0151",nombre:"BANCO FONDO COMUN"},{codigo:"0173",nombre:"BANCO INTERNACIONAL DE DESARROLLO"},{codigo:"0105",nombre:"BANCO MERCANTIL"},{codigo:"0191",nombre:"BANCO NACIONAL DE CREDITO"},{codigo:"0138",nombre:"BANCO PLAZA"},{codigo:"0137",nombre:"BANCO SOFITASA"},{codigo:"0104",nombre:"BANCO VENEZOLANO DE CREDITO"},{codigo:"0168",nombre:"BANCRECER"},{codigo:"0134",nombre:"BANESCO"},{codigo:"0177",nombre:"BANFANB"},{codigo:"0146",nombre:"BANGENTE"},{codigo:"0174",nombre:"BANPLUS"},{codigo:"0108",nombre:"BBVA PROVINCIAL"},{codigo:"0157",nombre:"DELSUR BANCO UNIVERSAL"},{codigo:"0169",nombre:"MI BANCO"},{codigo:"0178",nombre:"N58 BANCO DIGITAL BANCO MICROFINANCIERO S A"}],Oo=({subscriptionId:r,talleruid:C})=>{const[i,R]=m.useState("Efectivo"),[E,G]=m.useState([]),[ge,I]=m.useState(!1),[Z,Q]=m.useState(!1),[ve,H]=m.useState(!1),[L,q]=m.useState(!1);m.useEffect(()=>{(async()=>{const u=W(S,"MetodosPago"),P=(await te(u)).docs.map(v=>v.data());G(P.filter(v=>v.status))})()},[]),m.useEffect(()=>{(async()=>{if(C)try{const u=K(S,"Usuarios",C),g=await co(u);if(g.exists()){const v=g.data().subscripcion_actual;v&&v.pago_reportado===!0&&H(!0)}}catch(u){console.error("Error al verificar si ya se reportó el pago:",u)}})()},[C]);const f=l=>{R(l)},se=()=>{ve?q(!0):Q(!0)},re=Ne().shape({monto:Me().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),fechaPago:$e().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),we=Ne().shape({monto:Me().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),numReferencia:M().required("El número de referencia es obligatorio"),bancoDestino:M().required("Selecciona un banco de destino"),bancoOrigen:M().required("Selecciona un banco de origen"),fechaPago:$e().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),n=Ne().shape({monto:Me().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),numReferencia:M().required("El número de referencia es obligatorio"),telefono:M().required("El teléfono es obligatorio").matches(/^[1-9]\d*$/,"El teléfono no puede comenzar con 0 y debe contener solo números"),bancoDestino:M().required("Selecciona un banco de destino"),bancoOrigen:M().required("Selecciona un banco de origen"),fechaPago:$e().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),x=Ne().shape({monto:Me().required("El monto es obligatorio").positive("El monto debe ser positivo").min(1,"El monto debe ser mayor a cero"),correo:M().email("El correo no es válido").required("El correo Zelle es obligatorio"),fechaPago:$e().max(new Date,"La fecha no puede ser futura").required("La fecha es obligatoria")}),y=Ne().shape({...i==="Efectivo"&&re.fields,...i==="Transferencia"&&we.fields,...i==="Pago Móvil"&&n.fields,...i==="Zelle"&&x.fields}),w={metodoPago:"",monto:"",numReferencia:"",telefono:"",correo:"",cedula:"",bancoOrigen:"",bancoDestino:"",fechaPago:"",newLogoFile:null},a=async(l,u)=>{try{const g=W(S,"Subscripciones"),P=await te(g),v=new Date(l.fechaPago),z=`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}-${String(v.getDate()).padStart(2,"0")}`;for(const ie of P.docs){const ne=ie.data(),O=ne.comprobante_pago;if(O&&O.fechaPago){const le=O.fechaPago.toDate();if(`${le.getFullYear()}-${String(le.getMonth()+1).padStart(2,"0")}-${String(le.getDate()).padStart(2,"0")}`===z&&O.monto===parseFloat(l.monto)&&ne.taller_uid===C){if((u==="Pago Móvil"||u==="Transferencia")&&O.numReferencia===l.numReferencia)return{isDuplicate:!0,message:`Ya existe un pago con el número de referencia ${l.numReferencia} en la fecha ${z} para este taller`};if(u==="Zelle"&&O.correo===l.correo)return{isDuplicate:!0,message:`Ya existe un pago con el correo ${l.correo} en la fecha ${z} para este taller`};if(u==="Efectivo")return{isDuplicate:!0,message:`Ya existe un pago en efectivo por el monto $${l.monto} en la fecha ${z} para este taller`}}}}return{isDuplicate:!1,message:""}}catch(g){return console.error("Error al validar duplicidad:",g),{isDuplicate:!1,message:""}}},h=async l=>{if(!r){console.error("Error: subscriptionId no está definido");return}I(!0);try{const u=await a(l,i);if(u.isDuplicate){N.push(e.jsx(j,{title:"Error",type:"danger",children:u.message})),I(!1);return}let g="";if(l.newLogoFile&&i&&C){const ie=la(),ne=new Date().toISOString(),O=`${i}_${C}_${ne}.jpg`,le=l.newLogoFile,Y=ye(ie,`paymentcommitment/${O}`),Ke=await Be(Y,le);g=await qe(Ke.ref)}const P=l.fechaPago?V.fromDate(new Date(l.fechaPago)):null,v={metodo:i,monto:l.monto,fechaPago:P,comprobante:g};i==="Transferencia"&&(v.numReferencia=l.numReferencia??"",v.cedula=l.cedula??"",v.bancoOrigen=l.bancoOrigen??"",v.bancoDestino=l.bancoDestino??""),i==="Pago Móvil"&&(v.cedula=l.cedula,v.telefono=l.telefono,v.bancoOrigen=l.bancoOrigen,v.bancoDestino=l.bancoDestino),i==="Zelle"&&(v.correo=l.correo??"",v.numReferencia=l.numReferencia),console.log(v);const z=K(S,"Subscripciones",r);if(await ue(z,{comprobante_pago:v}),C){const ie=K(S,"Usuarios",C);await ue(ie,{"subscripcion_actual.pago_reportado":!0}),H(!0)}console.log("Pago registrado exitosamente"),N.push(e.jsx(j,{title:"Éxito",type:"success",children:"Se ha registrado el pago correctamente."}))}catch(u){console.error("Error al registrar el pago:",u),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un problema al registrar el pago."}))}finally{I(!1),Q(!1)}},d=E.find(l=>l.tipo_pago===i);return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:se,className:"bg-blue-900 rounded-md p-2 text-white hover:bg-blue-700",children:"Reportar Pago"}),e.jsx(Ao,{isOpen:L,onClose:()=>q(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Pago Ya Reportado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Ya se ha reportado un pago para esta suscripción. No se puede reportar otro pago."}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>q(!1),className:"bg-blue-900 rounded-md p-2 text-white hover:bg-blue-700",children:"Entendido"})})]})}),e.jsx(Mo,{isOpen:Z,onClose:()=>Q(!1),title:"Registrar Pago",children:e.jsx($o,{initialValues:w,onSubmit:h,validationSchema:y,validateOnBlur:!0,validateOnChange:!1,children:({setFieldValue:l,values:u})=>e.jsxs(Bo,{className:"flex flex-col gap-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Selecciona el Método de Pago"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:E==null?void 0:E.map(g=>e.jsx("button",{type:"button",onClick:()=>f(g.tipo_pago),className:`text-sm py-2 px-4 rounded-md ${i===g.tipo_pago?"bg-[#1d1e56] text-white":"bg-gray-200"}`,children:g.tipo_pago},g.tipo_pago))}),i!=="Efectivo"&&d&&e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-4",children:[e.jsx("h5",{className:"font-semibold text-lg",children:"Detalles de la Empresa"}),d.email&&e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",d.email]}),d.num_ref&&e.jsxs("p",{children:[e.jsx("strong",{children:"Número de Referencia:"})," ",d.num_ref]}),d.banco&&e.jsxs("p",{children:[e.jsx("strong",{children:"Banco:"})," ",d.banco]}),d.cedula_rif&&e.jsxs("p",{children:[e.jsx("strong",{children:"Cédula/RIF:"})," ",d.cedula_rif]}),d.cuenta&&e.jsxs("p",{children:[e.jsx("strong",{children:"Cuenta:"})," ",d.cuenta]}),d.status_pago!==void 0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",d.status_pago?"Activo":"Inactivo"]}),d.tipo_cuenta&&e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo de Cuenta:"})," ",d.tipo_cuenta]}),d.telefono&&e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",d.telefono]}),d.titular&&e.jsxs("p",{children:[e.jsx("strong",{children:"Titular:"})," ",d.titular]})]}),e.jsx($,{id:"monto",name:"monto",as:ke,placeholder:"Ingresa el monto en $"}),e.jsx(B,{name:"monto",component:"div",className:"text-red-500"}),e.jsx($,{id:"fechaPago",name:"fechaPago",as:ke,type:"date",placeholder:"Fecha de pago"}),e.jsx(B,{name:"fechaPago",component:"div",className:"text-red-500"}),i==="Pago Móvil"&&e.jsxs(e.Fragment,{children:[e.jsx($,{id:"telefono",name:"telefono",as:ke,placeholder:"Teléfono",onKeyDown:g=>{g.currentTarget.value===""&&g.key==="0"&&g.preventDefault()},onChange:g=>{const P=g.target.value.replace(/^0+/,"");l("telefono",P)}}),e.jsx(B,{name:"telefono",component:"div",className:"text-red-500"})]}),i==="Zelle"&&e.jsx($,{id:"correo",name:"correo",as:ke,placeholder:"Correo Zelle"}),["Transferencia","Pago Móvil"].includes(i)&&e.jsxs(e.Fragment,{children:[e.jsx($,{id:"numReferencia",name:"numReferencia",as:ke,placeholder:"Número de referencia"}),e.jsx(B,{name:"numReferencia",component:"div",className:"text-red-500"})]}),["Transferencia","Pago Móvil"].includes(i)&&e.jsxs(e.Fragment,{children:[e.jsxs($,{id:"bancoDestino",as:"select",name:"bancoDestino",className:"p-2 rounded-md border border-slate-300",children:[e.jsx("option",{value:"",children:"Selecciona Banco de Destino"}),Po.map(g=>e.jsx("option",{value:g.nombre,children:g.nombre},g.codigo))]}),e.jsx(B,{name:"bancoDestino",component:"div",className:"text-red-500"}),e.jsxs($,{id:"bancoOrigen",as:"select",name:"bancoOrigen",className:"p-2 rounded-md border border-slate-300",children:[e.jsx("option",{value:"",children:"Selecciona Banco de Origen"}),Po.map(g=>e.jsx("option",{value:g.nombre,children:g.nombre},g.codigo))]}),e.jsx(B,{name:"bancoOrigen",component:"div",className:"text-red-500"})]}),["Transferencia","Pago Móvil","Zelle"].includes(i)&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 gap-2",children:e.jsxs("div",{className:"text-center",children:[u.newLogoFile?e.jsx("img",{src:URL.createObjectURL(u.newLogoFile),alt:"Logo",className:"w-32 h-32 object-cover rounded-md"}):e.jsx(Te,{className:"text-gray-500 text-center text-3xl"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"fileInput",className:"text-sm font-medium text-blue-600 cursor-pointer",children:"Subir Comprobante de Pago"}),e.jsx("input",{id:"fileInput",name:"newLogoFile",type:"file",className:"hidden",accept:"image/*",onChange:g=>{g.target.files&&g.target.files[0]&&l("newLogoFile",g.target.files[0])}})]})]})})}),e.jsx("button",{type:"submit",className:"w-full py-2 mt-4 bg-blue-900 rounded-md hover:bg-blue-700 text-white",children:"Registrar Pago"})]})})})]})},Fa=({markers:r,center:C})=>{const[i,R]=m.useState([]);return m.useEffect(()=>{R(r)},[r]),e.jsx("div",{style:{height:"50%",width:"100%"},children:e.jsx(qo,{center:C,zoom:10,mapContainerStyle:{height:"400px",width:"100%",marginTop:"10px"},children:i.map((E,G)=>e.jsx(zo,{position:{lat:E.lat,lng:E.lng}},G))})})},Ta=({initialLocation:r,onLocationChange:C})=>{const[i,R]=m.useState(null),[E]=m.useState(17);m.useEffect(()=>{r&&r.lat&&r.lng&&R(r)},[r]);const G=I=>{if(!I.latLng)return;const Z={lat:I.latLng.lat(),lng:I.latLng.lng()};R(Z),C(Z)},ge=I=>{if(I.latLng){const Z={lat:I.latLng.lat(),lng:I.latLng.lng()};R(Z),C(Z)}};return e.jsx("div",{style:{height:"450px",width:"100%"},children:e.jsx(qo,{center:i||{lat:0,lng:0},zoom:E,mapContainerStyle:{height:"400px",width:"100%",marginTop:"10px"},onClick:G,children:i&&e.jsx(zo,{position:i,draggable:!0,onDragEnd:ge})})})},Da=Ne().shape({nombre_servicio:M().required("El nombre del servicio es requerido"),descripcion:M().required("La descripción es requerida"),uid_categoria:M().required("La categoría es requerida"),precio:M().required("El precio es requerido"),garantia:M().required("La garantía es requerida"),typeService:M().required("El tipo de servicio es requerido")}),Ra=({isOpen:r,onClose:C,service:i,onServiceUpdated:R})=>{const[E,G]=m.useState([]),[ge,I]=m.useState([]),[Z,Q]=m.useState([]),[ve,H]=m.useState(!1),[L,q]=m.useState(null),[f,se]=m.useState(!1);m.useEffect(()=>{(async()=>{var y;if(!(!r||!i)){H(!0);try{const w=Ue(W(S,"Categorias"),ze("estatus","==",!0)),h=(await te(w)).docs.map(u=>({id:u.id,...u.data()}));G(h);const d=await co(K(S,"talleres","talleres"));d.exists()&&Q(d.data().talleres||[]);const l={nombre_servicio:(i==null?void 0:i.nombre_servicio)||"",descripcion:(i==null?void 0:i.descripcion)||"",uid_categoria:(i==null?void 0:i.uid_categoria)||"",nombre_categoria:(i==null?void 0:i.nombre_categoria)||"",service_image:(i==null?void 0:i.service_image)||(i==null?void 0:i.imagenes)||[],service_image_files:[],uid_taller:(i==null?void 0:i.uid_taller)||"",taller:(i==null?void 0:i.taller)||"",precio:((y=i==null?void 0:i.precio)==null?void 0:y.toString())||"",garantia:(i==null?void 0:i.garantia)||"",typeService:(i==null?void 0:i.typeService)||"local",subcategoria:(i==null?void 0:i.subcategoria)||[]};q(l),i!=null&&i.uid_categoria&&await re(i.uid_categoria)}catch(w){console.error("Error loading data:",w),N.push(e.jsx(j,{title:"Error",children:"Error al cargar los datos"}))}finally{H(!1)}}})()},[r,i]),m.useEffect(()=>{L!=null&&L.uid_categoria&&E.length>0&&re(L.uid_categoria)},[L==null?void 0:L.uid_categoria,E.length]);const re=async x=>{if(!x){I([]);return}try{const y=Ue(W(S,"Categorias",x,"Subcategorias"),ze("estatus","==",!0)),a=(await te(y)).docs.map(h=>({id:h.id,...h.data()}));I(a)}catch(y){console.error("Error loading subcategories:",y),I([])}},we=async(x,y)=>{const w=[];for(let a=0;a<x.length;a++){const h=x[a],d=Date.now(),l=`${y}_${d}_${a}.jpg`,u=ye(Fe,`service_images/${l}`);try{await Be(u,h);const g=await qe(u);w.push(g)}catch(g){throw console.error("Error uploading image:",g),new Error(`Error al subir la imagen ${a+1}`)}}return w},n=async x=>{try{if(!(i!=null&&i.uid_servicio)){N.push(e.jsx(j,{title:"Error",children:"No se pudo identificar el servicio a editar"}));return}se(!0);let y=[...x.service_image||[]];if(x.service_image_files&&x.service_image_files.length>0)try{const a=await we(x.service_image_files,i.uid_servicio);y=[...y.filter(d=>!d.startsWith("blob:")),...a]}catch(a){console.error("Error uploading images:",a),N.push(e.jsx(j,{title:"Error",children:"Error al subir las imágenes"})),se(!1);return}else y=y.filter(a=>!a.startsWith("blob:"));const w=K(S,"Servicios",i.uid_servicio);await ue(w,{nombre_servicio:x.nombre_servicio,descripcion:x.descripcion,uid_categoria:x.uid_categoria,nombre_categoria:x.nombre_categoria,precio:x.precio,garantia:x.garantia,typeService:x.typeService,subcategoria:x.subcategoria,service_image:y,uid_taller:i.uid_taller,taller:i.taller,updatedAt:new Date}),N.push(e.jsx(j,{title:"Éxito",children:"Servicio actualizado correctamente"})),R==null||R(),C()}catch(y){console.error("Error updating service:",y),N.push(e.jsx(j,{title:"Error",children:"No se pudo actualizar el servicio"}))}finally{se(!1)}};return!i||!L?null:e.jsxs(Mo,{isOpen:r,onClose:C,className:"rounded-md shadow w-full max-w-2xl",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Editar Servicio"}),ve&&e.jsx("div",{className:"flex justify-center items-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),e.jsx($o,{initialValues:L,validationSchema:Da,onSubmit:n,enableReinitialize:!0,children:({values:x,handleChange:y,setFieldValue:w,errors:a,touched:h})=>e.jsxs(Bo,{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"mt-2 flex flex-col items-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10",children:e.jsxs("div",{className:"text-center",children:[Array.isArray(x.service_image)&&x.service_image.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.service_image.map((d,l)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:d,alt:`Imagen del servicio ${l+1}`,className:"h-32 w-full object-cover rounded-md"}),e.jsx("button",{type:"button",onClick:()=>{const u=x.service_image.filter((g,P)=>P!==l);w("service_image",u)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},l))}):e.jsx(Te,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),e.jsx("div",{className:"mt-4 flex flex-col text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"images-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:"Agregar otra imagen"}),e.jsx("input",{id:"images-upload",name:"images-upload",type:"file",accept:"image/*",multiple:!0,className:"sr-only",onChange:d=>{const l=Array.from(d.target.files||[]),u=l.map(g=>URL.createObjectURL(g));w("service_image",[...x.service_image||[],...u]),w("service_image_files",[...x.service_image_files||[],...l])}})]})})]})}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Nombre Servicio:"}),e.jsx($,{type:"text",name:"nombre_servicio",value:x.nombre_servicio,onChange:y,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"}),e.jsx(B,{name:"nombre_servicio",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Tipo de Servicio:"}),e.jsxs("div",{className:"flex items-center space-x-10",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx($,{type:"radio",name:"typeService",value:"local",className:"form-radio"}),e.jsx("span",{children:"En el Local"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx($,{type:"radio",name:"typeService",value:"domicilio",className:"form-radio"}),e.jsx("span",{children:"A Domicilio"})]})]}),e.jsx(B,{name:"typeService",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Categoría:"}),e.jsxs($,{as:"select",name:"uid_categoria",value:x.uid_categoria,onChange:d=>{const l=d.target.value,u=E.find(g=>g.id===l);w("uid_categoria",l),w("nombre_categoria",(u==null?void 0:u.nombre)||""),w("subcategoria",[]),re(l)},className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"",children:"Seleccione una categoría"}),E.map(d=>e.jsx("option",{value:d.id,children:d.nombre},d.id))]}),e.jsx(B,{name:"uid_categoria",component:"div",className:"text-red-600 text-sm"})]}),e.jsx("label",{className:"font-semibold text-gray-700",children:"Subcategorías:"}),e.jsx(Sa,{isMulti:!0,placeholder:"Selecciona subcategorías",noOptionsMessage:()=>"No hay Subcategorías disponibles",options:x.uid_categoria?ge.map(d=>({value:d.id,label:d.nombre})):[],value:Array.isArray(x.subcategoria)?x.subcategoria.map(d=>({value:d.uid_subcategoria||d.id,label:d.nombre_subcategoria||d.nombre})):[],onChange:d=>w("subcategoria",d.map(l=>({uid_subcategoria:l.value,nombre_subcategoria:l.label}))),className:"mt-1"}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Descripción:"}),e.jsx($,{as:"textarea",name:"descripcion",value:x.descripcion,onChange:y,rows:1,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 resize-none overflow-hidden",style:{maxHeight:"150px",overflowY:"auto"},onInput:d=>{d.target.style.height="auto",d.target.style.height=`${d.target.scrollHeight}px`}}),e.jsx(B,{name:"descripcion",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Precio:"}),e.jsx($,{type:"text",name:"precio",value:x.precio,onChange:y,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"}),e.jsx(B,{name:"precio",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Garantía:"}),e.jsx($,{type:"text",name:"garantia",value:x.garantia,onChange:y,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"}),e.jsx(B,{name:"garantia",component:"div",className:"text-red-600 text-sm"})]}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(me,{variant:"default",onClick:C,className:"mr-2",disabled:f,children:"Cancelar"}),e.jsx(me,{type:"submit",style:{backgroundColor:"#000B7E"},className:"text-white hover:opacity-80",disabled:f,children:f?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):"Guardar"})]})]})})]})},rs=()=>{var vo,wo,_o,Co;const[r,C]=m.useState(null),[i,R]=m.useState(!1);m.useState(null);const[E,G]=m.useState([]),[ge,I]=m.useState([]),[Z,Q]=m.useState(!0);m.useState(!1);const[ve,H]=m.useState(!1),[L,q]=m.useState(!1),[f,se]=m.useState(null),[re,we]=m.useState(null),[n,x]=m.useState({fecha_fin:V,fecha_inicio:V,nombre:"",cantidad_servicios:0,monto:0,status:"",vigencia:"",uid:"",fechaCreacion:V.fromDate(new Date)}),[y,w]=m.useState([]),[a,h]=m.useState({image_perfil:"",nombre:"",email:"",phone:"",rif:"",status:"",Direccion:"",ubicacion:{lat:0,lng:0},LinkFacebook:"",LinkTiktok:"",LinkInstagram:"",estado:"",whatsapp:"",newLogoFile:null,rifIdFiscal:"",permisoOperacion:"",logotipoNegocio:"",fotoFrenteTaller:"",fotoInternaTaller:"",rifIdFiscal_file:null,permisoOperacion_file:null,logotipoNegocio_file:null,fotoFrenteTaller_file:null,fotoInternaTaller_file:null});m.useState(null);const[d,l]=m.useState({pagoMovil:!1,transferencia:!1,puntoVenta:!1,zinli:!1,efectivo:!1,zelle:!1,tarjetaCreditoN:!1,tarjetaCreditoI:!1}),u=location.pathname.substring(location.pathname.lastIndexOf("/")+1),g=ca(),P=da(o=>o.auth.user.authority),v=P==null?void 0:P.includes("Admin"),z=async()=>{Q(!0);try{const o=K(S,"Usuarios",u),t=(await co(o)).data()||null;se(t);const p=(t==null?void 0:t.metodos_pago)||{};l(_=>({..._,...p}));const b=(t==null?void 0:t.subscripcion_actual)||null;R(!!b);const k=Ue(W(S,"Subscripciones"),ze("taller_uid","==",u)),U=(await te(k)).docs.map(_=>{const c=_.data();return{uid:_.id,nombre:c.nombre||"",monto:c.monto||"0",vigencia:c.vigencia||"",status:c.status||"",cantidad_servicios:c.cantidad_servicios||0,fecha_fin:c.fecha_fin||"no hay fecha",fecha_inicio:c.fecha_inicio||"no hay fecha",taller_uid:c.taller_uid||"",fechaCreacion:V.fromDate(new Date)}}),Ce=Ue(W(S,"Servicios"),ze("uid_taller","==",u)),eo=(await te(Ce)).docs.map(_=>{const c=_.data();return{uid_servicio:_.id,nombre_servicio:(c==null?void 0:c.nombre_servicio)||"",descripcion:(c==null?void 0:c.descripcion)||"",precio:(c==null?void 0:c.precio)||"0",estatus:c==null?void 0:c.estatus,taller:(c==null?void 0:c.taller)||"",puntuacion:(c==null?void 0:c.puntuacion)||"0",uid_taller:(c==null?void 0:c.uid_taller)||"",uid_categoria:(c==null?void 0:c.uid_categoria)||"",nombre_categoria:(c==null?void 0:c.nombre_categoria)||"",subcategoria:(c==null?void 0:c.subcategoria)||[],garantia:(c==null?void 0:c.garantia)||"",typeService:(c==null?void 0:c.typeService)||"local",service_image:(c==null?void 0:c.service_image)||(c==null?void 0:c.imagenes)||[]}}),oo=(await te(W(S,"Planes"))).docs.map(_=>({uid:_.id,nombre:_.data().nombre||"",descripcion:_.data().descripcion||"",monto:_.data().monto||0,status:_.data().status||"",vigencia:_.data().vigencia||"",cantidad_servicios:_.data().cantidad_servicios||0}));C(t),G(eo),I(oo),x(b),w(U);const Oe=b==null?void 0:b.fecha_fin;if(Oe){const _=ie(Oe);console.log("aqui la vigencia w",_),we(_)}h({nombre:(t==null?void 0:t.nombre)??"",image_perfil:(t==null?void 0:t.image_perfil)??"",email:(t==null?void 0:t.email)??"",phone:(t==null?void 0:t.phone)??"",rif:(t==null?void 0:t.rif)??"",status:(t==null?void 0:t.status)??"",Direccion:(t==null?void 0:t.Direccion)??"",LinkFacebook:(t==null?void 0:t.LinkFacebook)??"",LinkInstagram:(t==null?void 0:t.LinkInstagram)??"",LinkTiktok:(t==null?void 0:t.LinkTiktok)??"",whatsapp:(t==null?void 0:t.whatsapp)??"",estado:(t==null?void 0:t.estado)??"",ubicacion:t!=null&&t.ubicacion?{lat:t.ubicacion.lat,lng:t.ubicacion.lng}:{lat:0,lng:0},newLogoFile:(t==null?void 0:t.newLogoFile)??null,rifIdFiscal:(t==null?void 0:t.rifIdFiscal)??"",permisoOperacion:(t==null?void 0:t.permisoOperacion)??"",logotipoNegocio:(t==null?void 0:t.logotipoNegocio)??"",fotoFrenteTaller:(t==null?void 0:t.fotoFrenteTaller)??"",fotoInternaTaller:(t==null?void 0:t.fotoInternaTaller)??"",rifIdFiscal_file:null,permisoOperacion_file:null,logotipoNegocio_file:null,fotoFrenteTaller_file:null,fotoInternaTaller_file:null})}catch(o){console.error("Error al obtener los datos del cliente:",o),N.push(e.jsx(j,{title:"Error",children:"Ocurrio un error al cargar los datos del cliente."}))}finally{Q(!1)}};m.useEffect(()=>{z()},[]);const ie=o=>{const s=Math.floor(Date.now()/1e3),p=o.seconds-s;return Math.ceil(p/(60*60*24))},ne=o=>{const s=new Date(o.seconds*1e3),t=String(s.getDate()).padStart(2,"0"),p=String(s.getMonth()+1).padStart(2,"0"),b=s.getFullYear();return`${t}/${p}/${b}`},O=o=>{if(!o)return"Documento existente";try{const s=decodeURIComponent(o),t=s.match(/\/documents\/[^\/]+\/([^?]+)/)||s.match(/documents%2F[^%]+%2F([^?%]+)/);if(t&&t[1]){const F=t[1];if(F.includes("."))return F}const p=s.split("/"),k=p[p.length-1].split("?")[0];return k&&k.includes(".")?k:"Documento existente"}catch(s){return console.error("Error extrayendo nombre del archivo:",s),"Documento existente"}},le=async o=>{try{const s=K(S,"Usuarios",u),t=K(W(S,"Subscripciones")),p=o.monto===0||o.monto<.01&&o.monto>-.01,b=p?"Aprobado":"Por Aprobar",k=new Date,F=parseInt(o.vigencia,10)||30,U=new Date(k);U.setDate(k.getDate()+F);const Ce={uid:t.id,nombre:o.nombre,monto:o.monto,vigencia:o.vigencia,cantidad_servicios:o.cantidad_servicios,status:b,taller_uid:u,fechaCreacion:V.fromDate(new Date),...p&&{fecha_inicio:V.fromDate(k),fecha_fin:V.fromDate(U)}};await ma(t,Ce),await ue(s,{subscripcion_actual:{uid:t.id,nombre:o.nombre,monto:o.monto,vigencia:o.vigencia,cantidad_servicios:o.cantidad_servicios,status:b,fecha_inicio:V.fromDate(k),fecha_fin:V.fromDate(U)}}),R(!0),await z(),mo(),console.log("Subscripción actualizada y guardada en Subscripciones."),N.push(e.jsx(j,{title:"Éxito",type:"success",children:p?"Se ha subscrito correctamente al plan gratuito. Tu plan está activo.":"Se ha subscrito correctamente a este plan. Espera la aprobación del pago."}))}catch(s){console.error("Error al guardar la subscripción:",s),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un error al subscribirse a este plan. Inténtalo nuevamente."}))}},Y=({title:o,value:s})=>e.jsxs("div",{children:[e.jsx("span",{children:o}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:s})]}),Ke=(o,s)=>{Re(t=>{const p=t.filter(b=>b.id!==o);return s!==""&&p.push({id:o,value:s}),p})},ce=o=>{const{name:s,value:t}=o.target;h(p=>({...p,[s]:t}))},[pe,Uo]=m.useState({facebook:"",instagram:"",tiktok:"",whatsapp:""}),Ko=(o,s)=>({facebook:/^(https?:\/\/)?(www\.)?facebook\.com\/.+$/,instagram:/^(https?:\/\/)?(www\.)?instagram\.com\/.+$/,tiktok:/^(https?:\/\/)?(www\.)?tiktok\.com\/.+$/})[s].test(o)?"":`La URL ingresada no es válida para ${s}.`,Ge=(o,s)=>{const{value:t}=o.target;h(b=>({...b,[`Link${s.charAt(0).toUpperCase()+s.slice(1)}`]:t}));const p=Ko(t,s);Uo(b=>({...b,[s]:p}))},Go=async()=>{var o;if(!a.nombre||a.nombre.trim()===""){N.push(e.jsx(j,{title:"Error",children:"El nombre no puede estar vacío."}));return}if(!a.phone||!/^[1-9]\d*$/.test(a.phone)){N.push(e.jsx(j,{title:"Error",children:"El teléfono debe contener solo números y no puede comenzar con 0."}));return}if(a.whatsapp&&!/^[1-9]\d*$/.test(a.whatsapp)){N.push(e.jsx(j,{title:"Error",children:"El WhatsApp debe contener solo números y no puede comenzar con 0."}));return}if(!a.rif||!/^[JVEGCP]-\d+$/.test(a.rif)){N.push(e.jsx(j,{title:"Error",children:"El RIF debe estar en un formato válido (Ejemplo: J-12345678)."}));return}if(!a.Direccion||a.Direccion.trim()===""){N.push(e.jsx(j,{title:"Error",children:"La Direccion no puede estar vacía."}));return}if(!a.status){N.push(e.jsx(j,{title:"Error",children:"Debes seleccionar un estatus."}));return}if(!a.estado){N.push(e.jsx(j,{title:"Error",children:"Debes seleccionar un estado."}));return}if(!a.rifIdFiscal_file&&!a.rifIdFiscal){N.push(e.jsx(j,{title:"Error",children:"El RIF ID Fiscal es obligatorio. Debes subir un archivo o mantener el existente."}));return}if(!a.fotoFrenteTaller_file&&!a.fotoFrenteTaller){N.push(e.jsx(j,{title:"Error",children:"La foto del frente del taller es obligatoria. Debes subir un archivo o mantener el existente."}));return}if(!a.fotoInternaTaller_file&&!a.fotoInternaTaller){N.push(e.jsx(j,{title:"Error",children:"La foto interna del taller es obligatoria. Debes subir un archivo o mantener el existente."}));return}try{const s=W(S,"Usuarios"),t=await te(s);if(t.docs.some(T=>T.data().rif===a.rif&&T.id!==u)){N.push(e.jsx(j,{title:"Error",children:"El RIF ya está registrado. Por favor, verifica e intenta con otro."}));return}if(t.docs.some(T=>T.data().phone===a.phone&&T.id!==u)){N.push(e.jsx(j,{title:"Error",children:"El teléfono ya está registrado. Por favor, verifica e intenta con otro."}));return}let k=a.image_perfil;if(a.newLogoFile){const D=(o=decodeURIComponent(a.image_perfil).split("/").pop())==null?void 0:o.split("?")[0],A=`${u}_`,Se=D==null?void 0:D.match(/_(\d+)\.jpg$/),xe=Se?parseInt(Se[1],10):0,oe=`${A}${xe+1}.jpg`,ao=ye(Fe,`profileImages/${D}`);try{await ko(ao)}catch(Io){console.error("Error al eliminar la imagen anterior:",Io)}const Ee=ye(Fe,`profileImages/${oe}`);await Be(Ee,a.newLogoFile),k=await qe(Ee)}const F=async(T,D)=>{try{const A=T.split("/"),xe=A[A.length-1].split("?")[0],oe=ye(Fe,`documents/${u}/${xe}`);await ko(oe),console.log(`Documento ${D} eliminado del storage`)}catch(A){console.error(`Error eliminando documento ${D} del storage:`,A)}},U=async(T,D,A,Se=!1)=>{var xe;if(Se&&A)return await F(A,D),null;if(!T)return A||null;try{A&&await F(A,D);const oe=(xe=T.name.split(".").pop())==null?void 0:xe.toLowerCase();if(!oe)return console.warn(`No se pudo obtener la extensión del archivo: ${D}`),A||null;const ao=`${D}.${oe}`,Ee=ye(Fe,`documents/${u}/${ao}`);return await Be(Ee,T),await qe(Ee)}catch(oe){return console.error(`Error subiendo ${D}:`,oe),A||null}},Ce=!a.rifIdFiscal_file&&!a.rifIdFiscal&&!!(f!=null&&f.rifIdFiscal),So=!a.permisoOperacion_file&&!a.permisoOperacion&&!!(f!=null&&f.permisoOperacion),eo=!a.logotipoNegocio_file&&!a.logotipoNegocio&&!!(f!=null&&f.logotipoNegocio),Eo=!a.fotoFrenteTaller_file&&!a.fotoFrenteTaller&&!!(f!=null&&f.fotoFrenteTaller),oo=!a.fotoInternaTaller_file&&!a.fotoInternaTaller&&!!(f!=null&&f.fotoInternaTaller),Oe=[U(a.rifIdFiscal_file||null,"rifIdFiscal",a.rifIdFiscal||(f==null?void 0:f.rifIdFiscal)||void 0,Ce),U(a.permisoOperacion_file||null,"permisoOperacion",a.permisoOperacion||(f==null?void 0:f.permisoOperacion)||void 0,So),U(a.logotipoNegocio_file||null,"logotipoNegocio",a.logotipoNegocio||(f==null?void 0:f.logotipoNegocio)||void 0,eo),U(a.fotoFrenteTaller_file||null,"fotoFrenteTaller",a.fotoFrenteTaller||(f==null?void 0:f.fotoFrenteTaller)||void 0,Eo),U(a.fotoInternaTaller_file||null,"fotoInternaTaller",a.fotoInternaTaller||(f==null?void 0:f.fotoInternaTaller)||void 0,oo)],_=await Promise.all(Oe),c={};["rifIdFiscal","permisoOperacion","logotipoNegocio","fotoFrenteTaller","fotoInternaTaller"].forEach((T,D)=>{_[D]!==void 0&&(c[T]=_[D])});const na=K(S,"Usuarios",u),de={...a,image_perfil:k,...c};if(delete de.newLogoFile,delete de.rifIdFiscal_file,delete de.permisoOperacion_file,delete de.logotipoNegocio_file,delete de.fotoFrenteTaller_file,delete de.fotoInternaTaller_file,await ue(na,de),C({...a,image_perfil:k}),q(!1),z(),console.log("Datos actualizados correctamente",a),console.log("Datos originales",f),(a==null?void 0:a.status)!==(f==null?void 0:f.status)){console.log("Cambio de estado kelfsklflksflks");try{await ua.post("https://apisolvers.solversapp.com/api/usuarios/sendNotification",{token:f==null?void 0:f.token,title:"Cambio de estatus",body:"Hola, su usuario ha cambiado de estado "+(a==null?void 0:a.status)+". Cierre sesión y vuelva a ingresar por favor.",secretCode:"Cambio de estado"})}catch(T){console.error("Error al enviar notificación:",T)}}N.push(e.jsx(j,{title:"Éxito",type:"success",children:"Datos de Usuario actualizados correctamente."}))}catch(s){console.error("Error al actualizar los datos:",s),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un error al actualizar los datos del usuario. Inténtalo nuevamente."}))}},Ho=async()=>{try{const o=K(S,"Usuarios",u);await ue(o,{metodos_pago:d}),N.push(e.jsx(j,{title:"Éxito",type:"success",children:"Métodos de pago actualizados correctamente."}))}catch(o){console.error("Error al guardar los métodos de pago:",o),N.push(e.jsx(j,{title:"Error",children:"Ocurrió un error al actualizar los métodos de pago. Inténtalo nuevamente."}))}},Vo=[{name:"Pago móvil",icon:e.jsx(Ia,{}),dbKey:"pagoMovil"},{name:"Transferencias bancarias",icon:e.jsx(Ea,{}),dbKey:"transferencia"},{name:"Punto de venta",icon:e.jsx(so,{}),dbKey:"puntoVenta"},{name:"Zinli",icon:e.jsx(Do,{}),dbKey:"zinli"},{name:"Efectivo",icon:e.jsx(Do,{}),dbKey:"efectivo"},{name:"Zelle",icon:e.jsx(ka,{}),dbKey:"zelle"},{name:"Tarjetas de crédito nacional",icon:e.jsx(so,{}),dbKey:"tarjetaCreditoN"},{name:"Tarjetas de crédito internacional",icon:e.jsx(so,{}),dbKey:"tarjetaCreditoI"}],mo=()=>H(!1),Zo=()=>q(!0),[De,Re]=m.useState([]),[He,Ve]=m.useState([]),{TabNav:Ze,TabList:Yo,TabContent:Ye}=Lo,uo=o=>{bo(o),ho(!0)},Wo=m.useMemo(()=>[{header:"Nombre del Servicio",accessorKey:"nombre_servicio"},{header:"Precio",accessorKey:"precio",cell:({row:o})=>`$${parseFloat(o.original.precio).toFixed(2)}`},{header:"Estatus",accessorKey:"estatus",cell:({row:o})=>{const[s,t]=m.useState(o.original.estatus??!1),p=async b=>{if(b===!0&&(n==null?void 0:n.status)!=="Aprobado"){N.push(e.jsx(j,{title:"Plan no activo",type:"warning",children:"No puedes encender servicios. Tu plan debe estar activo y aprobado."}));return}t(b);const k=E.map(F=>F.uid_servicio===o.original.uid_servicio?{...F,estatus:b}:F);G(k);try{const F=K(S,"Servicios",o.original.uid_servicio);await ue(F,{estatus:b}),console.log("Estado del servicio actualizado")}catch(F){console.error("Error al actualizar el estado del servicio:",F)}};return e.jsx("div",{children:e.jsx(fa,{checked:s,onChange:()=>p(!s)})})}},{header:"Acciones",id:"actions",cell:({row:o})=>e.jsx("div",{className:"",children:e.jsx(me,{size:"sm",variant:"solid",onClick:()=>uo(o.original),className:"text-blue-900 hover:bg-blue-700",children:e.jsx(ha,{})})})}],[n,E,uo]),Qo=[{header:"Nombre del Plan",accessorKey:"nombre"},{header:"Monto",accessorKey:"monto",cell:({getValue:o})=>{const s=o();return s===0||s<.01&&s>-.01?"Gratis":s}},{header:"Descripcion",accessorKey:"descripcion"},{header:"Cantidad de servicios",accessorKey:"cantidad_servicios"}],Jo=[{header:"Nombre del Plan",accessorKey:"nombre"},{header:"Monto",accessorKey:"monto"},{header:"vigencia",accessorKey:"vigencia"},{header:"Fecha de vencimiento",accessorKey:"fecha_fin",cell:({row:o})=>`${ne(o.original.fecha_fin)}`}],{Tr:fe,Th:Le,Td:Pe,THead:We,TBody:Qe,Sorter:La}=Ae,Je=ro({data:E,columns:Wo,state:{sorting:He,columnFilters:De},onSortingChange:Ve,onColumnFiltersChange:Re,getCoreRowModel:io(),getSortedRowModel:no(),getFilteredRowModel:lo()}),go=ro({data:ge,columns:Qo,state:{sorting:He,columnFilters:De},onSortingChange:Ve,onColumnFiltersChange:Re,getCoreRowModel:io(),getSortedRowModel:no(),getFilteredRowModel:lo()}),po=ro({data:y,columns:Jo,state:{sorting:He,columnFilters:De},onSortingChange:Ve,onColumnFiltersChange:Re,getCoreRowModel:io(),getSortedRowModel:no(),getFilteredRowModel:lo()}),[J,Xo]=m.useState(1),X=6,fo=Je.getRowModel().rows.length,xo=o=>{console.log("onPaginationChange",o),Xo(o)},[ea,oa]=m.useState(!1),[aa,ho]=m.useState(!1),[ta,bo]=m.useState(null),[sa,jo]=m.useState(!1),[ee,No]=m.useState(null),Xe=()=>{oa(o=>!o)},_e=(o,s,t)=>{No({url:o,name:s,type:t}),jo(!0)},yo=()=>{jo(!1),No(null)},ra=()=>{ho(!1),bo(null)},ia=()=>{z()};return e.jsxs(ga,{className:"min-h-screen overflow-y-auto pb-8",children:[v&&e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{onClick:()=>g(`${pa}/garages`),className:"flex items-center text-blue-900 mb-3 ml-2 px-4 py-2 bg-blue-100 rounded-lg hover:bg-blue-200 transition duration-200",children:[e.jsx(ba,{className:"mr-2"}),e.jsx("span",{children:"Volver"})]})}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 pb-8",children:[e.jsxs(Fo,{children:[e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{className:"bg-[#1d1e56] rounded-md p-2 hover:bg-[#1E3a8a] text-white",onClick:Zo,children:"Editar"})}),e.jsxs("div",{className:"flex flex-col xl:justify-between min-w-[260px] h-full 2xl:min-w-[360px] mx-auto",children:[e.jsxs("div",{className:"flex xl:flex-col items-center gap-4",children:[e.jsx(To,{size:90,shape:"circle",src:(r==null?void 0:r.image_perfil)||"/img/logo/logo-light-streamline.png",className:"p-2 bg-white shadow-lg"}),e.jsx("h4",{className:"font-bold",children:(r==null?void 0:r.nombre)||"Nombre no disponible"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-y-7 gap-x-4 mt-8",children:[e.jsx(Y,{title:"Correo electronico",value:(r==null?void 0:r.email)||"Correo no disponible"}),e.jsx(Y,{title:"Numero de telefono",value:(r==null?void 0:r.phone)||"Telefono no disponible"}),e.jsx(Y,{title:"Rif",value:(r==null?void 0:r.rif)||"Rif no disponible"}),e.jsx(Y,{title:"Estado",value:(r==null?void 0:r.estado)||"Estado no disponible"}),e.jsx(Y,{title:"Estatus",value:(r==null?void 0:r.status)||"Estatus no disponible"}),e.jsx(Y,{title:"Direccion",value:(r==null?void 0:r.Direccion)||"Direccion no disponible"}),r!=null&&r.ubicacion?e.jsx(Fa,{center:{lat:r.ubicacion.lat,lng:r.ubicacion.lng},markers:[{lat:r.ubicacion.lat,lng:r.ubicacion.lng}]}):"Ubicación no disponible",e.jsxs("div",{className:"mb-7",children:[e.jsx("span",{children:"Redes Sociales"}),e.jsx("div",{className:"flex mt-4 gap-2",children:r!=null&&r.LinkFacebook||r!=null&&r.LinkInstagram||r!=null&&r.whatsapp||r!=null&&r.LinkTiktok?e.jsxs(e.Fragment,{children:[r.LinkFacebook&&e.jsx("a",{href:r.LinkFacebook,target:"_blank",rel:"noopener noreferrer",title:r.LinkFacebook,children:e.jsx(me,{shape:"circle",size:"sm",icon:e.jsx(ja,{className:"text-[#1773ea]"})})}),r.LinkInstagram&&e.jsx("a",{href:r.LinkInstagram,target:"_blank",rel:"noopener noreferrer",title:r.LinkInstagram,children:e.jsx(me,{shape:"circle",size:"sm",icon:e.jsx(Na,{className:"text-[#E1306C]"})})}),r.LinkTiktok&&e.jsx("a",{href:r.LinkTiktok,target:"_blank",rel:"noopener noreferrer",title:r.LinkTiktok,children:e.jsx(me,{shape:"circle",size:"sm",icon:e.jsx(ya,{className:"text-black"})})}),r.whatsapp&&e.jsx("a",{href:`https://wa.me/${r.whatsapp}?text=${encodeURIComponent("Hola, quiero más información sobre el servicio")}`,target:"_blank",rel:"noopener noreferrer",title:r.whatsapp,children:e.jsx(me,{shape:"circle",size:"sm",icon:e.jsx(va,{className:"text-[#25d366]"})})})]}):e.jsx("p",{className:"text-gray-500",children:"No hay redes sociales disponibles"})})]})]})]})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs(Lo,{defaultValue:"tab1",children:[e.jsxs(Yo,{children:[e.jsx(Ze,{value:"tab1",children:"Planes"}),e.jsx(Ze,{value:"tab2",children:"Servicios"}),e.jsx(Ze,{value:"tab3",children:"Documentos"})]}),e.jsx("div",{className:"w-full",children:e.jsx(Ye,{value:"tab1",children:e.jsxs("div",{className:"mb-8 mt-4",children:[e.jsx("h6",{className:"mb-4",children:"Subscripción"}),e.jsx(Fo,{bordered:!0,className:"mb-4",children:i?e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 p-4 border rounded-lg shadow-md bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(To,{className:"bg-transparent",shape:"circle",icon:e.jsx(_a,{className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:(n==null?void 0:n.nombre)||"Cargando..."}),e.jsx(wa,{className:`rounded-md border-0 mx-2 ${(n==null?void 0:n.status)==="Aprobado"?"bg-green-100 text-green-400":(n==null?void 0:n.status)==="Vencido"?"bg-red-100 text-red-400":"bg-yellow-100 text-yellow-400"}`,children:(n==null?void 0:n.status)||"Pendiente"})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Vigencia:"," ",(n==null?void 0:n.vigencia)??"---"," ","días"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Monto mensual:"," ",e.jsx("span",{className:"font-bold text-gray-800",children:(n==null?void 0:n.monto)!==void 0&&(n==null?void 0:n.monto)!==null?n.monto===0||n.monto<.01&&n.monto>-.01?"Gratis":`$${n.monto}`:"---"})]}),(n==null?void 0:n.status)==="Aprobado"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs ml-2 text-gray-600",children:[re??"---"," ","días restantes"]}),e.jsxs("p",{className:"text-xs ml-2 text-gray-600",children:["Fecha de vencimiento:"," ",e.jsx("span",{className:"text-xs text-gray-600",children:n.fecha_fin?ne(n.fecha_fin):"Fecha no disponible"})]})]})]})]})]}),(n==null?void 0:n.status)==="Vencido"&&e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{onClick:()=>H(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200",children:"Elegir Plan"}),(n==null?void 0:n.uid)&&e.jsx(Oo,{talleruid:u,subscriptionId:(n==null?void 0:n.uid)||""})]}),(n==null?void 0:n.status)==="Aprobado"&&e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx("button",{onClick:()=>H(!0),className:"bg-blue-900 rounded-md p-2 text-white hover:bg-blue-700",children:"Renovar Pago"})}),(n==null?void 0:n.status)==="Por Aprobar"&&e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(Oo,{talleruid:u,subscriptionId:(n==null?void 0:n.uid)||""})})]}):e.jsxs("div",{className:"flex justify-end",children:[e.jsx("p",{className:"text-xs mr-64 mt-3",children:"Puede visualizar y suscribirse a un plan para su taller..."}),e.jsx("button",{onClick:()=>H(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200",children:"Ver Planes"})]})}),e.jsx("div",{children:e.jsxs("div",{className:"p-4 rounded-lg shadow",children:[e.jsx("h6",{className:"mb-6 flex justify-start mt-4",children:"Historial de Subscripciones"}),e.jsxs(Ae,{className:"w-full rounded-lg",children:[e.jsx(We,{children:po.getHeaderGroups().map(o=>e.jsx(fe,{children:o.headers.map(s=>e.jsx(Le,{colSpan:s.colSpan,children:s.isPlaceholder?null:e.jsx("div",{className:s.column.getCanSort()?"cursor-pointer select-none":"",onClick:s.column.getToggleSortingHandler(),children:je(s.column.columnDef.header,s.getContext())})},s.id))},o.id))}),e.jsx(Qe,{children:po.getRowModel().rows.slice((J-1)*X,J*X).map(o=>e.jsx(fe,{children:o.getVisibleCells().map(s=>e.jsx(Pe,{children:je(s.column.columnDef.cell,s.getContext())},s.id))},o.id))})]}),e.jsx(Ro,{onChange:xo,currentPage:J,totalRows:fo,rowsPerPage:X})]})}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 p-4",children:Vo.map(o=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ca,{checked:d[o.dbKey]||!1,onChange:s=>{l(t=>({...t,[o.dbKey]:s}))}}),e.jsx("span",{children:o.icon}),e.jsx("span",{children:o.name})]},o.name))}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:Ho,className:"px-4 py-2 bg-[#1d1e56] text-white rounded-md hover:bg-blue-900 focus:outline-none",children:"Guardar"})})]})})}),e.jsx(Ye,{value:"tab2",children:e.jsx("div",{className:"w-full h-full",children:e.jsxs("div",{className:"p-4 rounded-lg",children:[e.jsx("h6",{className:"mb-6 flex justify-start mt-4",children:"Lista de Servicios"}),e.jsxs(Ae,{className:"w-full rounded-lg",children:[e.jsx(We,{children:Je.getHeaderGroups().map(o=>e.jsx(fe,{children:o.headers.map(s=>e.jsx(Le,{colSpan:s.colSpan,children:s.isPlaceholder?null:e.jsx("div",{className:s.column.getCanSort()?"cursor-pointer select-none":"",onClick:s.column.getToggleSortingHandler(),children:je(s.column.columnDef.header,s.getContext())})},s.id))},o.id))}),e.jsx(Qe,{children:Je.getRowModel().rows.slice((J-1)*X,J*X).map(o=>e.jsx(fe,{children:o.getVisibleCells().map(s=>e.jsx(Pe,{children:je(s.column.columnDef.cell,s.getContext())},s.id))},o.id))})]}),e.jsx(Ro,{onChange:xo,currentPage:J,totalRows:fo,rowsPerPage:X})]})})}),e.jsx(Ye,{value:"tab3",children:e.jsxs("div",{className:"w-full h-full p-4",children:[e.jsx("h6",{className:"mb-6 flex justify-start mt-4",children:"Documentos del Taller"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[(r==null?void 0:r.rifIdFiscal)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>_e(r.rifIdFiscal,"RIF ID Fiscal",r.rifIdFiscal.includes(".pdf")?"pdf":"image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:r.rifIdFiscal.includes(".pdf")?e.jsxs("div",{className:"text-center",children:[e.jsx(he,{className:"w-16 h-16 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"RIF ID Fiscal"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF"})]}):e.jsx("img",{src:r.rifIdFiscal,alt:"RIF ID Fiscal",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Ie,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.permisoOperacion)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>_e(r.permisoOperacion,"Permiso de Operación",r.permisoOperacion.includes(".pdf")?"pdf":"image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:r.permisoOperacion.includes(".pdf")?e.jsxs("div",{className:"text-center",children:[e.jsx(he,{className:"w-16 h-16 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Permiso de Operación"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF"})]}):e.jsx("img",{src:r.permisoOperacion,alt:"Permiso de Operación",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Ie,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.logotipoNegocio)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>_e(r.logotipoNegocio,"Logotipo Negocio","image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.jsx("img",{src:r.logotipoNegocio,alt:"Logotipo Negocio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Ie,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.fotoFrenteTaller)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>_e(r.fotoFrenteTaller,"Foto Frente Taller","image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.jsx("img",{src:r.fotoFrenteTaller,alt:"Foto Frente Taller",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Ie,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]}),(r==null?void 0:r.fotoInternaTaller)&&e.jsxs("div",{className:"cursor-pointer group relative overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>_e(r.fotoInternaTaller,"Foto Interna Taller","image"),children:[e.jsx("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.jsx("img",{src:r.fotoInternaTaller,alt:"Foto Interna Taller",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:o=>{o.target.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",children:e.jsx(Ie,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 w-8 h-8"})})]})]}),!(r!=null&&r.rifIdFiscal)&&!(r!=null&&r.permisoOperacion)&&!(r!=null&&r.logotipoNegocio)&&!(r!=null&&r.fotoFrenteTaller)&&!(r!=null&&r.fotoInternaTaller)&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(to,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-semibold",children:"No hay documentos disponibles"}),e.jsx("p",{className:"text-sm",children:"Los documentos aparecerán aquí una vez que se suban"})]})]})})]})})]}),e.jsx(Ao,{width:1e3,isOpen:ve,onClose:mo,children:e.jsxs("div",{className:"table-responsive",children:[e.jsx("h2",{className:"mb-4",children:"Planes de Subscripción"}),e.jsx("div",{className:"p-2 rounded-lg shadow",children:e.jsxs(Ae,{className:"w-full rounded-lg",children:[e.jsx(We,{children:go.getHeaderGroups().map(o=>e.jsxs(fe,{children:[o.headers.map(s=>{var t,p;return e.jsx(Le,{colSpan:s.colSpan,children:s.isPlaceholder?null:e.jsxs("div",{className:s.column.getCanSort()?"cursor-pointer select-none":"",onClick:s.column.getToggleSortingHandler(),children:[je(s.column.columnDef.header,s.getContext()),s.column.getCanFilter()?e.jsx("input",{type:"text",value:((p=(t=De.find(b=>b.id===s.id))==null?void 0:t.value)==null?void 0:p.toString())||"",onChange:b=>Ke(s.id,b.target.value),placeholder:"Buscar",className:"mt-2 p-1 border rounded",onClick:b=>b.stopPropagation()}):null]})},s.id)}),e.jsx(Le,{children:"Acción"})," "]},o.id))}),e.jsx(Qe,{children:go.getRowModel().rows.slice((J-1)*X,J*X).map(o=>e.jsxs(fe,{children:[o.getVisibleCells().map(s=>e.jsx(Pe,{children:je(s.column.columnDef.cell,s.getContext())},s.id)),e.jsx(Pe,{children:e.jsx("button",{className:"bg-[#1d1e56] text-white px-4 py-2 rounded",onClick:()=>le(o.original),children:"Suscribirse"})})]},o.id))})]})})]})}),L&&e.jsx(xa,{isOpen:L,title:"Editar Taller",confirmButtonColor:"blue-600",onClose:()=>q(!1),onRequestClose:()=>q(!1),onCancel:()=>q(!1),onConfirm:Go,children:e.jsxs("div",{className:"max-h-[450px] overflow-y-auto",children:[e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 gap-2",children:e.jsxs("div",{className:"text-center",children:[!a.image_perfil&&!a.newLogoFile?e.jsx(Te,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}):e.jsxs("div",{children:[e.jsx("img",{src:a.newLogoFile?URL.createObjectURL(a.newLogoFile):a.image_perfil,alt:"Preview Logo",className:"mx-auto h-32 w-32 object-cover"}),e.jsx("button",{onClick:()=>h(o=>({...o,newLogoFile:null,image_perfil:""})),className:"mt-2 text-red-500 hover:text-red-700",children:"Quitar Logo"})]}),e.jsx("div",{className:"mt-4 flex text-sm leading-6 text-gray-600 justify-center",children:e.jsxs("label",{htmlFor:"logo-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500 flex justify-center items-center",children:[e.jsx("span",{children:a.newLogoFile?"Cambiar Logo":"Seleccionar Logo"}),e.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",accept:"image/*",className:"sr-only",onChange:o=>{var t;const s=(t=o.target.files)==null?void 0:t[0];h(p=>({...p,newLogoFile:s||null}))}})]})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Nombre"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Nombre",name:"nombre",value:a.nombre,onChange:ce})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Correo Electrónico"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Correo Electrónico",disabled:!0,name:"email",value:a.email,onChange:ce})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Teléfono"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Teléfono",name:"phone",value:a.phone,onChange:ce,onKeyDown:o=>{o.currentTarget.value===""&&o.key==="0"&&o.preventDefault()},onInput:o=>{const s=o.target,t=s.value.replace(/^0+/,"");t!==s.value&&h(p=>({...p,phone:t}))}})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"WhatsApp"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"WhatsApp",name:"whatsapp",value:a.whatsapp,onChange:ce,onKeyDown:o=>{o.currentTarget.value===""&&o.key==="0"&&o.preventDefault()},onInput:o=>{const s=o.target,t=s.value.replace(/^0+/,"");t!==s.value&&h(p=>({...p,whatsapp:t}))}})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"RIF:"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsxs("select",{value:((vo=a.rif)==null?void 0:vo.split("-")[0])||"J",onChange:o=>h(s=>{var t;return{...s,rif:`${o.target.value}-${((t=s==null?void 0:s.rif)==null?void 0:t.split("-")[1])||""}`}}),className:"mx-2 p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"J",children:"J-"}),e.jsx("option",{value:"V",children:"V-"}),e.jsx("option",{value:"E",children:"E-"}),e.jsx("option",{value:"C",children:"C-"}),e.jsx("option",{value:"G",children:"G-"}),e.jsx("option",{value:"P",children:"P-"})]}),e.jsx("input",{disabled:!0,type:"text",value:((wo=a.rif)==null?void 0:wo.split("-")[1])||"",onChange:o=>h(s=>{var t;return{...s,rif:`${((t=s==null?void 0:s.rif)==null?void 0:t.split("-")[0])||"J"}-${o.target.value}`}}),className:"p-3 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 mx-2 w-full"})]})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Estado:"}),e.jsxs("select",{name:"estado",value:a.estado,onChange:ce,className:"mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"",children:"Seleccione un Estado"}),["Amazonas","Anzoátegui","Apure","Aragua","Barinas","Bolívar","Carabobo","Cojedes","Delta Amacuro","Distrito Capital","Falcón","Guárico","Lara","La Guaira","Mérida","Miranda","Monagas","Nueva Esparta","Portuguesa","Sucre","Táchira","Trujillo","Yaracuy","Zulia"].map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Direccion"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"",name:"Direccion",value:a.Direccion,onChange:ce})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Mapa"}),e.jsx("button",{type:"button",className:"w-full mt-1 p-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300",onClick:Xe,children:"Abrir Mapa"})]}),ea&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-3xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Editar ubicación"}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 focus:outline-none",onClick:Xe,children:"✖"})]}),e.jsx(Ta,{initialLocation:{lat:a.ubicacion.lat,lng:a.ubicacion.lng},onLocationChange:o=>h(s=>({...s,ubicacion:o}))}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300",onClick:Xe,children:"Guardar"})})]})}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Estatus"}),e.jsxs("select",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",name:"status",value:a.status,onChange:ce,children:[e.jsx("option",{value:"Aprobado",children:"Aprobado"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"Rechazado",children:"Rechazado"}),e.jsx("option",{value:"En espera por aprobación",children:"En espera por aprobación"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Facebook"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"URL de Facebook",name:"LinkFacebook",value:a.LinkFacebook,onChange:o=>Ge(o,"facebook")}),pe.facebook&&e.jsx("span",{className:"text-red-500 text-sm",children:pe.facebook})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"Instagram"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"URL de Instagram",name:"LinkInstagram",value:a.LinkInstagram,onChange:o=>Ge(o,"instagram")}),pe.instagram&&e.jsx("span",{className:"text-red-500 text-sm",children:pe.instagram})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 font-semibold",children:"TikTok"}),e.jsx("input",{className:"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"URL de TikTok",name:"LinkTiktok",value:a.LinkTiktok,onChange:o=>Ge(o,"tiktok")}),pe.tiktok&&e.jsx("span",{className:"text-red-500 text-sm",children:pe.tiktok})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4 col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Documentos"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 mb-2",children:["RIF ID Fiscal: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!a.rifIdFiscal_file&&!a.rifIdFiscal?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,.pdf",id:"rifIdFiscal-upload",className:"sr-only",onChange:o=>{var t;const s=(t=o.target.files)==null?void 0:t[0];s&&h(p=>({...p,rifIdFiscal_file:s}))}}),e.jsx("label",{htmlFor:"rifIdFiscal-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(to,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Imágenes o PDF"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.rifIdFiscal_file?a.rifIdFiscal_file.type.includes("pdf")?e.jsx(he,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}):(_o=a.rifIdFiscal)!=null&&_o.includes(".pdf")?e.jsx(he,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.rifIdFiscal_file?a.rifIdFiscal_file.name:O(a.rifIdFiscal)}),a.rifIdFiscal_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(a.rifIdFiscal_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>h(o=>({...o,rifIdFiscal_file:null,rifIdFiscal:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(be,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Permisos de Operación:"}),!a.permisoOperacion_file&&!a.permisoOperacion?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,.pdf",id:"permisoOperacion-upload",className:"sr-only",onChange:o=>{var t;const s=(t=o.target.files)==null?void 0:t[0];s&&h(p=>({...p,permisoOperacion_file:s}))}}),e.jsx("label",{htmlFor:"permisoOperacion-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(to,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Imágenes o PDF"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.permisoOperacion_file?a.permisoOperacion_file.type.includes("pdf")?e.jsx(he,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}):(Co=a.permisoOperacion)!=null&&Co.includes(".pdf")?e.jsx(he,{className:"w-6 h-6 text-red-500"}):e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.permisoOperacion_file?a.permisoOperacion_file.name:O(a.permisoOperacion)}),a.permisoOperacion_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(a.permisoOperacion_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>h(o=>({...o,permisoOperacion_file:null,permisoOperacion:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(be,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold text-gray-700 mb-2",children:"Logotipo Negocio:"}),!a.logotipoNegocio_file&&!a.logotipoNegocio?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"logotipoNegocio-upload",className:"sr-only",onChange:o=>{var t;const s=(t=o.target.files)==null?void 0:t[0];s&&h(p=>({...p,logotipoNegocio_file:s}))}}),e.jsx("label",{htmlFor:"logotipoNegocio-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(ae,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo imágenes"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.logotipoNegocio_file?a.logotipoNegocio_file.name:O(a.logotipoNegocio)}),a.logotipoNegocio_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(a.logotipoNegocio_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>h(o=>({...o,logotipoNegocio_file:null,logotipoNegocio:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(be,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 mb-2",children:["Foto Frente Taller: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!a.fotoFrenteTaller_file&&!a.fotoFrenteTaller?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"fotoFrenteTaller-upload",className:"sr-only",onChange:o=>{var t;const s=(t=o.target.files)==null?void 0:t[0];s&&h(p=>({...p,fotoFrenteTaller_file:s}))}}),e.jsx("label",{htmlFor:"fotoFrenteTaller-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(Te,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo imágenes"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.fotoFrenteTaller_file?a.fotoFrenteTaller_file.name:O(a.fotoFrenteTaller)}),a.fotoFrenteTaller_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(a.fotoFrenteTaller_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>h(o=>({...o,fotoFrenteTaller_file:null,fotoFrenteTaller:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(be,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 mb-2",children:["Foto Interna Taller: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!a.fotoInternaTaller_file&&!a.fotoInternaTaller?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"fotoInternaTaller-upload",className:"sr-only",onChange:o=>{var t;const s=(t=o.target.files)==null?void 0:t[0];s&&h(p=>({...p,fotoInternaTaller_file:s}))}}),e.jsx("label",{htmlFor:"fotoInternaTaller-upload",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[e.jsx(Te,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600 hover:text-blue-700",children:"Click para subir"})," o arrastra aquí"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo imágenes"})]})})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.fotoInternaTaller_file?a.fotoInternaTaller_file.name:O(a.fotoInternaTaller)}),a.fotoInternaTaller_file&&e.jsxs("p",{className:"text-xs text-gray-500",children:[(a.fotoInternaTaller_file.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>h(o=>({...o,fotoInternaTaller_file:null,fotoInternaTaller:""})),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(be,{className:"w-5 h-5"})})]})]})]})]})}),e.jsx(Ra,{isOpen:aa,onClose:ra,service:ta,onServiceUpdated:ia}),sa&&ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:yo,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:ee.name}),e.jsx("button",{onClick:yo,className:"text-gray-500 hover:text-gray-700 focus:outline-none transition-colors",children:e.jsx(be,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4 bg-gray-100 flex items-center justify-center",children:ee.type==="pdf"?e.jsx("iframe",{src:ee.url,className:"w-full h-full min-h-[600px] border-0",title:ee.name}):e.jsx("img",{src:ee.url,alt:ee.name,className:"max-w-full max-h-[70vh] object-contain rounded-lg shadow-lg",onError:o=>{const s=o.target;s.style.display="none";const t=document.createElement("div");t.className="text-center text-gray-500 p-8",t.innerHTML=`
                                            <FaFilePdf class="w-16 h-16 mx-auto mb-4 text-gray-400" />
                                            <p class="text-lg font-semibold">Error al cargar la imagen</p>
                                            <p class="text-sm">No se pudo mostrar el documento</p>
                                        `;const p=s.parentElement;p&&p.appendChild(t)}})}),e.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:e.jsx("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Abrir en nueva pestaña"})})]})})]})};export{rs as default};
