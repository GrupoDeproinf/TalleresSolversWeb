import{p as U,a4 as P,j as e}from"./index-ATNefdVG.js";import{F as E,a as n}from"./FormItem-YT9PXtwB.js";import{I as d}from"./Input-esXMioi-.js";import{B as g}from"./Button-m8cr7QK0.js";import{A as v}from"./Alert-YDCIg78L.js";import{P as j}from"./PasswordInput-evRU9UnC.js";import{A as I}from"./ActionLink-doD8EAGP.js";import{u as T}from"./useTimeOutMessage-Gzxjgh43.js";import{F as $,a as M,b as t}from"./formik.esm-dqEqoyez.js";import{c as A,a as i,f as q}from"./index.esm-veTBKOrz.js";import"./index-74gKM8Gk.js";import"./Badge-7j32ABcM.js";import"./Calendar-kXRbY7HP.js";import"./Card-OSPH2pm3.js";import"./index-J2oOIxTS.js";import"./index-Ww4KSR8x.js";import"./Dialog-01bjbLh0.js";import"./Drawer-TF5epqni.js";import"./index-OgT6bzbj.js";import"./index-Yk7DAYzs.js";import"./index-AdZu4ZEf.js";import"./index-Njt5DKLW.js";import{t as S,N as F}from"./toast-ArUM2hkn.js";import"./Progress-8N-5zDn7.js";import"./index-Xj1V1DYV.js";import"./RangeCalendar-KFdi8RAV.js";import"./ScrollBar-wOU87srT.js";import"./index-wOmcTQB3.js";import"./Select-meFjX2OX.js";import"./Skeleton-rqvm5li9.js";import"./index-yyjad8ES.js";import"./Switcher-Q2_gTjX7.js";import"./index-1QBWWPtH.js";import"./index-8Ze0HwPQ.js";import"./Tag-jU5n4W4w.js";import"./index-9p-8nnWt.js";import"./index-O5FvOx90.js";import"./Tooltip-RPBixJuV.js";import"./Upload-sm3Naufp.js";const J=A().shape({nombre:i().required("Por favor ingrese su nombre"),email:i().email("Email inválido").required("Por favor ingrese su email").test("termina-en-com",'El email debe terminar en ".com"',l=>(l==null?void 0:l.endsWith(".com"))??!1),password:i().min(6,"La contraseña debe tener al menos 6 caracteres").required("Por favor ingrese una contraseña"),confirmPassword:i().oneOf([q("password")],"Las contraseñas no coinciden").required("Por favor confirme su contraseña"),cedulaOrif:i().when("typeUser",{is:"Taller",then:()=>i().matches(/^[V,E,C,G,J,P]-\d+$/,"Solo se permiten números").min(3,"No puede tener menos de 3 dígitos").max(12,"No puede tener más de 10 dígitos").required("Este campo es obligatorio"),otherwise:()=>i().matches(/^[V,E,C,G,J,P]-\d+$/,"Solo se permiten números").min(3,"No puede tener menos de 3 dígitos").max(12,"No puede tener más de 10 dígitos").required("Este campo es obligatorio")}),phone:i().matches(/^[1-9]\d{10}$/,"El teléfono debe tener 11 dígitos y no puede comenzar con 0").required("Por favor ingrese su número telefónico")}),Oe=l=>{const{disableSubmit:p=!1,className:y,signInUrl:C="/sign-in"}=l,{signUp:w}=U(),[x,L]=T();P();const N=async(r,o)=>{o(!0);const f={nombre:r.nombre,email:r.email.toLowerCase(),password:r.password,phone:r.phone,typeUser:r.typeUser,status:"En espera por aprobación",createdAt:Date.now(),...r.typeUser==="Cliente"?{cedula:r.cedulaOrif}:{rif:r.cedulaOrif}};w(f).then(s=>{console.log(s)}).catch(s=>{console.error(s);const a={"auth/email-already-in-use":"La dirección de correo electrónico ya está en uso por otra cuenta"},m=s.code in a?a[s.code]:"Este correo ya esta registrado.";O(m)}),o(!1)},O=(r="")=>{S.push(e.jsx(F,{title:"Atención",type:"warning",duration:2500,children:r}),{placement:"top-center"})};return e.jsxs("div",{className:y,children:[x&&e.jsx(v,{showIcon:!0,className:"mb-4",type:"danger",children:x}),e.jsx($,{initialValues:{nombre:"",password:"",confirmPassword:"",email:"",cedulaOrif:"",phone:"",typeUser:"Cliente",status:"En espera por aprobación"},validationSchema:J,validateOnChange:!1,validateOnBlur:!0,onSubmit:(r,{setSubmitting:o})=>{p?o(!1):N(r,o)},children:({touched:r,errors:o,isSubmitting:f,values:s,setFieldValue:a})=>{var m;return e.jsxs(M,{children:[e.jsxs(E,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{children:"Tipo de usuario:"}),e.jsxs("div",{className:"flex space-x-4 mt-2",children:[e.jsx(g,{variant:s.typeUser==="Cliente"?"solid":"default",onClick:()=>a("typeUser","Cliente"),type:"button",children:"Cliente"}),e.jsx(g,{variant:s.typeUser==="Taller"?"solid":"default",onClick:()=>a("typeUser","Taller"),type:"button",children:"Taller"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(n,{label:s.typeUser==="Taller"?"Nombre del Taller":"Nombre y Apellido",invalid:o.nombre&&r.nombre,errorMessage:o.nombre,children:e.jsx(t,{type:"text",autoComplete:"off",name:"nombre",placeholder:s.typeUser==="Taller"?"Ingrese el nombre del taller":"Ingrese su nombre",component:d})}),e.jsx(n,{label:s.typeUser==="Cliente"?"Cédula":"Rif",invalid:o.cedulaOrif&&r.cedulaOrif,errorMessage:o.cedulaOrif,children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("select",{value:s.cedulaOrif?s.cedulaOrif.split("-")[0]:s.typeUser==="Cliente"?"V":"J",onChange:u=>{var c;const h=((c=s.cedulaOrif)==null?void 0:c.split("-")[1])||"";a("cedulaOrif",`${u.target.value}-${h}`)},className:" p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"V",children:"V-"}),e.jsx("option",{value:"E",children:"E-"}),e.jsx("option",{value:"C",children:"C-"}),e.jsx("option",{value:"G",children:"G-"}),e.jsx("option",{value:"J",children:"J-"}),e.jsx("option",{value:"P",children:"P-"})]}),e.jsx(t,{type:"text",autoComplete:"off",name:"cedulaOrif",placeholder:s.typeUser==="Cliente"?"Ingrese su cédula":"Ingrese su Rif",value:((m=s.cedulaOrif)==null?void 0:m.split("-")[1])||"",onChange:u=>{var b;const h=((b=s.cedulaOrif)==null?void 0:b.split("-")[0])||"V",c=u.target.value.replace(/\D/g,"");a("cedulaOrif",`${h}-${c}`)},component:d,className:"p-3 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 mx-2 w-full"})]})}),e.jsx(n,{label:"Email",invalid:o.email&&r.email,errorMessage:o.email,children:e.jsx(t,{type:"email",autoComplete:"off",name:"email",placeholder:"Ingrese su email",component:d})}),e.jsx(n,{label:"Número Teléfonico",invalid:o.phone&&r.phone,errorMessage:o.phone,children:e.jsx(t,{type:"text",autoComplete:"off",name:"phone",placeholder:"Ejem (4141234567)",component:d})}),e.jsx(n,{label:"Contraseña",invalid:o.password&&r.password,errorMessage:o.password,children:e.jsx(t,{name:"password",component:j,placeholder:"Ingrese su contraseña"})}),e.jsx(n,{label:"Confirmar Contraseña",invalid:o.confirmPassword&&r.confirmPassword,errorMessage:o.confirmPassword,children:e.jsx(t,{name:"confirmPassword",component:j,placeholder:"Confirme su contraseña"})})]}),e.jsx(g,{type:"submit",variant:p?"default":"solid",disabled:f||p,className:"w-full mt-4",children:"Registrarse"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(I,{href:C,children:"¿Ya tienes una cuenta? Inicia sesión"})})]})}})]})};export{Oe as S};
