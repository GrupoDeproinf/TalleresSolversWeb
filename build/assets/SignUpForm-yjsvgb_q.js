import{p as P,a4 as U,j as e}from"./index-NsbKStwV.js";import{F as v,a}from"./FormItem-a3aLHqrY.js";import{I as d}from"./Input-BlRH7Tqm.js";import{B as g}from"./Button-XnwKhdvE.js";import{A as E}from"./Alert-SMRHUaiv.js";import{P as j}from"./PasswordInput-4FNM0rQq.js";import{A as I}from"./ActionLink-TLTvBxlw.js";import{u as T}from"./useTimeOutMessage-KRg747ZM.js";import{F as $,a as M,b as t}from"./formik.esm-tsJTNbUL.js";import{c as A,a as i,f as q}from"./index.esm-tcsgx5EQ.js";import"./index-LXScpEcU.js";import"./Badge-CKoNnQYV.js";import"./Calendar-Z19pUmfw.js";import"./Card-VqsFwQIo.js";import"./index-XuLXFUW7.js";import"./index-bABZBMXE.js";import"./Dialog-M1Ajs5BG.js";import"./Drawer-kAauoAEG.js";import"./index-1__fuqPr.js";import"./index-taQNVGTU.js";import"./index-XtR_CO3S.js";import"./index-9eKqhUCi.js";import{t as S,N as F}from"./toast-xWR8t_2g.js";import"./Progress-aKyPi4WI.js";import"./index-N2TpchCk.js";import"./RangeCalendar-ijReFoaZ.js";import"./ScrollBar-CtQyAJP5.js";import"./index-xDsJSmdq.js";import"./Select-aNPQ1OPY.js";import"./Skeleton-2gEbp5HC.js";import"./index-706hdkS9.js";import"./Switcher-XI3kw8Fv.js";import"./index-WaLOIBvG.js";import"./index-mAElvMN0.js";import"./Tag-jyrf7RmZ.js";import"./index-R4Junk9C.js";import"./index-1CjGwnct.js";import"./Tooltip-i9ud1ENZ.js";import"./Upload-x6WrsXGM.js";const J=A().shape({nombre:i().required("Por favor ingrese su nombre"),email:i().email("Email inválido").required("Por favor ingrese su email").test("termina-en-com",'El email debe terminar en ".com"',l=>(l==null?void 0:l.endsWith(".com"))??!1),password:i().min(6,"La contraseña debe tener al menos 6 caracteres").required("Por favor ingrese una contraseña"),confirmPassword:i().oneOf([q("password")],"Las contraseñas no coinciden").required("Por favor confirme su contraseña"),cedulaOrif:i().when("typeUser",{is:"Taller",then:()=>i().matches(/^[V,E,C,G,J,P]-\d+$/,"Solo se permiten números").min(3,"No puede tener menos de 3 dígitos").max(12,"No puede tener más de 10 dígitos").required("Este campo es obligatorio"),otherwise:()=>i().matches(/^[V,E,C,G,J,P]-\d+$/,"Solo se permiten números").min(3,"No puede tener menos de 3 dígitos").max(12,"No puede tener más de 10 dígitos").required("Este campo es obligatorio")}),phone:i().matches(/^[1-9]\d{10}$/,"El teléfono debe tener 11 dígitos y no puede comenzar con 0").required("Por favor ingrese su número telefónico")}),Oe=l=>{const{disableSubmit:p=!1,className:y,signInUrl:C="/sign-in"}=l,{signUp:w}=P(),[x,L]=T();U();const N=async(r,o)=>{o(!0);const f={nombre:r.nombre,email:r.email.toLowerCase(),password:r.password,phone:r.phone,typeUser:r.typeUser,status:"Pendiente",createdAt:Date.now(),...r.typeUser==="Cliente"?{cedula:r.cedulaOrif}:{rif:r.cedulaOrif}};w(f).then(s=>{console.log(s)}).catch(s=>{console.error(s);const n={"auth/email-already-in-use":"La dirección de correo electrónico ya está en uso por otra cuenta"},m=s.code in n?n[s.code]:"Este correo ya esta registrado.";O(m)}),o(!1)},O=(r="")=>{S.push(e.jsx(F,{title:"Atención",type:"warning",duration:2500,children:r}),{placement:"top-center"})};return e.jsxs("div",{className:y,children:[x&&e.jsx(E,{showIcon:!0,className:"mb-4",type:"danger",children:x}),e.jsx($,{initialValues:{nombre:"",password:"",confirmPassword:"",email:"",cedulaOrif:"",phone:"",typeUser:"Cliente",status:"Pendiente"},validationSchema:J,validateOnChange:!1,validateOnBlur:!0,onSubmit:(r,{setSubmitting:o})=>{p?o(!1):N(r,o)},children:({touched:r,errors:o,isSubmitting:f,values:s,setFieldValue:n})=>{var m;return e.jsxs(M,{children:[e.jsxs(v,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{children:"Tipo de usuario:"}),e.jsxs("div",{className:"flex space-x-4 mt-2",children:[e.jsx(g,{variant:s.typeUser==="Cliente"?"solid":"default",onClick:()=>n("typeUser","Cliente"),type:"button",children:"Cliente"}),e.jsx(g,{variant:s.typeUser==="Taller"?"solid":"default",onClick:()=>n("typeUser","Taller"),type:"button",children:"Taller"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(a,{label:s.typeUser==="Taller"?"Nombre del Taller":"Nombre y Apellido",invalid:o.nombre&&r.nombre,errorMessage:o.nombre,children:e.jsx(t,{type:"text",autoComplete:"off",name:"nombre",placeholder:s.typeUser==="Taller"?"Ingrese el nombre del taller":"Ingrese su nombre",component:d})}),e.jsx(a,{label:s.typeUser==="Cliente"?"Cédula":"Rif",invalid:o.cedulaOrif&&r.cedulaOrif,errorMessage:o.cedulaOrif,children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("select",{value:s.cedulaOrif?s.cedulaOrif.split("-")[0]:s.typeUser==="Cliente"?"V":"J",onChange:u=>{var c;const h=((c=s.cedulaOrif)==null?void 0:c.split("-")[1])||"";n("cedulaOrif",`${u.target.value}-${h}`)},className:" p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200",children:[e.jsx("option",{value:"V",children:"V-"}),e.jsx("option",{value:"E",children:"E-"}),e.jsx("option",{value:"C",children:"C-"}),e.jsx("option",{value:"G",children:"G-"}),e.jsx("option",{value:"J",children:"J-"}),e.jsx("option",{value:"P",children:"P-"})]}),e.jsx(t,{type:"text",autoComplete:"off",name:"cedulaOrif",placeholder:s.typeUser==="Cliente"?"Ingrese su cédula":"Ingrese su Rif",value:((m=s.cedulaOrif)==null?void 0:m.split("-")[1])||"",onChange:u=>{var b;const h=((b=s.cedulaOrif)==null?void 0:b.split("-")[0])||"V",c=u.target.value.replace(/\D/g,"");n("cedulaOrif",`${h}-${c}`)},component:d,className:"p-3 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 mx-2 w-full"})]})}),e.jsx(a,{label:"Email",invalid:o.email&&r.email,errorMessage:o.email,children:e.jsx(t,{type:"email",autoComplete:"off",name:"email",placeholder:"Ingrese su email",component:d})}),e.jsx(a,{label:"Número Teléfonico",invalid:o.phone&&r.phone,errorMessage:o.phone,children:e.jsx(t,{type:"text",autoComplete:"off",name:"phone",placeholder:"Ejem (4141234567)",component:d})}),e.jsx(a,{label:"Contraseña",invalid:o.password&&r.password,errorMessage:o.password,children:e.jsx(t,{name:"password",component:j,placeholder:"Ingrese su contraseña"})}),e.jsx(a,{label:"Confirmar Contraseña",invalid:o.confirmPassword&&r.confirmPassword,errorMessage:o.confirmPassword,children:e.jsx(t,{name:"confirmPassword",component:j,placeholder:"Confirme su contraseña"})})]}),e.jsx(g,{type:"submit",variant:p?"default":"solid",disabled:f||p,className:"w-full mt-4",children:"Registrarse"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(I,{href:C,children:"¿Ya tienes una cuenta? Inicia sesión"})})]})}})]})};export{Oe as S};
