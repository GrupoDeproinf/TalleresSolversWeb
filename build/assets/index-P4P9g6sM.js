import{j as e,r as n,a9 as S,a8 as y,ab as v,a7 as E,aa as w}from"./index-KuHpp12A.js";import{G as N,M}from"./esm-kBf_1Hn3.js";const C=({markers:o,center:i})=>e.jsx("div",{style:{height:"450px",width:"100%"},children:e.jsx(N,{center:i,zoom:10,mapContainerStyle:{height:"400px",width:"100%",marginTop:"10px"},children:o.map(t=>e.jsx(M,{position:{lat:t.lat,lng:t.lng},title:t.title},t.id))})}),G=()=>{const[o,i]=n.useState([]),[d,t]=n.useState([]),[g,p]=n.useState(""),[f,j]=n.useState({lat:10.47915,lng:-66.90618}),h=n.useCallback(async()=>{try{const s=E(y(S,"Usuarios"),v("typeUser","==","Taller")),l=await w(s),r=[],c=new Set;l.docs.forEach(u=>{var x,m;const a=u.data();(x=a.ubicacion)!=null&&x.lat&&((m=a.ubicacion)!=null&&m.lng)&&r.push({id:u.id,lat:a.ubicacion.lat,lng:a.ubicacion.lng,title:a.nombre||"Sin Nombre",taller:a.estado||"Sin Estado"}),a.estado&&c.add(a.estado)}),i(r),t(Array.from(c))}catch(s){console.error("Error fetching garages:",s)}},[]);n.useEffect(()=>{h()},[h]);const b=s=>{const l=s.target.value;if(p(l),l){const r=o.filter(c=>c.taller===l);r.length>0&&j({lat:r[0].lat,lng:r[0].lng})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("h1",{className:"mb-6 flex justify-start items-center space-x-4",children:e.jsx("span",{className:"text-[#000B7E]",children:"UbicaciÃ³n Talleres"})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"relative w-80 ml-4",children:e.jsxs("select",{className:"h-10 w-full py-2 px-4 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:b,children:[e.jsx("option",{value:"",children:"Selecciona un estado"}),d.map(s=>e.jsx("option",{value:s,children:s},s))]})})})})]}),e.jsx("div",{children:e.jsx(C,{markers:o.filter(s=>!g||s.taller===g),center:f})})]})},q=G;export{q as default};
