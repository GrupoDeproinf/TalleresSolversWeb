import{a0 as S,a1 as R,a2 as I,a3 as M,j as e,r as c,T as C,a4 as f,c as d,a5 as P,a as E}from"./index-_feUBWkF.js";import{a as V}from"./ProjectService-5XAxKfjA.js";import{C as m}from"./Card-fXn1hgP9.js";import{S as x}from"./index-F9R31yWw.js";import{B as k}from"./Badge-TmEmdow9.js";import{C as B}from"./Chart-MgtQfCQH.js";import{C as v}from"./chart.constant-trWzQ8zn.js";import{i as T}from"./Views-NoPs0swz.js";import{B as b}from"./Button-jcq0xEfh.js";import{T as A}from"./index--K6mHtPM.js";import{T as u}from"./Tag-RmI7uqBT.js";import{U as H}from"./UsersAvatarGroup-TcNc8ALy.js";import{A as L}from"./ActionLink-m3Lf9aUV.js";import{u as O,g as z,f as y}from"./index-IwiwqbVe.js";import{L as K}from"./ListItem-VBC5h0w1.js";import{C as F}from"./Calendar-OEPJiOUd.js";import{u as G}from"./useThemeClass-Gzk1KTJ6.js";import{A as Y,B as U,C as $}from"./index.esm-CyL_iEBq.js";import{T as h}from"./index-ENU_IEPp.js";import{T as W,E as _}from"./TimeLineAvatar-zCT7S7jL.js";import"./ApiService-t5__pVY7.js";import"./useControllableState-Z5L6i6Et.js";import"./context-w88CtZWU.js";import"./chart.config-uoBGngcy.js";import"./index-Xr0iHSGr.js";import"./index.esm-c6ShvaQW.js";import"./Tooltip-tqY3hXOR.js";import"./index.esm-bIknb-8m.js";import"./floating-ui.react-AOig1bqs.js";import"./floating-ui.dom-0rLBacrf.js";import"./index-C1ft9MxP.js";import"./motion-2zhnpuIh.js";import"./index-vYF_FpU2.js";import"./useMergeRef-Rt_Crb27.js";import"./useTwColorByName-Tc8Lhp9q.js";import"./index-5qYT1f9K.js";import"./useRootClose--xQa3G5y.js";import"./isNil-uGA-FeKR.js";import"./useUniqueId-XtUBe_3h.js";import"./toString-LmJFJgEq.js";import"./chainedFunction-ltcSYACe.js";import"./index-xnMpDD1K.js";import"./EllipsisButton-lRhbZ3k-.js";import"./index.esm-vV1KXhJ0.js";import"./Progress-hlvl7h9I.js";import"./mapCloneElement-bHmR-YFq.js";import"./index-lvdI60UC.js";import"./isLastChild-6BXlVJ47.js";const D="projectDashboard",j=S(D+"/getProjectDashboardData",async()=>(await V()).data),q={loading:!0,dashboardData:{}},J=R({name:`${D}/state`,initialState:q,reducers:{},extraReducers:r=>{r.addCase(j.fulfilled,(s,a)=>{s.dashboardData=a.payload,s.loading=!1}).addCase(j.pending,s=>{s.loading=!0})}}),Q=J.reducer,X=I({data:Q}),g=M,Z=({userName:r,taskCount:s})=>e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-1",children:["Hello, ",r,"!"]}),e.jsxs("p",{children:["You have ",s," tasks on hand."]})]}),p=({label:r,value:s,badgeClass:a,showBadge:o=!0})=>e.jsxs("div",{className:"flex gap-2",children:[o&&e.jsx(k,{className:"mt-2.5",innerClass:a}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold",children:s}),e.jsx("p",{children:r})]})]}),ee=({data:r={},className:s})=>{const[a,o]=c.useState(["weekly"]),[t,i]=c.useState(!1),l=g(n=>n.theme.layout.sideNavCollapse);return c.useEffect(()=>{i(!0);const n=setTimeout(()=>i(!1),300);return()=>{clearTimeout(n)}},[r,l]),e.jsxs(m,{className:s,children:[e.jsxs("div",{className:"flex sm:flex-row flex-col md:items-center justify-between mb-6 gap-4",children:[e.jsx("h4",{children:"Task Overview"}),e.jsxs(x,{value:a,size:"sm",onChange:n=>o(n),children:[e.jsx(x.Item,{value:"monthly",children:"Monthly"}),e.jsx(x.Item,{value:"weekly",children:"Weekly"}),e.jsx(x.Item,{value:"daily",children:"Daily"})]})]}),!T(r)&&!t&&r.chart&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{children:e.jsx(p,{showBadge:!1,label:"Total Tasks",value:r.chart[a[0]].total})}),e.jsxs("div",{className:"flex gap-x-6",children:[e.jsx(p,{badgeClass:"bg-indigo-600",label:r.chart[a[0]].series[0].name,value:r.chart[a[0]].onGoing}),e.jsx(p,{badgeClass:"bg-emerald-500",label:r.chart[a[0]].series[1].name,value:r.chart[a[0]].finished})]})]}),e.jsx("div",{children:e.jsx(B,{series:r.chart[a[0]].series,xAxis:r.chart[a[0]].range,type:"bar",customOptions:{colors:[v[0],v[2]],legend:{show:!1}}})})]}),e.jsx(C,{loading:t,type:"cover",children:t&&e.jsx("div",{className:"h-[300px]"})})]})},{Tr:N,Th:se,Td:re,THead:te,TBody:ae}=A,ie=({priority:r})=>{switch(r){case 0:return e.jsx(u,{className:"text-red-600 bg-red-100 dark:text-red-100 dark:bg-red-500/20 rounded border-0",children:"High"});case 1:return e.jsx(u,{className:"text-amber-600 bg-amber-100 dark:text-amber-100 dark:bg-amber-500/20 rounded border-0",children:"Medium"});case 2:return e.jsx(u,{className:"bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-100 rounded border-0",children:"Low"});default:return null}},le=({data:r=[]})=>{const s=f(),a=c.useMemo(()=>[{header:"Task ID",accessorKey:"taskId",cell:i=>{const{taskId:l}=i.row.original;return e.jsx(L,{themeColor:!1,className:"font-semibold",to:"/app/project/scrum-board",children:l})}},{header:"Subject",accessorKey:"taskSubject"},{header:"Priority",accessorKey:"priority",cell:i=>{const{priority:l}=i.row.original;return e.jsx(ie,{priority:l})}},{header:"Assignees",accessorKey:"Assignees",cell:i=>{const{assignees:l}=i.row.original;return e.jsx(H,{users:l})}}],[]),o=O({data:r,columns:a,getCoreRowModel:z()}),t=()=>{s("/app/project/issue")};return e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{children:"My Tasks"}),e.jsx(b,{size:"sm",onClick:t,children:"View All"})]}),e.jsxs(A,{children:[e.jsx(te,{children:o.getHeaderGroups().map(i=>e.jsx(N,{children:i.headers.map(l=>e.jsx(se,{colSpan:l.colSpan,children:y(l.column.columnDef.header,l.getContext())},l.id))},i.id))}),e.jsx(ae,{children:o.getRowModel().rows.map(i=>e.jsx(N,{children:i.getVisibleCells().map(l=>e.jsx(re,{children:y(l.column.columnDef.cell,l.getContext())},l.id))},i.id))})]})]})},oe=({data:r=[]})=>{const s=f(),a=()=>{s("/app/project/project-list")};return e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{children:"Projects"}),e.jsx(b,{size:"sm",onClick:a,children:"View All"})]}),r.map(o=>e.jsx(K,{cardBorder:!0,data:o},o.id))]})},w=r=>{const s=new Date;return r.getDate()===s.getDate()&&r.getMonth()===s.getMonth()&&r.getFullYear()===s.getFullYear()},ce=({type:r})=>{const s="rounded-lg h-10 w-10 text-lg flex items-center justify-center";switch(r){case"meeting":return e.jsx("div",{className:d(s,"text-indigo-600 bg-indigo-100 dark:text-indigo-100 dark:bg-indigo-500/20"),children:e.jsx($,{})});case"task":return e.jsx("div",{className:d(s,"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100"),children:e.jsx(U,{})});case"workshop":return e.jsx("div",{className:d(s,"text-amber-600 bg-amber-100 dark:text-amber-100 dark:bg-amber-500/20"),children:e.jsx(Y,{})});default:return null}},ne=({data:r=[]})=>{const[s,a]=c.useState(),{textTheme:o}=G();return e.jsxs(m,{className:"mb-4",children:[e.jsx("div",{className:"mx-auto max-w-[420px]",children:e.jsx(F,{value:s,dayClassName:(t,{selected:i})=>{const l="text-base";return w(t)&&!i?d(l,o):i?d(l,"text-white"):l},dayStyle:()=>({height:48}),renderDay:t=>{const i=t.getDate();return w(t)?e.jsxs("span",{className:"relative flex justify-center items-center w-full h-full",children:[i,e.jsx(k,{className:"absolute bottom-1",innerClass:"h-1 w-1"})]}):e.jsx("span",{children:i})},onChange:t=>{a(t)}})}),e.jsx("hr",{className:"my-6"}),e.jsx("h5",{className:"mb-4",children:"Schedule"}),r.map(t=>e.jsxs("div",{className:"flex items-center justify-between rounded-md mb-2 p-2 hover:bg-gray-50 dark:hover:bg-gray-600/40 cursor-pointer user-select",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{type:t.type}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-bold",children:t.eventName}),e.jsx("p",{children:t.desciption})]})]}),e.jsx("span",{children:t.time})]},t.id))]})},de=({data:r=[]})=>{const s=f(),a=()=>{s("/app/account/activity-log")};return e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{children:"Activitiess"}),e.jsx(b,{size:"sm",onClick:a,children:"View All"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(h,{children:T(r)?e.jsx(h.Item,{children:"No Activities"}):r.map((o,t)=>e.jsx(h.Item,{media:e.jsx(W,{data:o}),children:e.jsx(_,{compact:!0,data:o})},o.type+t))})})]})};P("projectDashboard",X);const me=()=>{const r=E(),s=g(t=>t.projectDashboard.data.dashboardData),a=g(t=>t.projectDashboard.data.loading);c.useEffect(()=>{o()},[]);const o=()=>{r(j())};return e.jsx("div",{className:"flex flex-col gap-4 h-full",children:e.jsxs(C,{loading:a,children:[e.jsx(Z,{userName:s==null?void 0:s.userName,taskCount:s==null?void 0:s.taskCount}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 flex-auto",children:[e.jsx(ee,{data:s==null?void 0:s.projectOverviewData}),e.jsx(le,{data:s==null?void 0:s.myTasksData}),e.jsx(oe,{data:s==null?void 0:s.projectsData})]}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"xl:w-[380px]",children:[e.jsx(ne,{data:s==null?void 0:s.scheduleData}),e.jsx(de,{data:s==null?void 0:s.activitiesData})]})})]})]})})},ls=me;export{ls as default};
