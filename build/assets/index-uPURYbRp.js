import{a0 as x,a1 as f,a2 as k,a3 as C,a as m,r as p,j as e,a4 as v,b4 as N,T as S,a5 as w}from"./index-KuHpp12A.js";import{C as h}from"./Views-na6mpSjV.js";import{a as T,b as A}from"./KnowledgeBaseService-OAuO0wW0.js";import{I as H}from"./index-zZsRSxs0.js";import{I as B}from"./Input-GobjejK8.js";import{S as q}from"./Select-5bGMEDLO.js";import{B as I}from"./Button-eyFfbJth.js";import{t as R,N as $}from"./toast-atGiHx5-.js";import{D,aw as E,ai as L}from"./index.esm-kBL7sQe6.js";import{C as b}from"./Card-vm7RtGp9.js";import{D as G}from"./DoubleSidedImage-caZxjd_P.js";import{T as M}from"./Tag-Yx_1PHzj.js";import{U as P}from"./UsersAvatarGroup-rz8y2_jC.js";import"./ApiService-nI8UBTDf.js";import"./context-7oHEF7cI.js";import"./isNil-zyEZOlXF.js";import"./get-0LXG4Wha.js";import"./_MapCache-nUJPUFCI.js";import"./toString-LYYw6rQY.js";import"./toConsumableArray-YYxflNc8.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./setPrototypeOf-ahVgEFUp.js";import"./floating-ui.dom-0rLBacrf.js";import"./useTimeout-ti4Rp5j2.js";import"./CloseButton-iwuzLpEL.js";import"./StatusIcon-QGgKYtDM.js";import"./chainedFunction-ltcSYACe.js";import"./motion-N0SAmF_z.js";import"./Tooltip-dkuVUjr7.js";import"./index.esm-EUjj_JVu.js";import"./floating-ui.react-u3CjLYej.js";import"./index-WMG8M0Yi.js";import"./index-C_zqOf2w.js";import"./useMergeRef-Rt_Crb27.js";import"./useTwColorByName-cVGRHJjc.js";const u="knowledgeBaseHelpCenter",d=x(u+"/getCategories",async()=>(await T()).data),c=x(u+"/queryArticles",async a=>(await A(a)).data),F={loading:!1,isSearchResult:!1,searchCategory:"",queryText:"",categories:[],articles:[]},y=f({name:`${u}/state`,initialState:F,reducers:{setSearchCategory:(a,t)=>{a.searchCategory=t.payload},setQueryText:(a,t)=>{a.queryText=t.payload},setSearch:(a,t)=>{a.isSearchResult=t.payload}},extraReducers:a=>{a.addCase(d.fulfilled,(t,s)=>{t.loading=!1,t.categories=s.payload}).addCase(d.pending,t=>{t.loading=!0}).addCase(c.fulfilled,(t,s)=>{t.loading=!1,t.articles=s.payload}).addCase(c.pending,t=>{t.loading=!0})}}),{setSearchCategory:O,setQueryText:Q,setSearch:j}=y.actions,U=y.reducer,z=k({data:U}),o=C,g=[{label:"All",value:""},{label:"Survey",value:"survey"},{label:"Themes",value:"themes"},{label:"Security",value:"security"},{label:"Integration",value:"integration"},{label:"Media",value:"media"},{label:"Analytic",value:"analytic"},{label:"Chatbot",value:"chatbot"},{label:"Commission",value:"commission"}],W=()=>{const a=m(),t=o(n=>n.knowledgeBaseHelpCenter.data.searchCategory),s=p.useRef(null),i=()=>{if(s.current){const n=s.current.value;n?(a(c({queryText:n,category:t})),a(Q(n)),a(j(!0))):R.push(e.jsx($,{title:"Please key in any text to search",type:"danger"}),{placement:"top-center"})}},r=n=>{n&&a(O(n.value))};return e.jsx("section",{className:"flex flex-col justify-center h-[200px] bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600",children:e.jsxs(h,{className:"flex flex-col items-center px-4",children:[e.jsx("h3",{className:"mb-6 text-center",children:"Get your question answered quickly here!"}),e.jsxs(H,{className:"mb-4 xl:min-w-[800px]",children:[e.jsx(B,{ref:s,placeholder:"Search..."}),e.jsx("div",{className:"min-w-[120px]",children:e.jsx(q,{isSearchable:!1,placeholder:"Category",options:g,value:g.filter(n=>n.value===t),onChange:r})}),e.jsx(I,{icon:e.jsx("span",{className:"mx-4",children:e.jsx(D,{})}),onClick:i})]})]})})},_=({type:a})=>{const t=p.useMemo(()=>({src:`/img/thumbs/help-center-category-${a}.png`,darkModeSrc:`/img/thumbs/help-center-category-${a}-dark.png`}),[a]);return e.jsx(G,{...t,alt:""})},J=a=>{const{data:t=[]}=a,s=m(),i=r=>{s(c({queryText:"",category:r.toLowerCase()})),s(j(!0))};return e.jsx("div",{className:"grid lg:grid-cols-2 2xl:grid-cols-4 gap-4",children:t.map(r=>e.jsxs(b,{clickable:!0,onClick:()=>i(r.name),children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx(_,{type:r.id})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h5",{className:"mb-1",children:r.name}),e.jsxs("strong",{children:[r.articleCounts," "]}),e.jsx("span",{children:"Articles"})]})]},r.id))})},K=a=>{switch(a){case"themes":return"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100";case"survey":return"bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-100 dark:bg-blue-500/20 dark:text-blue-100";case"security":return"text-purple-500 bg-purple-100 dark:bg-purple-500/20 dark:text-purple-100";case"integration":return"text-pink-500 bg-pink-100 dark:bg-pink-500/20 dark:text-pink-100";case"media":return"text-cyan-500 bg-cyan-100 dark:bg-cyan-500/20 dark:text-cyan-100";case"analytic":return"text-orange-500 bg-orange-100 dark:bg-orange-500/20 dark:text-orange-100";case"chatbot":return"text-indigo-500 bg-indigo-100 dark:bg-indigo-500/20 dark:text-indigo-100";case"commission":return"text-teal-500 bg-teal-100 dark:bg-teal-500/20 dark:text-teal-100";default:return""}},V=a=>{const{data:t=[]}=a,s=v(),i=r=>{s(`/app/knowledge-base/article?${N({id:r})}`)};return e.jsx(e.Fragment,{children:t.map(r=>e.jsx("article",{children:e.jsx(b,{clickable:!0,className:"group mb-4",onClick:()=>i(r.id),children:e.jsxs("div",{className:"px-8 py-3 relative",children:[r.starred&&e.jsx("div",{className:"absolute ltr:left-0 rtl:right-0",children:e.jsx("div",{className:"text-amber-500 p-0.5 rounded-full border border-amber-500 mt-1",children:e.jsx(E,{})})}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"group-hover:underline",children:r.title}),e.jsx(M,{className:`border-0 rounded capitalize ${K(r.category)}`,children:r.category})]}),e.jsx("p",{children:r.content.length>230?r.content.substring(0,229)+"...":r.content}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Written by:"}),e.jsx(P,{avatarProps:{size:25},users:r.authors||[]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"text-lg"}),e.jsxs("span",{children:["Updated ",r.updateTime]})]})})]})]})})},r.id))})},X=()=>{const a=m(),t=o(l=>l.knowledgeBaseHelpCenter.data.categories),s=o(l=>l.knowledgeBaseHelpCenter.data.articles),i=o(l=>l.knowledgeBaseHelpCenter.data.loading),r=o(l=>l.knowledgeBaseHelpCenter.data.queryText),n=o(l=>l.knowledgeBaseHelpCenter.data.isSearchResult);return p.useEffect(()=>{t.length===0&&a(d())},[a,t.length]),e.jsx(S,{loading:i,children:n?e.jsx("section",{className:"max-w-[1000px] mx-auto",children:s.length>0?e.jsxs(e.Fragment,{children:[r&&e.jsxs("h4",{className:"mb-6",children:[s.length," result found for ","'",r,"'"]}),e.jsx(V,{data:s})]}):e.jsxs("h4",{className:"text-center",children:["No result found for ","'",r,"'"]})}):e.jsx(J,{data:t})})};w("knowledgeBaseHelpCenter",z);const Y=()=>e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(h,{children:e.jsx("div",{className:"mt-8 px-4",children:e.jsx(X,{})})})]}),$e=Y;export{$e as default};
