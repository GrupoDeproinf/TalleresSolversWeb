import{a0 as b,a1 as B,a2 as q,a3 as H,a as j,r as u,j as r,c as k,as as U,a4 as V,a5 as Q}from"./index-Nr7DOcs5.js";import{T as K}from"./index-Jo3TiA2s.js";import{A as G}from"./AdaptableCard-9_BPIhlC.js";import{c as Y}from"./CryptoService-vRXUylOn.js";import{c as h}from"./cloneDeep-Rfdj1wFF.js";import{A as _}from"./index-3dK65p4G.js";import{D as M}from"./DataTable-TKRMKjn2.js";import{B as D}from"./Button-RpRRBLhx.js";import{g as N}from"./GrowShrinkTag-oL3qhC09.js";import{N as x}from"./react-number-format.es-91ol-CqY.js";import{D as J}from"./Dialog-mo71bq2S.js";import{T as W,P as X}from"./ProceedTrade-XwgYJWpK.js";import{i as T}from"./Views-SzAC9t3D.js";import{I as Z}from"./Input-6raBYDQf.js";import{D as ee}from"./index.esm-hDm5I03d.js";import{d as oe}from"./debounce-W7VS2VY3.js";import"./useControllableState-nFLDxS-2.js";import"./Card-GtPtNWmu.js";import"./ApiService-no_y6BId.js";import"./_getAllKeys-7DpwFFi_.js";import"./_MapCache-zjtmu8-K.js";import"./useMergeRef-Rt_Crb27.js";import"./Tooltip-gLhVAyTO.js";import"./index.esm-ZAJo3edJ.js";import"./floating-ui.react-Siy9LDCN.js";import"./floating-ui.dom-0rLBacrf.js";import"./index-c5JwgfFM.js";import"./motion-GODN01Pl.js";import"./index-NkYS5vPG.js";import"./index.esm-7QtrnPrk.js";import"./index-Brff2YrL.js";import"./Select-PkSYplil.js";import"./toConsumableArray-YYxflNc8.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./setPrototypeOf-ahVgEFUp.js";import"./get-1iKrFfDd.js";import"./toString-xXAQzo7k.js";import"./context-gbG70jxa.js";import"./index-p7qyf0aj.js";import"./_baseIsEqual-Wz-ZGWgV.js";import"./TableRowSkeleton-3-_czw1L.js";import"./Skeleton-5yRo8qaR.js";import"./index-bkn0uZwU.js";import"./Tag-A5Cp-iKQ.js";import"./index-K_MsMzaT.js";import"./index-YzJdvSvg.js";import"./CloseButton-s3M96kL4.js";import"./index-QZyWdjEP.js";import"./FormItem-U6G_YRIs.js";import"./Badge-7gcaibQO.js";import"./chart.constant-TjD2MtGL.js";import"./chart.config-sk6Rfgl2.js";import"./FormNumericInput-FChPD6U1.js";import"./react-tooltip.min-ofI0hGzZ.js";import"./RichTextEditor-7iajylLU.js";import"./SegmentItemOption-gBO_K8Yb.js";import"./useThemeClass-FVUT9oTI.js";import"./SvgIcon-BhIe7uuI.js";import"./formik.esm-0kcgy0iu.js";import"./index.esm-1XJFlNta.js";import"./isNil-8yPb6mot.js";const F="cryptoMarket",C=b(F+"/getMarketData",async t=>(await Y(t)).data),R={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},re={loading:!0,marketData:[],tableData:R,selectedTab:"all",tradeDialogOpen:!1,selectedRow:{}},z=B({name:`${F}/state`,initialState:re,reducers:{setSelectedTab:(t,a)=>{t.selectedTab=a.payload},setTableData:(t,a)=>{t.tableData=a.payload},setMarketData:(t,a)=>{t.marketData=a.payload},toggleTradeDialog:(t,a)=>{t.tradeDialogOpen=a.payload},setSelectedRow:(t,a)=>{t.selectedRow=a.payload}},extraReducers:t=>{t.addCase(C.fulfilled,(a,s)=>{a.loading=!1,a.tableData.total=s.payload.total,a.marketData=s.payload.data}).addCase(C.pending,a=>{a.loading=!0})}}),{setSelectedTab:se,setTableData:d,setMarketData:te,toggleTradeDialog:A,setSelectedRow:P}=z.actions,ae=z.reducer,ne=q({data:ae}),y=H,I=({row:t})=>{const a=j(),s=u.useCallback(()=>{a(A(!0)),a(P(t))},[a,t]);return r.jsx("div",{className:"ltr:text-right rtl:text-left",children:r.jsx(D,{size:"sm",onClick:s,children:"Trade"})})},ce=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{img:e,symbol:l,name:w}=o.row.original;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_,{src:e,size:"sm",className:"!bg-transparent"}),r.jsx("span",{className:"font-bold heading-text",children:l}),r.jsx("span",{children:w})]})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),suffix:" USD",thousandSeparator:!0})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsxs("span",{children:[e,"M"]})}},{header:"Market Cap",accessorKey:"marketCap",cell:o=>{const{marketCap:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28,className:"rounded-md"},loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},ie=({data:t,loading:a,tableData:s})=>{const n=U(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"24h Turnover",accessorKey:"turnOver",cell:o=>{const{turnOver:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},le=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},de=()=>{const t=j(),a=V(),s=y(m=>m.cryptoMarket.data.tradeDialogOpen),n=y(m=>m.cryptoMarket.data.selectedRow),[i,c]=u.useState({}),[g,p]=u.useState(!1),[o,e]=u.useState(""),l=()=>{t(A(!1)),setTimeout(()=>{t(P({})),c({}),p(!1),e("")},500)},w=(m,f,$)=>{f(!0),setTimeout(()=>{c({...m,type:$}),p(!1),e("")},500)},O=()=>{p(!0),setTimeout(()=>{e("SUCCESS")},1e3)},L=m=>{l(),m&&a("/app/crypto/wallets")};return r.jsxs(J,{isOpen:s,closable:!o,width:400,onRequestClose:l,onClose:l,children:[r.jsxs("h5",{className:"mb-4",children:[T(i)&&!o&&`Trade ${n.symbol}`,!T(i)&&!o&&"Order preview"]}),T(i)?r.jsx(W,{amount:n.price,symbol:n.symbol,onBuy:(m,f)=>w(m,f,"BUY"),onSell:(m,f)=>w(m,f,"SELL")}):r.jsx(X,{loading:g,status:o,onConfirm:O,onDone:L,...i})]})},E=u.forwardRef(({onInputChange:t},a)=>{const s=oe(n,500);function n(c){t==null||t(c)}const i=c=>{s(c.target.value)};return r.jsx(Z,{ref:a,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:r.jsx(ee,{className:"text-lg"}),onChange:i})});E.displayName="QueryInput";Q("cryptoMarket",ne);const{TabNav:S,TabList:pe,TabContent:v}=K,me=()=>{const t=j(),a=u.useRef(null),s=y(e=>e.cryptoMarket.data.marketData),n=y(e=>e.cryptoMarket.data.loading),i=y(e=>e.cryptoMarket.data.selectedTab),c=y(e=>e.cryptoMarket.data.tableData);u.useEffect(()=>{g()},[t,i,c]);const g=()=>{t(C({tab:i,...c}))},p=e=>{t(te([])),t(se(e)),t(d(R))},o=e=>{const l=h(c);l.query=e,l.pageIndex=1,typeof e=="string"&&e.length>1&&t(d(l)),typeof e=="string"&&e.length===0&&t(d(l))};return r.jsxs(r.Fragment,{children:[r.jsx(G,{children:r.jsxs(K,{value:i,variant:"pill",onChange:p,children:[r.jsxs("div",{className:"flex lg:items-center justify-between flex-col lg:flex-row gap-4",children:[r.jsxs(pe,{children:[r.jsx(S,{value:"all",children:"All"}),r.jsx(S,{value:"spot",children:"Spot"}),r.jsx(S,{value:"futures",children:"Futures"})]}),r.jsx(E,{ref:a,onInputChange:o})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx(v,{value:"all",children:r.jsx(ce,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"spot",children:r.jsx(ie,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"futures",children:r.jsx(le,{data:s,loading:n,tableData:c})})]})]})}),r.jsx(de,{})]})},To=me;export{To as default};
