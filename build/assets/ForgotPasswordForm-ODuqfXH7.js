import{r as x,j as e}from"./index-52EgRySw.js";import{F as j,a as f}from"./FormItem-S2Fc1pEG.js";import{I as g}from"./Input-n1H1dBhO.js";import{B as v}from"./Button-k9SRSx0b.js";import{A as F}from"./Alert-REAaPeWl.js";import{A as b}from"./ActionLink-ijEGsK3p.js";import{a as y}from"./AuthService-gyZrXl4F.js";import{u as N}from"./useTimeOutMessage-m1_auLPS.js";import{F as S,a as E,b as I}from"./formik.esm--11d8dIP.js";import{c as w,a as A}from"./index.esm-dwPctVVE.js";const M=w().shape({email:A().required("Please enter your email")}),O=t=>{const{disableSubmit:l=!1,className:m,signInUrl:d="/sign-in"}=t,[o,p]=x.useState(!1),[n,h]=N(),u=async(r,a)=>{var s,c;a(!0),console.log("Enviando correo a:",r.email);try{await y(r),p(!0)}catch(i){h(((c=(s=i==null?void 0:i.response)==null?void 0:s.data)==null?void 0:c.message)||i.toString())}finally{a(!1)}};return e.jsxs("div",{className:m,children:[e.jsx("div",{className:"mb-6",children:o?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-1",children:"Revisa tu correo electrónico"}),e.jsx("p",{children:"Hemos enviado una instrucción de recuperación de contraseña a su correo electrónico"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-1",children:"Recuperar contraseña"}),e.jsx("p",{children:"Por favor, ingresa tu dirección de correo electrónico para recibir un código de verificación."})]})}),n&&e.jsx(F,{showIcon:!0,className:"mb-4",type:"danger",children:n}),e.jsx(S,{initialValues:{email:""},validationSchema:M,onSubmit:(r,{setSubmitting:a})=>{l?a(!1):u(r,a)},children:({touched:r,errors:a,isSubmitting:s})=>e.jsx(E,{children:e.jsxs(j,{children:[e.jsx("div",{className:o?"hidden":"",children:e.jsx(f,{invalid:a.email&&r.email,errorMessage:a.email,children:e.jsx(I,{type:"email",autoComplete:"off",name:"email",placeholder:"Email",component:g})})}),e.jsx(v,{block:!0,loading:s,variant:"solid",type:"submit",children:o?"Reenviar correo electrónico":"Enviar correo electrónico"}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{children:"Volver a "}),e.jsx(b,{to:d,children:"Iniciar Sesión"})]})]})})})]})};export{O as F};
